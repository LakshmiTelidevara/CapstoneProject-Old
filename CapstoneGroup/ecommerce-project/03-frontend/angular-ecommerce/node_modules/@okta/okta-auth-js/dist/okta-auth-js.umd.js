/*! For license information please see okta-auth-js.umd.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.OktaAuth=t():e.OktaAuth=t()}(self,(function(){return function(){var e={506:function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.default=e.exports,e.exports.__esModule=!0},575:function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.default=e.exports,e.exports.__esModule=!0},100:function(e,t,n){var r=n(489),o=n(67);function i(t,n,a){return o()?(e.exports=i=Reflect.construct,e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=i=function(e,t,n){var o=[null];o.push.apply(o,t);var i=new(Function.bind.apply(e,o));return n&&r(i,n.prototype),i},e.exports.default=e.exports,e.exports.__esModule=!0),i.apply(null,arguments)}e.exports=i,e.exports.default=e.exports,e.exports.__esModule=!0},913:function(e){function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e},e.exports.default=e.exports,e.exports.__esModule=!0},754:function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.default=e.exports,e.exports.__esModule=!0,t(n)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0},205:function(e,t,n){var r=n(489);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)},e.exports.default=e.exports,e.exports.__esModule=!0},430:function(e){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")},e.exports.default=e.exports,e.exports.__esModule=!0},67:function(e){e.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}},e.exports.default=e.exports,e.exports.__esModule=!0},585:function(e,t,n){var r=n(8).default,o=n(506);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?o(e):t},e.exports.default=e.exports,e.exports.__esModule=!0},489:function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports.default=e.exports,e.exports.__esModule=!0,t(n,r)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0},8:function(e){function t(n){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(e.exports=t=function(e){return typeof e},e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=t=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.default=e.exports,e.exports.__esModule=!0),t(n)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0},957:function(e,t,n){var r=n(754),o=n(489),i=n(430),a=n(100);function s(t){var n="function"==typeof Map?new Map:void 0;return e.exports=s=function(e){if(null===e||!i(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return a(e,arguments,r(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),o(t,e)},e.exports.default=e.exports,e.exports.__esModule=!0,s(t)}e.exports=s,e.exports.default=e.exports,e.exports.__esModule=!0},757:function(e,t,n){e.exports=n(666)},615:function(e,t,n){"use strict";var r=n(575),o=n(913),i=n(205),a=n(585),s=n(754);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var c=function(e){i(c,e);var t,n,u=(t=c,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=s(t);if(n){var o=s(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return a(this,e)});function c(e){var t;return r(this,c),(t=u.call(this,e||"Promise was canceled")).name="CancelError",t}return o(c,[{key:"isCanceled",get:function(){return!0}}]),c}(n(957)(Error)),l=function(){function e(t){var n=this;r(this,e),this._cancelHandlers=[],this._isPending=!0,this._isCanceled=!1,this._rejectOnCancel=!0,this._promise=new Promise((function(e,r){n._reject=r;var o=function(e){if(!n._isPending)throw new Error("The `onCancel` handler was attached after the promise settled.");n._cancelHandlers.push(e)};return Object.defineProperties(o,{shouldReject:{get:function(){return n._rejectOnCancel},set:function(e){n._rejectOnCancel=e}}}),t((function(t){n._isCanceled&&o.shouldReject||(n._isPending=!1,e(t))}),(function(e){n._isPending=!1,r(e)}),o)}))}return o(e,[{key:"then",value:function(e,t){return this._promise.then(e,t)}},{key:"catch",value:function(e){return this._promise.catch(e)}},{key:"finally",value:function(e){return this._promise.finally(e)}},{key:"cancel",value:function(e){if(this._isPending&&!this._isCanceled){if(this._isCanceled=!0,this._cancelHandlers.length>0)try{var t,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}(this._cancelHandlers);try{for(n.s();!(t=n.n()).done;)(0,t.value)()}catch(e){n.e(e)}finally{n.f()}}catch(e){return void this._reject(e)}this._rejectOnCancel&&this._reject(new c(e))}}},{key:"isCanceled",get:function(){return this._isCanceled}}],[{key:"fn",value:function(t){return function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return new e((function(e,n,o){r.push(o),t.apply(void 0,r).then(e,n)}))}}}]),e}();Object.setPrototypeOf(l.prototype,Promise.prototype),e.exports=l,e.exports.CancelError=c},98:function(e,t){var n="undefined"!=typeof self?self:this,r=function(){function e(){this.fetch=!1,this.DOMException=n.DOMException}return e.prototype=n,new e}();!function(e){!function(t){var n="URLSearchParams"in e,r="Symbol"in e&&"iterator"in Symbol,o="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),i="FormData"in e,a="ArrayBuffer"in e;if(a)var s=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=ArrayBuffer.isView||function(e){return e&&s.indexOf(Object.prototype.toString.call(e))>-1};function c(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function l(e){return"string"!=typeof e&&(e=String(e)),e}function f(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return r&&(t[Symbol.iterator]=function(){return t}),t}function h(e){this.map={},e instanceof h?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function p(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function d(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function v(e){var t=new FileReader,n=d(t);return t.readAsArrayBuffer(e),n}function y(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function g(){return this.bodyUsed=!1,this._initBody=function(e){var t;this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:o&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:i&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:n&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():a&&o&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=y(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a&&(ArrayBuffer.prototype.isPrototypeOf(e)||u(e))?this._bodyArrayBuffer=y(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},o&&(this.blob=function(){var e=p(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?p(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(v)}),this.text=function(){var e,t,n,r=p(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,n=d(t=new FileReader),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},i&&(this.formData=function(){return this.text().then(b)}),this.json=function(){return this.text().then(JSON.parse)},this}h.prototype.append=function(e,t){e=c(e),t=l(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},h.prototype.delete=function(e){delete this.map[c(e)]},h.prototype.get=function(e){return e=c(e),this.has(e)?this.map[e]:null},h.prototype.has=function(e){return this.map.hasOwnProperty(c(e))},h.prototype.set=function(e,t){this.map[c(e)]=l(t)},h.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},h.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),f(e)},h.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),f(e)},h.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),f(e)},r&&(h.prototype[Symbol.iterator]=h.prototype.entries);var m=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function k(e,t){var n,r,o=(t=t||{}).body;if(e instanceof k){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new h(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,o||null==e._bodyInit||(o=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new h(t.headers)),this.method=(r=(n=t.method||this.method||"GET").toUpperCase(),m.indexOf(r)>-1?r:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o)}function b(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(o))}})),t}function w(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new h(t.headers),this.url=t.url||"",this._initBody(e)}k.prototype.clone=function(){return new k(this,{body:this._bodyInit})},g.call(k.prototype),g.call(w.prototype),w.prototype.clone=function(){return new w(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new h(this.headers),url:this.url})},w.error=function(){var e=new w(null,{status:0,statusText:""});return e.type="error",e};var T=[301,302,303,307,308];w.redirect=function(e,t){if(-1===T.indexOf(t))throw new RangeError("Invalid status code");return new w(null,{status:t,headers:{location:e}})},t.DOMException=e.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function S(e,n){return new Promise((function(r,i){var a=new k(e,n);if(a.signal&&a.signal.aborted)return i(new t.DOMException("Aborted","AbortError"));var s=new XMLHttpRequest;function u(){s.abort()}s.onload=function(){var e,t,n={status:s.status,statusText:s.statusText,headers:(e=s.getAllResponseHeaders()||"",t=new h,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var o=n.join(":").trim();t.append(r,o)}})),t)};n.url="responseURL"in s?s.responseURL:n.headers.get("X-Request-URL");var o="response"in s?s.response:s.responseText;r(new w(o,n))},s.onerror=function(){i(new TypeError("Network request failed"))},s.ontimeout=function(){i(new TypeError("Network request failed"))},s.onabort=function(){i(new t.DOMException("Aborted","AbortError"))},s.open(a.method,a.url,!0),"include"===a.credentials?s.withCredentials=!0:"omit"===a.credentials&&(s.withCredentials=!1),"responseType"in s&&o&&(s.responseType="blob"),a.headers.forEach((function(e,t){s.setRequestHeader(t,e)})),a.signal&&(a.signal.addEventListener("abort",u),s.onreadystatechange=function(){4===s.readyState&&a.signal.removeEventListener("abort",u)}),s.send(void 0===a._bodyInit?null:a._bodyInit)}))}S.polyfill=!0,e.fetch||(e.fetch=S,e.Headers=h,e.Request=k,e.Response=w),t.Headers=h,t.Request=k,t.Response=w,t.fetch=S,Object.defineProperty(t,"__esModule",{value:!0})}({})}(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var o=r;(t=o.fetch).default=o.fetch,t.fetch=o.fetch,t.Headers=o.Headers,t.Request=o.Request,t.Response=o.Response,e.exports=t},643:function(e){e.exports=!1},666:function(e){var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var o=t&&t.prototype instanceof y?t:y,i=Object.create(o.prototype),a=new A(r||[]);return i._invoke=function(e,t,n){var r=f;return function(o,i){if(r===p)throw new Error("Generator is already running");if(r===d){if("throw"===o)throw i;return P()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=O(a,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var u=l(e,t,n);if("normal"===u.type){if(r=n.done?d:h,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=d,n.method="throw",n.arg=u.arg)}}}(e,n,a),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",p="executing",d="completed",v={};function y(){}function g(){}function m(){}var k={};k[i]=function(){return this};var b=Object.getPrototypeOf,w=b&&b(b(R([])));w&&w!==n&&r.call(w,i)&&(k=w);var T=m.prototype=y.prototype=Object.create(k);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(o,i,a,s){var u=l(e[o],e,i);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(f).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}var o;this._invoke=function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}}function O(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,O(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var o=l(r,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var i=o.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function R(e){if(e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:P}}function P(){return{value:t,done:!0}}return g.prototype=T.constructor=m,m.constructor=g,g.displayName=u(m,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,u(e,s,"GeneratorFunction")),e.prototype=Object.create(T),e},e.awrap=function(e){return{__await:e}},S(x.prototype),x.prototype[a]=function(){return this},e.AsyncIterator=x,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new x(c(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(T),u(T,s,"Generator"),T[i]=function(){return this},T.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=R,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(_),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),_(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;_(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:R(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}},279:function(e){function t(){}t.prototype={on:function(e,t,n){var r=this.e||(this.e={});return(r[e]||(r[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){var r=this;function o(){r.off(e,o),t.apply(n,arguments)}return o._=t,this.on(e,o,n)},emit:function(e){for(var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),r=0,o=n.length;r<o;r++)n[r].fn.apply(n[r].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),r=n[e],o=[];if(r&&t)for(var i=0,a=r.length;i<a;i++)r[i].fn!==t&&r[i].fn._!==t&&o.push(r[i]);return o.length?n[e]=o:delete n[e],this}},e.exports=t},199:function(){}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return function(){"use strict";n.r(r),n.d(r,{ACCESS_TOKEN_STORAGE_KEY:function(){return se},AuthApiError:function(){return m},AuthPollStopError:function(){return k},AuthSdkError:function(){return b},AuthStateManager:function(){return io},AuthTransaction:function(){return Ue},AuthenticatorKey:function(){return Kt},CACHE_STORAGE_NAME:function(){return te},DEFAULT_CACHE_DURATION:function(){return Q},DEFAULT_CODE_CHALLENGE_METHOD:function(){return pe},DEFAULT_MAX_CLOCK_SKEW:function(){return $},DEFAULT_POLLING_DELAY:function(){return z},EVENT_ADDED:function(){return Xn},EVENT_ERROR:function(){return er},EVENT_EXPIRED:function(){return Qn},EVENT_REMOVED:function(){return Zn},EVENT_RENEWED:function(){return Yn},IDX_API_VERSION:function(){return de},IDX_RESPONSE_STORAGE_NAME:function(){return ae},ID_TOKEN_STORAGE_KEY:function(){return ue},INITIAL_AUTH_STATE:function(){return no},IdxFeature:function(){return qt},IdxStatus:function(){return Ht},MAX_VERIFIER_LENGTH:function(){return he},MIN_VERIFIER_LENGTH:function(){return fe},OAuthError:function(){return w},ORIGINAL_URI_STORAGE_NAME:function(){return ie},OktaAuth:function(){return os},PKCE_STORAGE_NAME:function(){return ne},REDIRECT_NONCE_COOKIE_NAME:function(){return Z},REDIRECT_OAUTH_PARAMS_NAME:function(){return Y},REDIRECT_STATE_COOKIE_NAME:function(){return X},REFERRER_PATH_STORAGE_KEY:function(){return le},REFRESH_TOKEN_STORAGE_KEY:function(){return ce},SHARED_TRANSACTION_STORAGE_NAME:function(){return oe},STATE_TOKEN_KEY_NAME:function(){return J},StorageManager:function(){return uo},TOKEN_STORAGE_NAME:function(){return ee},TRANSACTION_STORAGE_NAME:function(){return re},TokenManager:function(){return tr},addListener:function(){return at},addPostMessageListener:function(){return lt},addStateToken:function(){return Re},assertPKCESupport:function(){return Wt},authenticate:function(){return Ca},bind:function(){return U},buildAuthorizeParams:function(){return Xe},canProceed:function(){return Fa},cancel:function(){return ja},clearTransactionMeta:function(){return mi},clone:function(){return L},convertTokenParamsToOAuthParams:function(){return Ye},createOAuthMeta:function(){return Bt},createTransactionMeta:function(){return pi},crypto:function(){return e},decodeToken:function(){return fn},delay:function(){return Ie},deprecate:function(){return qn},deprecateWrap:function(){return Vn},exchangeCodeForTokens:function(){return pn},extend:function(){return D},find:function(){return B},genRandomString:function(){return je},generateNonce:function(){return ht},generateState:function(){return ft},getConsole:function(){return Hn},getDefaultTokenParams:function(){return At},getHashOrSearch:function(){return Nt},getKey:function(){return it},getLink:function(){return H},getNativeConsole:function(){return Bn},getOAuthBaseUrl:function(){return dt},getOAuthDomain:function(){return vt},getOAuthUrls:function(){return yt},getPollFn:function(){return Me},getSavedTransactionMeta:function(){return vi},getStateToken:function(){return Pe},getToken:function(){return gn},getTransactionMeta:function(){return yi},getUserInfo:function(){return xn},getWellKnown:function(){return ot},getWithPopup:function(){return On},getWithRedirect:function(){return _n},getWithoutPrompt:function(){return mn},handleEmailVerifyCallback:function(){return Na},handleInteractionCodeRedirect:function(){return $a},handleOAuthResponse:function(){return yn},hasAuthorizationCode:function(){return jt},hasErrorInUrl:function(){return Mt},hasInteractionCode:function(){return It},hasSavedInteractionHandle:function(){return di},hasTokensInHash:function(){return Ct},interact:function(){return xi},introspect:function(){return Ei},introspectAuthn:function(){return Be},isAbsoluteUrl:function(){return we},isAccessToken:function(){return sn},isAuthApiError:function(){return T},isAuthorizationCodeError:function(){return Pt},isCodeFlow:function(){return Dt},isCustomAuthTransactionMeta:function(){return rn},isEmailVerifyCallback:function(){return Ua},isEmailVerifyCallbackError:function(){return Ma},isFunction:function(){return ke},isIDToken:function(){return un},isIdxTransactionMeta:function(){return nn},isInteractionRequired:function(){return Ft},isInteractionRequiredError:function(){return Rt},isLoginRedirect:function(){return Lt},isNumber:function(){return me},isOAuthTransactionMeta:function(){return en},isObject:function(){return ge},isPKCETransactionMeta:function(){return tn},isPromise:function(){return be},isRedirectUri:function(){return Ut},isRefreshToken:function(){return cn},isRefreshTokenError:function(){return Qt},isSameRefreshToken:function(){return $t},isString:function(){return ye},isToken:function(){return an},isTransactionMeta:function(){return on},isTransactionMetaValid:function(){return ki},isTransactionMetaValidForFlow:function(){return bi},isTransactionMetaValidForOptions:function(){return wi},isoToUTCString:function(){return Ce},loadFrame:function(){return ut},loadPopup:function(){return ct},omit:function(){return F},parseEmailVerifyCallback:function(){return Da},parseFromUrl:function(){return Cn},pkce:function(){return We},poll:function(){return Ka},postRefreshToken:function(){return rt},postToTokenEndpoint:function(){return nt},postToTransaction:function(){return qe},preparePKCE:function(){return Jt},prepareTokenParams:function(){return zt},proceed:function(){return Ba},recoverPassword:function(){return za},register:function(){return Ga},removeListener:function(){return st},removeNils:function(){return N},removeTrailingSlash:function(){return Oe},renewToken:function(){return Tn},renewTokens:function(){return Sn},renewTokensWithRefresh:function(){return kn},resumeTransaction:function(){return Fe},revokeToken:function(){return hn},saveTransactionMeta:function(){return gi},startTransaction:function(){return Va},toAbsoluteUrl:function(){return Te},toQueryString:function(){return xe},toRelativeUrl:function(){return Se},transactionExists:function(){return Ke},transactionStatus:function(){return Le},transactionStep:function(){return He},unlockAccount:function(){return Ya},urlParamsToObject:function(){return Yt},validateClaims:function(){return Xt},validateCodeChallengeMethod:function(){return Gt},validateToken:function(){return ln},verifyToken:function(){return dn},warn:function(){return Kn}});var e={};n.r(e),n.d(e,{atob:function(){return S},base64ToBase64Url:function(){return _},base64UrlDecode:function(){return C},base64UrlToBase64:function(){return A},base64UrlToBuffer:function(){return j},base64UrlToString:function(){return R},btoa:function(){return x},bufferToBase64Url:function(){return I},getOidcHash:function(){return M},stringToBase64Url:function(){return E},stringToBuffer:function(){return P},verifyToken:function(){return K},webcrypto:function(){return O}});var t={};n.r(t),n.d(t,{ACCESS_TOKEN_STORAGE_KEY:function(){return se},CACHE_STORAGE_NAME:function(){return te},DEFAULT_CACHE_DURATION:function(){return Q},DEFAULT_CODE_CHALLENGE_METHOD:function(){return pe},DEFAULT_MAX_CLOCK_SKEW:function(){return $},DEFAULT_POLLING_DELAY:function(){return z},IDX_API_VERSION:function(){return de},IDX_RESPONSE_STORAGE_NAME:function(){return ae},ID_TOKEN_STORAGE_KEY:function(){return ue},MAX_VERIFIER_LENGTH:function(){return he},MIN_VERIFIER_LENGTH:function(){return fe},ORIGINAL_URI_STORAGE_NAME:function(){return ie},PKCE_STORAGE_NAME:function(){return ne},REDIRECT_NONCE_COOKIE_NAME:function(){return Z},REDIRECT_OAUTH_PARAMS_NAME:function(){return Y},REDIRECT_STATE_COOKIE_NAME:function(){return X},REFERRER_PATH_STORAGE_KEY:function(){return le},REFRESH_TOKEN_STORAGE_KEY:function(){return ce},SHARED_TRANSACTION_STORAGE_NAME:function(){return oe},STATE_TOKEN_KEY_NAME:function(){return J},TOKEN_STORAGE_NAME:function(){return ee},TRANSACTION_STORAGE_NAME:function(){return re}});var o={};n.r(o),n.d(o,{getUserAgent:function(){return bt},hasTextEncoder:function(){return xt},isBrowser:function(){return mt},isFingerprintSupported:function(){return wt},isHTTPS:function(){return Et},isIE11OrLess:function(){return kt},isLocalhost:function(){return _t},isPKCESupported:function(){return Ot},isPopupPostMessageSupported:function(){return Tt},isTokenVerifySupported:function(){return St}});var i={};n.r(i),n.d(i,{buildCredentialCreationOptions:function(){return In},buildCredentialRequestOptions:function(){return Mn},getAssertion:function(){return Dn},getAttestation:function(){return Un}});var a={};function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?f(e):t}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function v(e,t,n){return v=d()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&u(o,n.prototype),o},v.apply(null,arguments)}function y(e){var t="function"==typeof Map?new Map:void 0;return y=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return v(e,arguments,p(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),u(r,e)},y(e)}n.r(a),n.d(a,{AuthenticatorEnrollmentData:function(){return ua},AuthenticatorVerificationData:function(){return sa},ChallengeAuthenticator:function(){return Ji},ChallengePoll:function(){return zi},EnrollAuthenticator:function(){return Ki},EnrollPoll:function(){return Vi},EnrollProfile:function(){return Qi},EnrollmentChannelData:function(){return Gi},Identify:function(){return Yi},ReEnrollAuthenticator:function(){return Xi},RedirectIdp:function(){return Zi},Remediator:function(){return Pi},ResetAuthenticator:function(){return $i},SelectAuthenticatorAuthenticate:function(){return na},SelectAuthenticatorEnroll:function(){return ra},SelectAuthenticatorUnlockAccount:function(){return oa},SelectEnrollProfile:function(){return ia},SelectEnrollmentChannel:function(){return Wi},Skip:function(){return ca}});var g=function(e){c(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=p(t);if(n){var o=p(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return h(this,e)});function o(e){var t;return s(this,o),t=r.call(this,e),Object.setPrototypeOf(f(t),(this instanceof o?this.constructor:void 0).prototype),t}return o}(y(Error));var m=function(e){c(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=p(t);if(n){var o=p(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return h(this,e)});function o(e,t){var n;s(this,o);var i=e.errorSummary;return(n=r.call(this,i)).name="AuthApiError",n.errorSummary=e.errorSummary,n.errorCode=e.errorCode,n.errorLink=e.errorLink,n.errorId=e.errorId,n.errorCauses=e.errorCauses,t&&(n.xhr=t),n}return o}(g);var k=function(e){c(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=p(t);if(n){var o=p(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return h(this,e)});function o(){return s(this,o),r.call(this,"The poll was stopped by the sdk")}return o}(g);var b=function(e){c(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=p(t);if(n){var o=p(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return h(this,e)});function o(e,t){var n;return s(this,o),(n=r.call(this,e)).name="AuthSdkError",n.errorCode="INTERNAL",n.errorSummary=e,n.errorLink="INTERNAL",n.errorId="INTERNAL",n.errorCauses=[],t&&(n.xhr=t),n}return o}(g);var w=function(e){c(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=p(t);if(n){var o=p(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return h(this,e)});function o(e,t){var n;return s(this,o),(n=r.call(this,t)).name="OAuthError",n.errorCode=e,n.errorSummary=t,n}return o}(g);function T(e){return e instanceof m}var S=function(e){return atob(e)},x=function(e){return btoa(e)},O="undefined"==typeof crypto?null:crypto;function E(e){return _(x(e))}function _(e){return e.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function A(e){return e.replace(/-/g,"+").replace(/_/g,"/")}function R(e){var t=A(e);switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new b("Not a valid Base64Url")}var n=S(t);try{return decodeURIComponent(escape(n))}catch(e){return n}}function P(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}function C(e){return S(A(e))}function j(e){return Uint8Array.from(C(e),(function(e){return e.charCodeAt(0)}))}function I(e){return x(new Uint8Array(e).reduce((function(e,t){return e+String.fromCharCode(t)}),""))}function M(e){var t=(new TextEncoder).encode(e);return O.subtle.digest("SHA-256",t).then((function(e){var t=new Uint8Array(e).slice(0,16);return E(String.fromCharCode.apply(null,t))}))}function U(e,t){var n=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return r=n.concat(r),e.apply(t,r)}}function D(){var e=arguments[0],t=[].slice.call(arguments,1);return t.forEach((function(t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&void 0!==t[n]&&(e[n]=t[n])})),e}function N(e){var t={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=e[n];null!=r&&(t[n]=r)}return t}function L(e){if(e){var t=JSON.stringify(e);if(t)return JSON.parse(t)}return e}function F(e){for(var t={},n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&-1==r.indexOf(i)&&(t[i]=e[i]);return L(t)}function B(e,t){for(var n=e.length;n--;){var r=e[n],o=!0;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&r[i]!==t[i]){o=!1;break}if(o)return r}}function H(e,t,n){if(e&&e._links){var r=L(e._links[t]);return r&&r.name&&n?r.name===n?r:void 0:r}}function K(e,t){t=L(t);var n={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};return delete t.use,O.subtle.importKey("jwk",t,n,!0,["verify"]).then((function(t){var r=e.split("."),o=P(r[0]+"."+r[1]),i=P(C(r[2]));return O.subtle.verify(n,t,i,o)}))}function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function V(e,t,n){return t&&q(e.prototype,t),n&&q(e,n),e}var W=n(757),G=n.n(W),J="oktaStateToken",z=500,$=300,Q=86400,Y="okta-oauth-redirect-params",X="okta-oauth-state",Z="okta-oauth-nonce",ee="okta-token-storage",te="okta-cache-storage",ne="okta-pkce-storage",re="okta-transaction-storage",oe="okta-shared-transaction-storage",ie="okta-original-uri-storage",ae="okta-idx-response-storage",se="accessToken",ue="idToken",ce="refreshToken",le="referrerPath",fe=43,he=128,pe="S256",de="1.0.0";function ve(e,t,n){e.options.headers=e.options.headers||{},e.options.headers[t]=n}function ye(e){return"[object String]"===Object.prototype.toString.call(e)}function ge(e){return"[object Object]"===Object.prototype.toString.call(e)}function me(e){return"[object Number]"===Object.prototype.toString.call(e)}function ke(e){return!!e&&"[object Function]"==={}.toString.call(e)}function be(e){return e&&e.finally&&"function"==typeof e.finally}function we(e){return/^(?:[a-z]+:)?\/\//i.test(e)}function Te(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return we(e)?e:(t=Oe(t),"/"===e[0]?"".concat(t).concat(e):"".concat(t,"/").concat(e))}function Se(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return we(e)&&(e=e.substring(t.length)),"/"===e[0]?e:"/".concat(e)}function xe(e){var t=[];if(null!==e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&void 0!==e[n]&&null!==e[n]&&t.push(n+"="+encodeURIComponent(e[n]));return t.length?"?"+t.join("&"):""}function Oe(e){if(e){var t=e.replace(/^\s+|\s+$/gm,"");return t.replace(/\/+$/,"")}}function Ee(e,t){var n=(t=t||{}).url,r=t.method,o=t.args,i=t.saveAuthnState,a=t.accessToken,s=!0===t.withCredentials,u=e.options.storageUtil.storage,c=e.storageManager.getHttpCache(e.options.cookies);if(t.cacheResponse){var f=c.getStorage()[n];if(f&&Date.now()/1e3<f.expiresAt)return Promise.resolve(f.response)}var h=e._oktaUserAgent.getHttpHeader(),p=Object.assign({Accept:"application/json","Content-Type":"application/json"},h);Object.assign(p,e.options.headers,t.headers),p=N(p),a&&ye(a)&&(p.Authorization="Bearer "+a);var d,v,y={headers:p,data:o||void 0,withCredentials:s};return e.options.httpRequestClient(r,n,y).then((function(r){return(v=r.responseText)&&ye(v)&&(v=JSON.parse(v))&&"object"===l(v)&&!v.headers&&(v.headers=r.headers),i&&(v.stateToken||u.delete(J)),v&&v.stateToken&&v.expiresAt&&u.set(J,v.stateToken,v.expiresAt,e.options.cookies),v&&t.cacheResponse&&c.updateStorage(n,{expiresAt:Math.floor(Date.now()/1e3)+Q,response:v}),v})).catch((function(t){var n=t.responseText||{};if(ye(n))try{n=JSON.parse(n)}catch(e){n={errorSummary:"Unknown error"}}throw t.status>=500&&(n.errorSummary="Unknown error"),e.options.transformErrorXHR&&(t=e.options.transformErrorXHR(L(t))),"E0000011"===(d=new m(n,t)).errorCode&&u.delete(J),d}))}function _e(e,t,n){var r={url:t=we(t)?t:e.getIssuerOrigin()+t,method:"GET"};return Object.assign(r,n),Ee(e,r)}function Ae(e,t,n,r){var o={url:t=we(t)?t:e.getIssuerOrigin()+t,method:"POST",args:n,saveAuthnState:!0};return Object.assign(o,r),Ee(e,o)}function Re(e,t){var n={};return Object.assign(n,t),!n.stateToken&&e.stateToken&&(n.stateToken=e.stateToken),n}function Pe(e){return Re(e)}function Ce(e){var t=e.match(/\d+/g),n=Date.UTC(t[0],t[1]-1,t[2],t[3],t[4],t[5]);return new Date(n).toUTCString()}function je(e){for(var t="abcdefghijklnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",n="",r=0,o=t.length;r<e;++r)n+=t[Math.floor(Math.random()*o)];return n}function Ie(e){return new Promise((function(t){setTimeout(t,e)}))}function Me(e,t,n){return function(r){var o,i,a,s;me(r)?o=r:ge(r)&&(o=(r=r).delay,i=r.rememberDevice,a=r.autoPush,s=r.transactionCallBack),o||0===o||(o=z);var u=H(t,"next","poll");n.isPolling=!0;var c=0;return function r(){return n.isPolling?function(){var n={};if("function"==typeof a)try{n.autoPush=!!a()}catch(e){return Promise.reject(new b("AutoPush resulted in an error."))}else null!=a&&(n.autoPush=!!a);if("function"==typeof i)try{n.rememberDevice=!!i()}catch(e){return Promise.reject(new b("RememberDevice resulted in an error."))}else null!=i&&(n.rememberDevice=!!i);var r=u.href+xe(n);return Ae(e,r,Pe(t),{saveAuthnState:!1,withCredentials:!0})}().then((function(t){if(c=0,t.factorResult&&"WAITING"===t.factorResult){if(!n.isPolling)throw new k;return"function"==typeof s&&s(t),Ie(o).then(r)}return n.isPolling=!1,new Ue(e,t)})).catch((function(e){if(e.xhr&&(0===e.xhr.status||429===e.xhr.status)&&c<=4){var t=1e3*Math.pow(2,c);return c++,Ie(t).then(r)}throw e})):Promise.reject(new k)}().catch((function(e){throw n.isPolling=!1,e}))}}var Ue=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(s(this,e),this.data=void 0,this.status=void 0,n){if(this.data=n,this.data.interactionHandle)return void(this.status=n.status);Object.assign(this,Ne(t,n,n,{})),delete this.stateToken,"RECOVERY_CHALLENGE"!==n.status||n._links||(this.cancel=function(){return Promise.resolve(new e(t))})}};function De(e,t,n,r,o){if(Array.isArray(r))return function(i,a){if(!i)throw new b("Must provide a link name");var s=B(r,{name:i});if(!s)throw new b("No link found for that name");return De(e,t,n,s,o)(a)};if(r.hints&&r.hints.allow&&1===r.hints.allow.length)switch(r.hints.allow[0]){case"GET":return function(){return _e(e,r.href,{withCredentials:!0})};case"POST":return function(i){o&&o.isPolling&&(o.isPolling=!1);var a=Re(t,i);"MFA_ENROLL"!==t.status&&"FACTOR_ENROLL"!==t.status||Object.assign(a,{factorType:n.factorType,provider:n.provider});var s={},u=a.autoPush;if(void 0!==u){if("function"==typeof u)try{s.autoPush=!!u()}catch(e){return Promise.reject(new b("AutoPush resulted in an error."))}else null!==u&&(s.autoPush=!!u);a=F(a,"autoPush")}var c=a.rememberDevice;if(void 0!==c){if("function"==typeof c)try{s.rememberDevice=!!c()}catch(e){return Promise.reject(new b("RememberDevice resulted in an error."))}else null!==c&&(s.rememberDevice=!!c);a=F(a,"rememberDevice")}else a.profile&&void 0!==a.profile.updatePhone&&(a.profile.updatePhone&&(s.updatePhone=!0),a.profile=F(a.profile,"updatePhone"));var l=r.href+xe(s);return qe(e,l,a)}}}function Ne(e,t,n,r){if(n=L(n=n||t),Array.isArray(n)){for(var o=[],i=0,a=n.length;i<a;i++)o.push(Ne(e,t,n[i],r));return o}var s=n._embedded||{};for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(ge(s[u])||Array.isArray(s[u]))&&(s[u]=Ne(e,t,s[u],r));var c=function(e,t,n,r){var o={};for(var i in n._links)if(Object.prototype.hasOwnProperty.call(n._links,i)){var a=n._links[i];if("next"===i&&(i=a.name),a.type)o[i]=a;else if("poll"===i)o.poll=Me(e,t,r);else{var s=De(e,t,n,a,r);s&&(o[i]=s)}}return o}(e,t,n,r);return Object.assign(s,c),n=F(n,"_embedded","_links"),Object.assign(n,s),n}function Le(e,t){return t=Re(e,t),Ae(e,e.getIssuerOrigin()+"/api/v1/authn",t,{withCredentials:!0})}function Fe(e,t){if(!t||!t.stateToken){var n=e.tx.exists._get(J);if(!n)return Promise.reject(new b("No transaction to resume"));t={stateToken:n}}return e.tx.status(t).then((function(t){return new Ue(e,t)}))}function Be(e,t){if(!t||!t.stateToken){var n=e.tx.exists._get(J);if(!n)return Promise.reject(new b("No transaction to evaluate"));t={stateToken:n}}return He(e,t).then((function(t){return new Ue(e,t)}))}function He(e,t){return t=Re(e,t),Ae(e,e.getIssuerOrigin()+"/api/v1/authn/introspect",t,{withCredentials:!0})}function Ke(e){return!!e.tx.exists._get(J)}function qe(e,t,n,r){return r=Object.assign({withCredentials:!0},r),Ae(e,t,n,r).then((function(t){return new Ue(e,t)}))}function Ve(e){return("0"+e.toString(16)).substr(-2)}var We={DEFAULT_CODE_CHALLENGE_METHOD:pe,generateVerifier:function(e){var t=e||"";return t.length<fe&&(t+=function(e){var t=new Uint8Array(Math.ceil(e/2));return O.getRandomValues(t),Array.from(t,Ve).join("").slice(0,e)}(fe-t.length)),encodeURIComponent(t).slice(0,he)},computeChallenge:function(e){var t=(new TextEncoder).encode(e);return O.subtle.digest("SHA-256",t).then((function(e){return E(String.fromCharCode.apply(null,new Uint8Array(e)))}))}};function Ge(e){return e.session.get().then((function(e){return"ACTIVE"===e.status})).catch((function(){return!1}))}function Je(e){return _e(e,"/api/v1/sessions/me",{withCredentials:!0}).then((function(t){var n=F(t,"_links");return n.refresh=function(){return Ae(e,H(t,"refresh").href,{},{withCredentials:!0})},n.user=function(){return _e(e,H(t,"user").href,{withCredentials:!0})},n})).catch((function(){return{status:"INACTIVE"}}))}function ze(e){return Ee(e,{url:e.getIssuerOrigin()+"/api/v1/sessions/me",method:"DELETE",withCredentials:!0})}function $e(e){return Ae(e,"/api/v1/sessions/me/lifecycle/refresh",{},{withCredentials:!0})}function Qe(e,t,n){n=n||window.location.href,window.location.assign(e.getIssuerOrigin()+"/login/sessionCookieRedirect"+xe({checkAccountSetupComplete:!0,token:t,redirectUrl:n}))}function Ye(e){if(!e.clientId)throw new b("A clientId must be specified in the OktaAuth constructor to get a token");if(ye(e.responseType)&&-1!==e.responseType.indexOf(" "))throw new b("Multiple OAuth responseTypes must be defined as an array");var t={client_id:e.clientId,code_challenge:e.codeChallenge,code_challenge_method:e.codeChallengeMethod,display:e.display,idp:e.idp,idp_scope:e.idpScope,login_hint:e.loginHint,max_age:e.maxAge,nonce:e.nonce,prompt:e.prompt,redirect_uri:e.redirectUri,response_mode:e.responseMode,response_type:e.responseType,sessionToken:e.sessionToken,state:e.state};if(t=N(t),["idp_scope","response_type"].forEach((function(e){Array.isArray(t[e])&&(t[e]=t[e].join(" "))})),-1!==e.responseType.indexOf("id_token")&&-1===e.scopes.indexOf("openid"))throw new b("openid scope must be specified in the scopes argument when requesting an id_token");return t.scope=e.scopes.join(" "),t}function Xe(e){var t=Ye(e);return xe(Object.assign(Object.assign({},t),e.extraParams&&Object.assign({},e.extraParams)))}function Ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function et(e,t){if(e){if("string"==typeof e)return Ze(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ze(e,t):void 0}}function tt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||et(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nt(e,t,n){!function(e){if(!e.clientId)throw new b("A clientId must be specified in the OktaAuth constructor to get a token");if(!e.redirectUri)throw new b("The redirectUri passed to /authorize must also be passed to /token");if(!e.authorizationCode&&!e.interactionCode)throw new b("An authorization code (returned from /authorize) must be passed to /token");if(!e.codeVerifier)throw new b('The "codeVerifier" (generated and saved by your app) must be passed to /token')}(t);var r=function(e,t){var n=N({client_id:t.clientId,redirect_uri:t.redirectUri,grant_type:t.interactionCode?"interaction_code":"authorization_code",code_verifier:t.codeVerifier});t.interactionCode?n.interaction_code=t.interactionCode:t.authorizationCode&&(n.code=t.authorizationCode);var r=e.options.clientSecret;return r&&(n.client_secret=r),xe(n).slice(1)}(e,t);return Ee(e,{url:n.tokenUrl,method:"POST",args:r,headers:{"Content-Type":"application/x-www-form-urlencoded"}})}function rt(e,t,n){return Ee(e,{url:n.tokenUrl,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},args:Object.entries({client_id:t.clientId,grant_type:"refresh_token",scope:n.scopes.join(" "),refresh_token:n.refreshToken}).map((function(e){var t=tt(e,2),n=t[0],r=t[1];return n+"="+encodeURIComponent(r)})).join("&")})}function ot(e,t){return _e(e,(t||e.options.issuer)+"/.well-known/openid-configuration",{cacheResponse:!0})}function it(e,t,n){var r=e.storageManager.getHttpCache(e.options.cookies);return ot(e,t).then((function(t){var o=t.jwks_uri,i=r.getStorage()[o];if(i&&Date.now()/1e3<i.expiresAt){var a=B(i.response.keys,{kid:n});if(a)return a}return r.clearStorage(o),_e(e,o,{cacheResponse:!0}).then((function(e){var t=B(e.keys,{kid:n});if(t)return t;throw new b("The key id, "+n+", was not found in the server's keys")}))}))}function at(e,t,n){e.addEventListener?e.addEventListener(t,n):e.attachEvent("on"+t,n)}function st(e,t,n){e.removeEventListener?e.removeEventListener(t,n):e.detachEvent("on"+t,n)}function ut(e){var t=document.createElement("iframe");return t.style.display="none",t.src=e,document.body.appendChild(t)}function ct(e,t){var n=t.popupTitle||"External Identity Provider User Authentication";return window.open(e,n,"toolbar=no, scrollbars=yes, resizable=yes, top=100, left=500, width=600, height=600")}function lt(e,t,n){var r,o;return new Promise((function(i,a){r=function(t){if(t.data&&t.data.state===n)return t.origin!==e.getIssuerOrigin()?a(new b("The request does not match client configuration")):void i(t.data)},at(window,"message",r),o=setTimeout((function(){a(new b("OAuth flow timed out"))}),t||12e4)})).finally((function(){clearTimeout(o),st(window,"message",r)}))}function ft(){return je(64)}function ht(){return je(64)}function pt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Oe(t.issuer)||e.options.issuer;return n}function dt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=pt(e,t),r=n.indexOf("/oauth2")>0?n:n+"/oauth2";return r}function vt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=pt(e,t),r=n.split("/oauth2")[0];return r}function yt(e,t){if(arguments.length>2)throw new b('As of version 3.0, "getOAuthUrls" takes only a single set of options');var n=Oe((t=t||{}).authorizeUrl)||e.options.authorizeUrl,r=pt(e,t),o=Oe(t.userinfoUrl)||e.options.userinfoUrl,i=Oe(t.tokenUrl)||e.options.tokenUrl,a=Oe(t.logoutUrl)||e.options.logoutUrl,s=Oe(t.revokeUrl)||e.options.revokeUrl,u=dt(e,t);return{issuer:r,authorizeUrl:n=n||u+"/v1/authorize",userinfoUrl:o=o||u+"/v1/userinfo",tokenUrl:i=i||u+"/v1/token",revokeUrl:s=s||u+"/v1/revoke",logoutUrl:a=a||u+"/v1/logout"}}var gt=/windows phone|iemobile|wpdesktop/i;function mt(){return"undefined"!=typeof document&&"undefined"!=typeof window}function kt(){if(!mt())return!1;var e=document.documentMode;return!!e&&e<=11}function bt(){return navigator.userAgent}function wt(){var e=bt();return e&&!gt.test(e)}function Tt(){if(!mt())return!1;var e=document.documentMode,t=e&&e<10;return void 0!==window.postMessage&&!t}function St(){return null!=O&&void 0!==O.subtle&&"undefined"!=typeof Uint8Array}function xt(){return"undefined"!=typeof TextEncoder}function Ot(){return St()&&xt()}function Et(){return!!mt()&&"https:"===window.location.protocol}function _t(){return mt()&&"localhost"===window.location.hostname}function At(e){var t=e.options,n=t.pkce,r=t.clientId,o=t.redirectUri,i=t.responseType,a=t.responseMode,s=t.scopes,u=t.state,c=t.ignoreSignature,l=mt()?window.location.href:void 0;return N({pkce:n,clientId:r,redirectUri:o||l,responseType:i||["token","id_token"],responseMode:a,state:u||ft(),nonce:ht(),scopes:s||["openid","email"],ignoreSignature:c})}function Rt(e){return"OAuthError"===e.name&&"interaction_required"===e.errorCode}function Pt(e,t){if("AuthApiError"!==t.name)return!1;var n=t.xhr,r=null==n?void 0:n.responseJSON;return e.options.pkce&&"invalid_grant"===(null==r?void 0:r.error)}function Ct(e){return/((id|access)_token=)/i.test(e)}function jt(e){return/(code=)/i.test(e)}function It(e){return/(interaction_code=)/i.test(e)}function Mt(e){return/(error=)/i.test(e)||/(error_description)/i.test(e)}function Ut(e,t){var n=t.options;return!(!e||!n.redirectUri)&&0===e.indexOf(n.redirectUri)}function Dt(e){return e.pkce||"code"===e.responseType||"query"===e.responseMode}function Nt(e){return Dt(e)&&"fragment"!==e.responseMode?window.location.search:window.location.hash}function Lt(e){if(!Ut(window.location.href,e))return!1;var t=Dt(e.options),n=Nt(e.options);return!!Mt(n)||(t?jt(n)||It(n):Ct(window.location.hash))}function Ft(e,t){if(!t){if(!Lt(e))return!1;t=Nt(e.options)}return/(error=interaction_required)/i.test(t)}function Bt(e,t){var n={issuer:e.options.issuer,urls:yt(e,t),clientId:t.clientId,redirectUri:t.redirectUri,responseType:t.responseType,responseMode:t.responseMode,scopes:t.scopes,state:t.state,nonce:t.nonce,ignoreSignature:t.ignoreSignature};return!1===t.pkce?n:Object.assign(Object.assign({},n),{codeVerifier:t.codeVerifier,codeChallengeMethod:t.codeChallengeMethod,codeChallenge:t.codeChallenge})}var Ht,Kt,qt,Vt=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};function Wt(e){if(!e.features.isPKCESupported()){var t="PKCE requires a modern browser with encryption support running in a secure context.";throw e.features.isHTTPS()||(t+="\nThe current page is not being served with HTTPS protocol. PKCE requires secure HTTPS protocol."),e.features.hasTextEncoder()||(t+='\n"TextEncoder" is not defined. To use PKCE, you may need to include a polyfill/shim for this browser.'),new b(t)}}function Gt(e,t){return Vt(this,void 0,void 0,G().mark((function n(){return G().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=t||e.options.codeChallengeMethod||pe,n.next=3,ot(e);case 3:if(-1!==(n.sent.code_challenge_methods_supported||[]).indexOf(t)){n.next=7;break}throw new b("Invalid code_challenge_method");case 7:return n.abrupt("return",t);case 8:case"end":return n.stop()}}),n)})))}function Jt(e,t){return Vt(this,void 0,void 0,G().mark((function n(){var r,o,i,a;return G().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=(r=t).codeVerifier,i=r.codeChallenge,a=r.codeChallengeMethod,i=i||e.options.codeChallenge){n.next=8;break}return Wt(e),o=o||We.generateVerifier(),n.next=7,We.computeChallenge(o);case 7:i=n.sent;case 8:return n.next=10,Gt(e,a);case 10:return a=n.sent,t=Object.assign(Object.assign({},t),{responseType:"code",codeVerifier:o,codeChallenge:i,codeChallengeMethod:a}),n.abrupt("return",t);case 13:case"end":return n.stop()}}),n)})))}function zt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Vt(this,void 0,void 0,G().mark((function n(){var r;return G().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=At(e),!1!==(t=Object.assign(Object.assign({},r),t)).pkce){n.next=4;break}return n.abrupt("return",t);case 4:return n.abrupt("return",Jt(e,t));case 5:case"end":return n.stop()}}),n)})))}function $t(e,t){return e.refreshToken===t.refreshToken}function Qt(e){return!(!T(e)||!e.xhr||!e.xhr.responseJSON||"invalid_grant"!==e.xhr.responseJSON.error)}function Yt(e){var t=/\+/g,n=/([^&=]+)=?([^&]*)/g,r=e||"";"#"===r.charAt(0)&&"/"===r.charAt(1)&&(r=r.substring(2)),"#"!==r.charAt(0)&&"?"!==r.charAt(0)||(r=r.substring(1));for(var o,i={};o=n.exec(r);){var a=o[1],s=o[2];i[a]="id_token"===a||"access_token"===a||"code"===a?s:decodeURIComponent(s.replace(t," "))}return i}function Xt(e,t,n){var r=n.clientId,o=n.issuer,i=n.nonce;if(!t||!o||!r)throw new b("The jwt, iss, and aud arguments are all required");if(i&&t.nonce!==i)throw new b("OAuth flow response nonce doesn't match request nonce");var a=Math.floor(Date.now()/1e3);if(t.iss!==o)throw new b("The issuer ["+t.iss+"] does not match ["+o+"]");if(t.aud!==r)throw new b("The audience ["+t.aud+"] does not match ["+r+"]");if(t.iat>t.exp)throw new b("The JWT expired before it was issued");if(!e.options.ignoreLifetime){if(a-e.options.maxClockSkew>t.exp)throw new b("The JWT expired and is no longer valid");if(t.iat>a+e.options.maxClockSkew)throw new b("The JWT was issued in the future")}}function Zt(e){return!(!e||"object"!==l(e)||0===Object.values(e).length)}function en(e){return!(!Zt(e)||!e.redirectUri&&!e.responseType)}function tn(e){return!!en(e)&&!!e.codeVerifier}function nn(e){return!!tn(e)&&!!e.interactionHandle}function rn(e){return!!Zt(e)&&void 0===Object.values(e).find((function(e){return"string"!=typeof e}))}function on(e){return!(!en(e)&&!rn(e))}function an(e){return!!(e&&(e.accessToken||e.idToken||e.refreshToken)&&Array.isArray(e.scopes))}function sn(e){return e&&e.accessToken}function un(e){return e&&e.idToken}function cn(e){return e&&e.refreshToken}function ln(e,t){if(!un(e)&&!sn(e)&&!cn(e))throw new b("Token must be an Object with scopes, expiresAt, and one of: an idToken, accessToken, or refreshToken property");if("accessToken"===t&&!sn(e))throw new b("invalid accessToken");if("idToken"===t&&!un(e))throw new b("invalid idToken");if("refreshToken"===t&&!cn(e))throw new b("invalid refreshToken")}function fn(e){var t,n=e.split(".");try{t={header:JSON.parse(R(n[0])),payload:JSON.parse(R(n[1])),signature:n[2]}}catch(e){throw new b("Malformed token")}return t}!function(e){e.SUCCESS="SUCCESS",e.PENDING="PENDING",e.FAILURE="FAILURE",e.TERMINAL="TERMINAL",e.CANCELED="CANCELED"}(Ht||(Ht={})),function(e){e.OKTA_PASSWORD="okta_password",e.OKTA_EMAIL="okta_email",e.PHONE_NUMBER="phone_number",e.GOOGLE_AUTHENTICATOR="google_otp",e.SECURITY_QUESTION="security_question",e.OKTA_VERIFY="okta_verify",e.WEBAUTHN="webauthn"}(Kt||(Kt={})),function(e){e.PASSWORD_RECOVERY="recover-password",e.REGISTRATION="enroll-profile",e.SOCIAL_IDP="redirect-idp",e.ACCOUNT_UNLOCK="unlock-account"}(qt||(qt={}));function hn(e,t){return n=this,r=void 0,o=void 0,i=G().mark((function n(){var r,o,i,a,s,u,c;return G().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r="",o="",t&&(r=t.accessToken,o=t.refreshToken),r||o){n.next=5;break}throw new b("A valid access or refresh token object is required");case 5:if(i=e.options.clientId,a=e.options.clientSecret,i){n.next=9;break}throw new b("A clientId must be specified in the OktaAuth constructor to revoke a token");case 9:return s=yt(e).revokeUrl,u=xe({token_type_hint:o?"refresh_token":"access_token",token:o||r}).slice(1),c=x(a?"".concat(i,":").concat(a):i),n.abrupt("return",Ae(e,s,u,{headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+c}}));case 13:case"end":return n.stop()}}),n)})),new(o||(o=Promise))((function(e,t){function a(e){try{u(i.next(e))}catch(e){t(e)}}function s(e){try{u(i.throw(e))}catch(e){t(e)}}function u(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(a,s)}u((i=i.apply(n,r||[])).next())}));var n,r,o,i}function pn(e,t,n){n=n||yt(e,t);var r=t=Object.assign({},At(e),L(t)),o=r.authorizationCode,i=r.interactionCode,a=r.codeVerifier,s=r.clientId,u=r.redirectUri,c=r.scopes,l=r.ignoreSignature,f=r.state;return nt(e,{clientId:s,redirectUri:u,authorizationCode:o,interactionCode:i,codeVerifier:a},n).then((function(t){var r=["token"];return-1!==c.indexOf("openid")&&r.push("id_token"),yn(e,{clientId:s,redirectUri:u,scopes:c,responseType:r,ignoreSignature:l},t,n).then((function(e){return e.code=o,e.state=f,e}))})).finally((function(){e.transactionManager.clear()}))}function dn(e,t,n){return r=this,o=void 0,i=void 0,a=G().mark((function r(){var o,i,a,s,u,c;return G().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t&&t.idToken){r.next=2;break}throw new b("Only idTokens may be verified");case 2:return o=fn(t.idToken),i=(null==n?void 0:n.issuer)||e.options.issuer,r.next=6,ot(e,i);case 6:if(a=r.sent,s=a.issuer,u=Object.assign({clientId:e.options.clientId,ignoreSignature:e.options.ignoreSignature},n,{issuer:s}),Xt(e,o.payload,u),1!=u.ignoreSignature&&e.features.isTokenVerifySupported()){r.next=12;break}return r.abrupt("return",t);case 12:return r.next=14,it(e,t.issuer,o.header.kid);case 14:return c=r.sent,r.next=17,K(t.idToken,c);case 17:if(r.sent){r.next=20;break}throw new b("The token signature is not valid");case 20:if(!(n&&n.accessToken&&t.claims.at_hash)){r.next=26;break}return r.next=23,M(n.accessToken);case 23:if(r.sent===t.claims.at_hash){r.next=26;break}throw new b("Token hash verification failed");case 26:return r.abrupt("return",t);case 27:case"end":return r.stop()}}),r)})),new(i||(i=Promise))((function(e,t){function n(e){try{u(a.next(e))}catch(e){t(e)}}function s(e){try{u(a.throw(e))}catch(e){t(e)}}function u(t){var r;t.done?e(t.value):(r=t.value,r instanceof i?r:new i((function(e){e(r)}))).then(n,s)}u((a=a.apply(r,o||[])).next())}));var r,o,i,a}function vn(e,t){if(e.error&&e.error_description)throw new w(e.error,e.error_description);if(e.state!==t.state)throw new b("OAuth flow response state doesn't match request state")}function yn(e,t,n,r){return o=this,i=void 0,a=void 0,s=G().mark((function o(){var i,a,s,u,c,l,f,h,p,d,v,y,g,m;return G().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(!1===e.options.pkce||!n.code&&!n.interaction_code){o.next=3;break}return o.abrupt("return",pn(e,Object.assign({},t,{authorizationCode:n.code,interactionCode:n.interaction_code}),r));case 3:if(t=t||At(e),r=r||yt(e,t),i=t.responseType||[],Array.isArray(i)||(i=[i]),a=n.scope?n.scope.split(" "):L(t.scopes),s=t.clientId||e.options.clientId,vn(n,t),u={},c=n.expires_in,l=n.token_type,f=n.access_token,h=n.id_token,p=n.refresh_token,d=Math.floor(Date.now()/1e3),f&&(v=e.token.decode(f),u.accessToken={accessToken:f,claims:v.payload,expiresAt:Number(c)+d,tokenType:l,scopes:a,authorizeUrl:r.authorizeUrl,userinfoUrl:r.userinfoUrl}),p&&(u.refreshToken={refreshToken:p,expiresAt:Number(c)+d,scopes:a,tokenUrl:r.tokenUrl,authorizeUrl:r.authorizeUrl,issuer:r.issuer}),!h){o.next=27;break}return y=e.token.decode(h),g={idToken:h,claims:y.payload,expiresAt:y.payload.exp-y.payload.iat+d,scopes:a,authorizeUrl:r.authorizeUrl,issuer:r.issuer,clientId:s},m={clientId:s,issuer:r.issuer,nonce:t.nonce,accessToken:f},void 0!==t.ignoreSignature&&(m.ignoreSignature=t.ignoreSignature),o.next=26,dn(e,g,m);case 26:u.idToken=g;case 27:if(-1===i.indexOf("token")||u.accessToken){o.next=29;break}throw new b('Unable to parse OAuth flow response: response type "token" was requested but "access_token" was not returned.');case 29:if(-1===i.indexOf("id_token")||u.idToken){o.next=31;break}throw new b('Unable to parse OAuth flow response: response type "id_token" was requested but "id_token" was not returned.');case 31:return o.abrupt("return",{tokens:u,state:n.state,code:n.code});case 32:case"end":return o.stop()}}),o)})),new(a||(a=Promise))((function(e,t){function n(e){try{u(s.next(e))}catch(e){t(e)}}function r(e){try{u(s.throw(e))}catch(e){t(e)}}function u(t){var o;t.done?e(t.value):(o=t.value,o instanceof a?o:new a((function(e){e(o)}))).then(n,r)}u((s=s.apply(o,i||[])).next())}));var o,i,a,s}function gn(e,t){if(arguments.length>2)return Promise.reject(new b('As of version 3.0, "getToken" takes only a single set of options'));var n=(t=t||{}).popupWindow;return t.popupWindow=void 0,zt(e,t).then((function(r){var o,i;switch(t.sessionToken?Object.assign(r,{prompt:"none",responseMode:"okta_post_message",display:null}):t.idp&&Object.assign(r,{display:"popup"}),i=yt(e,r),o=(t.codeVerifier?i.tokenUrl:i.authorizeUrl)+Xe(r),r.sessionToken||null===r.display?"IFRAME":"popup"===r.display?"POPUP":"IMPLICIT"){case"IFRAME":var a=lt(e,t.timeout,r.state),s=ut(o);return a.then((function(t){return yn(e,r,t,i)})).finally((function(){var e;document.body.contains(s)&&(null===(e=s.parentElement)||void 0===e||e.removeChild(s))}));case"POPUP":var u;if("okta_post_message"===r.responseMode){if(!e.features.isPopupPostMessageSupported())throw new b("This browser doesn't have full postMessage support");u=lt(e,t.timeout,r.state)}return n&&n.location.assign(o),new Promise((function(e,t){var r=setInterval((function(){n&&!n.closed||(clearInterval(r),t(new b("Unable to parse OAuth flow response")))}),100);u.then((function(t){clearInterval(r),e(t)})).catch((function(e){clearInterval(r),t(e)}))})).then((function(t){return yn(e,r,t,i)})).finally((function(){n&&!n.closed&&n.close()}));default:throw new b("The full page redirect flow is not supported")}}))}function mn(e,t){return arguments.length>2?Promise.reject(new b('As of version 3.0, "getWithoutPrompt" takes only a single set of options')):(t=L(t)||{},Object.assign(t,{prompt:"none",responseMode:"okta_post_message",display:null}),gn(e,t))}function kn(e,t,n){return r=this,o=void 0,i=void 0,a=G().mark((function r(){var o,i,a,s,u,c,l;return G().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o=e.options.clientId){r.next=3;break}throw new b("A clientId must be specified in the OktaAuth constructor to renew tokens");case 3:return i=Object.assign({},t,{clientId:o}),r.next=6,rt(e,i,n);case 6:return a=r.sent,s=yt(e,t),r.next=10,yn(e,i,a,s);case 10:return u=r.sent,c=u.tokens,(l=c.refreshToken)&&!$t(l,n)&&e.tokenManager.updateRefreshToken(l),r.abrupt("return",c);case 15:case"end":return r.stop()}}),r)})),new(i||(i=Promise))((function(e,t){function n(e){try{u(a.next(e))}catch(e){t(e)}}function s(e){try{u(a.throw(e))}catch(e){t(e)}}function u(t){var r;t.done?e(t.value):(r=t.value,r instanceof i?r:new i((function(e){e(r)}))).then(n,s)}u((a=a.apply(r,o||[])).next())}));var r,o,i,a}function bn(){throw new b("Renew must be passed a token with an array of scopes and an accessToken or idToken")}function wn(e,t){return un(e)?t.idToken:sn(e)?t.accessToken:void bn()}function Tn(e,t){return n=this,r=void 0,o=void 0,i=G().mark((function n(){var r,o,i,a,s,u;return G().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(un(t)||sn(t)||bn(),!(r=e.tokenManager.getTokensSync()).refreshToken){n.next=7;break}return n.next=5,kn(e,{scopes:t.scopes},r.refreshToken);case 5:return r=n.sent,n.abrupt("return",wn(t,r));case 7:return o=e.options.pkce?"code":sn(t)?"token":"id_token",i=t.scopes,a=t.authorizeUrl,s=t.userinfoUrl,u=t.issuer,n.abrupt("return",mn(e,{responseType:o,scopes:i,authorizeUrl:a,userinfoUrl:s,issuer:u}).then((function(e){return wn(t,e.tokens)})));case 10:case"end":return n.stop()}}),n)})),new(o||(o=Promise))((function(e,t){function a(e){try{u(i.next(e))}catch(e){t(e)}}function s(e){try{u(i.throw(e))}catch(e){t(e)}}function u(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(a,s)}u((i=i.apply(n,r||[])).next())}));var n,r,o,i}function Sn(e,t){return n=this,r=void 0,o=void 0,i=G().mark((function n(){var r,o,i,a,s,u,c,l,f;return G().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(r=e.tokenManager.getTokensSync()).refreshToken){n.next=3;break}return n.abrupt("return",kn(e,t||{},r.refreshToken));case 3:if(r.accessToken||r.idToken){n.next=5;break}throw new b("renewTokens() was called but there is no existing token");case 5:if(o=r.accessToken||{},i=r.idToken||{},a=o.scopes||i.scopes){n.next=10;break}throw new b("renewTokens: invalid tokens: could not read scopes");case 10:if(s=o.authorizeUrl||i.authorizeUrl){n.next=13;break}throw new b("renewTokens: invalid tokens: could not read authorizeUrl");case 13:return u=o.userinfoUrl||e.options.userinfoUrl,c=i.issuer||e.options.issuer,t=Object.assign({scopes:a,authorizeUrl:s,userinfoUrl:u,issuer:c},t),e.options.pkce?t.responseType="code":(l=At(e),f=l.responseType,t.responseType=f),n.abrupt("return",mn(e,t).then((function(e){return e.tokens})));case 18:case"end":return n.stop()}}),n)})),new(o||(o=Promise))((function(e,t){function a(e){try{u(i.next(e))}catch(e){t(e)}}function s(e){try{u(i.throw(e))}catch(e){t(e)}}function u(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(a,s)}u((i=i.apply(n,r||[])).next())}));var n,r,o,i}function xn(e,t,n){return r=this,o=void 0,i=void 0,a=G().mark((function r(){return G().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t){r.next=4;break}return r.next=3,e.tokenManager.getTokens();case 3:t=r.sent.accessToken;case 4:if(n){r.next=8;break}return r.next=7,e.tokenManager.getTokens();case 7:n=r.sent.idToken;case 8:if(t&&sn(t)){r.next=10;break}return r.abrupt("return",Promise.reject(new b("getUserInfo requires an access token object")));case 10:if(n&&un(n)){r.next=12;break}return r.abrupt("return",Promise.reject(new b("getUserInfo requires an ID token object")));case 12:return r.abrupt("return",Ee(e,{url:t.userinfoUrl,method:"GET",accessToken:t.accessToken}).then((function(e){return e.sub===n.claims.sub?e:Promise.reject(new b("getUserInfo request was rejected due to token mismatch"))})).catch((function(e){var t;if(e.xhr&&(401===e.xhr.status||403===e.xhr.status)&&(e.xhr.headers&&ke(e.xhr.headers.get)&&e.xhr.headers.get("WWW-Authenticate")?t=e.xhr.headers.get("WWW-Authenticate"):ke(e.xhr.getResponseHeader)&&(t=e.xhr.getResponseHeader("WWW-Authenticate")),t)){var n=t.match(/error="(.*?)"/)||[],r=t.match(/error_description="(.*?)"/)||[],o=n[1],i=r[1];o&&i&&(e=new w(o,i))}throw e})));case 13:case"end":return r.stop()}}),r)})),new(i||(i=Promise))((function(e,t){function n(e){try{u(a.next(e))}catch(e){t(e)}}function s(e){try{u(a.throw(e))}catch(e){t(e)}}function u(t){var r;t.done?e(t.value):(r=t.value,r instanceof i?r:new i((function(e){e(r)}))).then(n,s)}u((a=a.apply(r,o||[])).next())}));var r,o,i,a}function On(e,t){if(arguments.length>2)return Promise.reject(new b('As of version 3.0, "getWithPopup" takes only a single set of options'));var n=ct("/",t);return t=L(t)||{},Object.assign(t,{display:"popup",responseMode:"okta_post_message",popupWindow:n}),gn(e,t)}var En=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};function _n(e,t){return En(this,arguments,void 0,G().mark((function n(){var r,o,i,a=arguments;return G().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(a.length>2)){n.next=2;break}return n.abrupt("return",Promise.reject(new b('As of version 3.0, "getWithRedirect" takes only a single set of options')));case 2:return t=L(t)||{},n.next=5,zt(e,t);case 5:r=n.sent,o=Bt(e,r),i=o.urls.authorizeUrl+Xe(r),e.transactionManager.save(o,{oauth:!0}),e.token.getWithRedirect._setLocation(i);case 10:case"end":return n.stop()}}),n)})))}function An(e){var t=e.options.pkce?"query":"fragment";return e.options.responseMode||t}function Rn(e,t){var n,r=(t=ye(t=t||{})?{url:t}:t).url,o=t.responseMode||An(e),i=e.token.parseFromUrl._getLocation();if(!(n="query"===o?r?r.substring(r.indexOf("?")):i.search:r?r.substring(r.indexOf("#")):i.hash))throw new b("Unable to parse a token from the url");return Yt(n)}function Pn(e,t){"query"===(t.responseMode||An(e))?function(e){var t=e.token.parseFromUrl._getHistory(),n=e.token.parseFromUrl._getDocument(),r=e.token.parseFromUrl._getLocation();t&&t.replaceState?t.replaceState(null,n.title,r.pathname+r.hash):r.search=""}(e):function(e){var t=e.token.parseFromUrl._getHistory(),n=e.token.parseFromUrl._getDocument(),r=e.token.parseFromUrl._getLocation();t&&t.replaceState?t.replaceState(null,n.title,r.pathname+r.search):r.hash=""}(e)}function Cn(e,t){return n=this,r=void 0,o=void 0,i=G().mark((function n(){var r,o,i,a;return G().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=ye(t=t||{})?{url:t}:t,r=Rn(e,t),o=r.state,i=e.transactionManager.load({oauth:!0,pkce:e.options.pkce,state:o})){n.next=7;break}return n.abrupt("return",Promise.reject(new b("Unable to retrieve OAuth redirect params from storage")));case 7:return a=i.urls,delete i.urls,t.url||Pn(e,t),n.abrupt("return",yn(e,i,r,a).catch((function(t){throw Rt(t)||e.transactionManager.clear({state:o}),t})).then((function(t){return e.transactionManager.clear({state:o}),t})));case 11:case"end":return n.stop()}}),n)})),new(o||(o=Promise))((function(e,t){function a(e){try{u(i.next(e))}catch(e){t(e)}}function s(e){try{u(i.throw(e))}catch(e){t(e)}}function u(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(a,s)}u((i=i.apply(n,r||[])).next())}));var n,r,o,i}var jn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[];return e.forEach((function(e){"webauthn"===e.key&&t.push({type:"public-key",id:j(e.credentialId)})})),t},In=function(e,t){return{publicKey:{rp:e.rp,user:{id:j(e.user.id),name:e.user.name,displayName:e.user.displayName},challenge:j(e.challenge),pubKeyCredParams:e.pubKeyCredParams,attestation:e.attestation,authenticatorSelection:e.authenticatorSelection,excludeCredentials:jn(t)}}},Mn=function(e,t){return{publicKey:{challenge:j(e.challenge),userVerification:e.userVerification,allowCredentials:jn(t)}}},Un=function(e){var t=e.response;return{id:e.id,clientData:I(t.clientDataJSON),attestation:I(t.attestationObject)}},Dn=function(e){var t=e.response;return{id:e.id,clientData:I(t.clientDataJSON),authenticatorData:I(t.authenticatorData),signatureData:I(t.signature)}};function Nn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}var Ln=function e(t,n){function r(e,r,o){if("undefined"!=typeof document){"number"==typeof(o=Nn({},n,o)).expires&&(o.expires=new Date(Date.now()+864e5*o.expires)),o.expires&&(o.expires=o.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var i="";for(var a in o)o[a]&&(i+="; "+a,!0!==o[a]&&(i+="="+o[a].split(";")[0]));return document.cookie=e+"="+t.write(r,e)+i}}return Object.create({set:r,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var n=document.cookie?document.cookie.split("; "):[],r={},o=0;o<n.length;o++){var i=n[o].split("="),a=i.slice(1).join("=");try{var s=decodeURIComponent(i[0]);if(r[s]=t.read(a,s),e===s)break}catch(e){}}return e?r[e]:r}},remove:function(e,t){r(e,"",Nn({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,Nn({},this.attributes,t))},withConverter:function(t){return e(Nn({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"}),Fn=Ln;function Bn(){return"undefined"!=typeof window?window.console:"undefined"!=typeof console?console:void 0}function Hn(){var e=Bn();return e&&e.log?e:{log:function(){},warn:function(){},group:function(){},groupEnd:function(){}}}function Kn(e){Hn().warn("[okta-auth-sdk] WARN: "+e)}function qn(e){Hn().warn("[okta-auth-sdk] DEPRECATION: "+e)}function Vn(e,t){return function(){return qn(e),t.apply(null,arguments)}}var Wn={getHttpCache:function(){return null},getPKCEStorage:function(){return null},browserHasLocalStorage:function(){try{var e=Wn.getLocalStorage();return Wn.testStorage(e)}catch(e){return!1}},browserHasSessionStorage:function(){try{var e=Wn.getSessionStorage();return Wn.testStorage(e)}catch(e){return!1}},testStorageType:function(e){var t=!1;switch(e){case"sessionStorage":t=Wn.browserHasSessionStorage();break;case"localStorage":t=Wn.browserHasLocalStorage();break;case"cookie":case"memory":t=!0;break;default:t=!1}return t},getStorageByType:function(e,t){var n;switch(e){case"sessionStorage":n=Wn.getSessionStorage();break;case"localStorage":n=Wn.getLocalStorage();break;case"cookie":n=Wn.getCookieStorage(t);break;case"memory":n=Wn.getInMemoryStorage();break;default:throw new b("Unrecognized storage option: ".concat(e))}return n},findStorageType:function(e){var t,n;return t=(e=e.slice()).shift(),(n=e.length?e[0]:null)?Wn.testStorageType(t)?t:(Kn("This browser doesn't support ".concat(t,". Switching to ").concat(n,".")),Wn.findStorageType(e)):t},getLocalStorage:function(){return localStorage},getSessionStorage:function(){return sessionStorage},getCookieStorage:function(e){var t=e.secure,n=e.sameSite,r=e.sessionCookie;if(void 0===t||void 0===n)throw new b('getCookieStorage: "secure" and "sameSite" options must be provided');var o={getItem:Wn.storage.get,setItem:function(e,o){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"2200-01-01T00:00:00.000Z";i=r?null:i,Wn.storage.set(e,o,i,{secure:t,sameSite:n})},removeItem:function(e){Wn.storage.delete(e)}};return e.useSeparateCookies?{getItem:function(e){var t=o.getItem(),n={};return Object.keys(t).forEach((function(r){0===r.indexOf(e)&&(n[r.replace("".concat(e,"_"),"")]=JSON.parse(t[r]))})),JSON.stringify(n)},setItem:function(e,t){var n=JSON.parse(this.getItem(e));t=JSON.parse(t),Object.keys(t).forEach((function(r){var i=e+"_"+r,a=JSON.stringify(t[r]);o.setItem(i,a),delete n[r]})),Object.keys(n).forEach((function(t){o.removeItem(e+"_"+t)}))},removeItem:function(e){var t=JSON.parse(this.getItem(e));Object.keys(t).forEach((function(t){o.removeItem(e+"_"+t)}))}}:o},inMemoryStore:{},getInMemoryStorage:function(){var e=this;return{getItem:function(t){return e.inMemoryStore[t]},setItem:function(t,n){e.inMemoryStore[t]=n}}},testStorage:function(e){var t="okta-test-storage";try{return e.setItem(t,t),e.removeItem(t),!0}catch(e){return!1}},storage:{set:function(e,t,n,r){var o=r.sameSite,i=r.secure;if(void 0===i||void 0===o)throw new b('storage.set: "secure" and "sameSite" options must be provided');var a={path:r.path||"/",secure:i,sameSite:o};return Date.parse(n)&&(a.expires=new Date(n)),Fn.set(e,t,a),Wn.storage.get(e)},get:function(e){return arguments.length?Fn.get(e):Fn.get()},delete:function(e){return Fn.remove(e,{path:"/"})}}},Gn=Wn,Jn=function(){function e(t){s(this,e),this.localOffset=parseInt(t||0)}return V(e,[{key:"now",value:function(){return(Date.now()+this.localOffset)/1e3}}],[{key:"create",value:function(){return new e(0)}}]),e}(),zn=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},$n={autoRenew:!0,autoRemove:!0,syncStorage:!0,clearPendingRemoveTokens:!0,storage:void 0,expireEarlySeconds:30,storageKey:ee,_storageEventDelay:0},Qn="expired",Yn="renewed",Xn="added",Zn="removed",er="error",tr=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(s(this,e),this.sdk=t,this.emitter=t.emitter,!this.emitter)throw new b("Emitter should be initialized before TokenManager");n=Object.assign({},$n,N(n)),kt()&&(n._storageEventDelay=n._storageEventDelay||1e3),_t()||(n.expireEarlySeconds=$n.expireEarlySeconds),this.options=n;var r=N({storageKey:n.storageKey,secure:n.secure});"object"===l(n.storage)?r.storageProvider=n.storage:n.storage&&(r.storageType=n.storage),this.storage=t.storageManager.getTokenStorage(Object.assign(Object.assign({},r),{useSeparateCookies:!0})),this.clock=Jn.create(),this.state={expireTimeouts:{},renewPromise:null},this.on=this.emitter.on.bind(this.emitter),this.off=this.emitter.off.bind(this.emitter)}return V(e,[{key:"start",value:function(){this.options.clearPendingRemoveTokens&&this.clearPendingRemoveTokens(),this.setExpireEventTimeoutAll()}},{key:"stop",value:function(){this.clearExpireEventTimeoutAll()}},{key:"getOptions",value:function(){return L(this.options)}},{key:"getExpireTime",value:function(e){var t=this.options.expireEarlySeconds||0;return e.expiresAt-t}},{key:"hasExpired",value:function(e){return this.getExpireTime(e)<=this.clock.now()}},{key:"emitExpired",value:function(e,t){this.emitter.emit(Qn,e,t)}},{key:"emitRenewed",value:function(e,t,n){this.emitter.emit(Yn,e,t,n)}},{key:"emitAdded",value:function(e,t){this.emitter.emit(Xn,e,t)}},{key:"emitRemoved",value:function(e,t){this.emitter.emit(Zn,e,t)}},{key:"emitError",value:function(e){this.emitter.emit(er,e)}},{key:"emitEventsForCrossTabsStorageUpdate",value:function(e,t){var n=this,r=this.getTokensFromStorageValue(t),o=this.getTokensFromStorageValue(e);Object.keys(o).forEach((function(e){var t=r[e],i=o[e];JSON.stringify(t)!==JSON.stringify(i)&&n.emitAdded(e,i)})),Object.keys(r).forEach((function(e){var t=r[e];o[e]||n.emitRemoved(e,t)}))}},{key:"clearExpireEventTimeout",value:function(e){clearTimeout(this.state.expireTimeouts[e]),delete this.state.expireTimeouts[e],this.state.renewPromise=null}},{key:"clearExpireEventTimeoutAll",value:function(){var e=this.state.expireTimeouts;for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&this.clearExpireEventTimeout(t)}},{key:"setExpireEventTimeout",value:function(e,t){var n=this;if(!cn(t)){var r=this.getExpireTime(t),o=1e3*Math.max(r-this.clock.now(),0);this.clearExpireEventTimeout(e);var i=setTimeout((function(){n.emitExpired(e,t)}),o);this.state.expireTimeouts[e]=i}}},{key:"setExpireEventTimeoutAll",value:function(){var e=this.storage.getStorage();for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var n=e[t];this.setExpireEventTimeout(t,n)}}},{key:"resetExpireEventTimeoutAll",value:function(){this.clearExpireEventTimeoutAll(),this.setExpireEventTimeoutAll()}},{key:"add",value:function(e,t){var n=this.storage.getStorage();ln(t),n[e]=t,this.storage.setStorage(n),this.emitAdded(e,t),this.setExpireEventTimeout(e,t)}},{key:"getSync",value:function(e){return this.storage.getStorage()[e]}},{key:"get",value:function(e){return zn(this,void 0,void 0,G().mark((function t(){return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.getSync(e));case 1:case"end":return t.stop()}}),t,this)})))}},{key:"getTokensSync",value:function(){var e={},t=this.storage.getStorage();return Object.keys(t).forEach((function(n){var r=t[n];sn(r)?e.accessToken=r:un(r)?e.idToken=r:cn(r)&&(e.refreshToken=r)})),e}},{key:"getTokens",value:function(){return zn(this,void 0,void 0,G().mark((function e(){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getTokensSync());case 1:case"end":return e.stop()}}),e,this)})))}},{key:"getStorageKeyByType",value:function(e){var t=this.storage.getStorage();return Object.keys(t).filter((function(n){var r=t[n];return sn(r)&&"accessToken"===e||un(r)&&"idToken"===e||cn(r)&&"refreshToken"===e}))[0]}},{key:"getTokenType",value:function(e){if(sn(e))return"accessToken";if(un(e))return"idToken";if(cn(e))return"refreshToken";throw new b("Unknown token type")}},{key:"setTokens",value:function(e,t,n,r){var o=this,i=function(e,i){var a=o.getTokenType(i);"accessToken"===a?t&&t(e,i):"idToken"===a?n&&n(e,i):"refreshToken"===a&&r&&r(e,i)},a=function(e,t){o.emitAdded(e,t),o.setExpireEventTimeout(e,t),i(e,t)},s=function(e,t){o.clearExpireEventTimeout(e),o.emitRemoved(e,t),i(e,t)},u=["idToken","accessToken","refreshToken"],c=this.getTokensSync();u.forEach((function(t){var n=e[t];n&&ln(n,t)}));var l=u.reduce((function(t,n){var r=e[n];return r&&(t[o.getStorageKeyByType(n)||n]=r),t}),{});this.storage.setStorage(l),u.forEach((function(t){var n,r,u,l=e[t],f=c[t],h=o.getStorageKeyByType(t)||t;l&&f?(s(h,f),a(h,l),n=h,r=l,u=f,o.emitRenewed(n,r,u),o.clearExpireEventTimeout(n),o.setExpireEventTimeout(n,r),i(n,r)):l?a(h,l):f&&s(h,f)}))}},{key:"remove",value:function(e){this.clearExpireEventTimeout(e);var t=this.storage.getStorage(),n=t[e];delete t[e],this.storage.setStorage(t),this.emitRemoved(e,n)}},{key:"renewToken",value:function(e){var t;return zn(this,void 0,void 0,G().mark((function n(){return G().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",null===(t=this.sdk.token)||void 0===t?void 0:t.renew(e));case 1:case"end":return n.stop()}}),n,this)})))}},{key:"validateToken",value:function(e){return ln(e)}},{key:"renew",value:function(e){var t=this;if(this.state.renewPromise)return this.state.renewPromise;try{var n=this.getSync(e);if(!n)throw new b("The tokenManager has no token for the key: "+e)}catch(e){return Promise.reject(e)}return this.clearExpireEventTimeout(e),this.state.renewPromise=this.sdk.token.renewTokens().then((function(e){return t.setTokens(e),e[t.getTokenType(n)]})).catch((function(n){throw t.remove(e),n.tokenKey=e,t.emitError(n),n})).finally((function(){t.state.renewPromise=null})),this.state.renewPromise}},{key:"clear",value:function(){this.clearExpireEventTimeoutAll(),this.storage.clearStorage()}},{key:"clearPendingRemoveTokens",value:function(){var e=this,t=this.getTokensSync();Object.keys(t).forEach((function(n){t[n].pendingRemove&&e.remove(n)}))}},{key:"getTokensFromStorageValue",value:function(e){var t;try{t=JSON.parse(e)||{}}catch(e){t={}}return t}},{key:"updateRefreshToken",value:function(e){var t=this.getStorageKeyByType("refreshToken")||ce,n=this.storage.getStorage();ln(e),n[t]=e,this.storage.setStorage(n)}},{key:"addPendingRemoveFlags",value:function(){var e=this.getTokensSync();Object.keys(e).forEach((function(t){e[t].pendingRemove=!0})),this.setTokens(e)}}]),e}();function nr(e){return function(e){if(Array.isArray(e))return Ze(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||et(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}Promise.resolve(!1);var rr=Promise.resolve(!0),or=Promise.resolve();function ir(e,t){return e||(e=0),new Promise((function(n){return setTimeout((function(){return n(t)}),e)}))}function ar(){return Math.random().toString(36).substring(2)}var sr=0,ur=0;function cr(){var e=(new Date).getTime();return e===sr?1e3*e+ ++ur:(sr=e,ur=0,1e3*e)}var lr="[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0),fr={create:function(e){var t={messagesCallback:null,bc:new BroadcastChannel(e),subFns:[]};return t.bc.onmessage=function(e){t.messagesCallback&&t.messagesCallback(e.data)},t},close:function(e){e.bc.close(),e.subFns=[]},onMessage:function(e,t){e.messagesCallback=t},postMessage:function(e,t){try{return e.bc.postMessage(t,!1),or}catch(e){return Promise.reject(e)}},canBeUsed:function(){if(lr&&"undefined"==typeof window)return!1;if("function"==typeof BroadcastChannel){if(BroadcastChannel._pubkey)throw new Error("BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill");return!0}return!1},type:"native",averageResponseTime:function(){return 150},microSeconds:cr},hr=function(){function e(e){this.ttl=e,this.set=new Set,this.timeMap=new Map}return e.prototype.has=function(e){return this.set.has(e)},e.prototype.add=function(e){var t=this;this.timeMap.set(e,pr()),this.set.add(e),setTimeout((function(){!function(e){for(var t=pr()-e.ttl,n=e.set[Symbol.iterator]();;){var r=n.next().value;if(!r)return;if(!(e.timeMap.get(r)<t))return;e.timeMap.delete(r),e.set.delete(r)}}(t)}),0)},e.prototype.clear=function(){this.set.clear(),this.timeMap.clear()},e}();function pr(){return(new Date).getTime()}function dr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=JSON.parse(JSON.stringify(e));return void 0===t.webWorkerSupport&&(t.webWorkerSupport=!0),t.idb||(t.idb={}),t.idb.ttl||(t.idb.ttl=45e3),t.idb.fallbackInterval||(t.idb.fallbackInterval=150),e.idb&&"function"==typeof e.idb.onclose&&(t.idb.onclose=e.idb.onclose),t.localstorage||(t.localstorage={}),t.localstorage.removeTimeout||(t.localstorage.removeTimeout=6e4),e.methods&&(t.methods=e.methods),t.node||(t.node={}),t.node.ttl||(t.node.ttl=12e4),t.node.maxParallelWrites||(t.node.maxParallelWrites=2048),void 0===t.node.useFastPath&&(t.node.useFastPath=!0),t}var vr="messages";function yr(){if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof window){if(void 0!==window.mozIndexedDB)return window.mozIndexedDB;if(void 0!==window.webkitIndexedDB)return window.webkitIndexedDB;if(void 0!==window.msIndexedDB)return window.msIndexedDB}return!1}function gr(e){e.closed||mr(e).then((function(){return ir(e.options.idb.fallbackInterval)})).then((function(){return gr(e)}))}function mr(e){return e.closed?or:e.messagesCallback?(t=e.db,n=e.lastCursorId,r=t.transaction(vr).objectStore(vr),o=[],new Promise((function(e){(function(){try{var e=IDBKeyRange.bound(n+1,1/0);return r.openCursor(e)}catch(e){return r.openCursor()}}()).onsuccess=function(t){var r=t.target.result;r?r.value.id<n+1?r.continue(n+1):(o.push(r.value),r.continue()):e(o)}}))).then((function(t){var n=t.filter((function(e){return!!e})).map((function(t){return t.id>e.lastCursorId&&(e.lastCursorId=t.id),t})).filter((function(t){return function(e,t){return!(e.uuid===t.uuid||t.eMIs.has(e.id)||e.data.time<t.messagesCallbackTime)}(t,e)})).sort((function(e,t){return e.time-t.time}));return n.forEach((function(t){e.messagesCallback&&(e.eMIs.add(t.id),e.messagesCallback(t.data))})),or})):or;var t,n,r,o}var kr={create:function(e,t){return t=dr(t),function(e){var t="pubkey.broadcast-channel-0-"+e,n=yr().open(t,1);return n.onupgradeneeded=function(e){e.target.result.createObjectStore(vr,{keyPath:"id",autoIncrement:!0})},new Promise((function(e,t){n.onerror=function(e){return t(e)},n.onsuccess=function(){e(n.result)}}))}(e).then((function(n){var r={closed:!1,lastCursorId:0,channelName:e,options:t,uuid:ar(),eMIs:new hr(2*t.idb.ttl),writeBlockPromise:or,messagesCallback:null,readQueuePromises:[],db:n};return n.onclose=function(){r.closed=!0,t.idb.onclose&&t.idb.onclose()},gr(r),r}))},close:function(e){e.closed=!0,e.db.close()},onMessage:function(e,t,n){e.messagesCallbackTime=n,e.messagesCallback=t,mr(e)},postMessage:function(e,t){return e.writeBlockPromise=e.writeBlockPromise.then((function(){return function(e,t,n){var r={uuid:t,time:(new Date).getTime(),data:n},o=e.transaction([vr],"readwrite");return new Promise((function(e,t){o.oncomplete=function(){return e()},o.onerror=function(e){return t(e)},o.objectStore(vr).add(r)}))}(e.db,e.uuid,t)})).then((function(){var t,n;0===(0,10,Math.floor(11*Math.random()+0))&&(t=e.db,n=e.options.idb.ttl,function(e,t){var n=(new Date).getTime()-t,r=e.transaction(vr).objectStore(vr),o=[];return new Promise((function(e){r.openCursor().onsuccess=function(t){var r=t.target.result;if(r){var i=r.value;if(!(i.time<n))return void e(o);o.push(i),r.continue()}else e(o)}}))}(t,n).then((function(e){return Promise.all(e.map((function(e){return function(e,t){var n=e.transaction([vr],"readwrite").objectStore(vr).delete(t);return new Promise((function(e){n.onsuccess=function(){return e()}}))}(t,e.id)})))})))})),e.writeBlockPromise},canBeUsed:function(){return!lr&&!!yr()},type:"idb",averageResponseTime:function(e){return 2*e.idb.fallbackInterval},microSeconds:cr};function br(){var e;if("undefined"==typeof window)return null;try{e=window.localStorage,e=window["ie8-eventlistener/storage"]||window.localStorage}catch(e){}return e}function wr(e){return"pubkey.broadcastChannel-"+e}function Tr(){if(lr)return!1;var e=br();if(!e)return!1;try{var t="__broadcastchannel_check";e.setItem(t,"works"),e.removeItem(t)}catch(e){return!1}return!0}var Sr={create:function(e,t){if(t=dr(t),!Tr())throw new Error("BroadcastChannel: localstorage cannot be used");var n=ar(),r=new hr(t.localstorage.removeTimeout),o={channelName:e,uuid:n,eMIs:r};return o.listener=function(e,t){var i=wr(e),a=function(e){var t;e.key===i&&(t=JSON.parse(e.newValue),o.messagesCallback&&t.uuid!==n&&t.token&&!r.has(t.token)&&(t.data.time&&t.data.time<o.messagesCallbackTime||(r.add(t.token),o.messagesCallback(t.data))))};return window.addEventListener("storage",a),a}(e),o},close:function(e){var t;t=e.listener,window.removeEventListener("storage",t)},onMessage:function(e,t,n){e.messagesCallbackTime=n,e.messagesCallback=t},postMessage:function(e,t){return new Promise((function(n){ir().then((function(){var r=wr(e.channelName),o={token:ar(),time:(new Date).getTime(),data:t,uuid:e.uuid},i=JSON.stringify(o);br().setItem(r,i);var a=document.createEvent("Event");a.initEvent("storage",!0,!0),a.key=r,a.newValue=i,window.dispatchEvent(a),n()}))}))},canBeUsed:Tr,type:"localstorage",averageResponseTime:function(){var e=navigator.userAgent.toLowerCase();return e.includes("safari")&&!e.includes("chrome")?240:120},microSeconds:cr},xr=cr,Or=new Set,Er={create:function(e){var t={name:e,messagesCallback:null};return Or.add(t),t},close:function(e){Or.delete(e)},onMessage:function(e,t){e.messagesCallback=t},postMessage:function(e,t){return new Promise((function(n){return setTimeout((function(){Array.from(Or).filter((function(t){return t.name===e.name})).filter((function(t){return t!==e})).filter((function(e){return!!e.messagesCallback})).forEach((function(e){return e.messagesCallback(t)})),n()}),5)}))},canBeUsed:function(){return!0},type:"simulate",averageResponseTime:function(){return 5},microSeconds:xr},_r=[fr,kr,Sr],Ar=new Set,Rr=0,Pr=function(e,t){var n,r,o;this.id=Rr++,Ar.add(this),this.name=e,this.options=dr(t),this.method=function(e){var t=[].concat(e.methods,_r).filter(Boolean);if(e.type){if("simulate"===e.type)return Er;var n=t.find((function(t){return t.type===e.type}));if(n)return n;throw new Error("method-type "+e.type+" not found")}e.webWorkerSupport||lr||(t=t.filter((function(e){return"idb"!==e.type})));var r=t.find((function(e){return e.canBeUsed()}));if(r)return r;throw new Error("No useable method found in "+JSON.stringify(_r.map((function(e){return e.type}))))}(this.options),this._iL=!1,this._onML=null,this._addEL={message:[],internal:[]},this._uMP=new Set,this._befC=[],this._prepP=null,(o=r=(n=this).method.create(n.name,n.options))&&"function"==typeof o.then?(n._prepP=r,r.then((function(e){n._state=e}))):n._state=r};function Cr(e,t,n){var r={time:e.method.microSeconds(),type:t,data:n};return(e._prepP?e._prepP:or).then((function(){var t=e.method.postMessage(e._state,r);return e._uMP.add(t),t.catch().then((function(){return e._uMP.delete(t)})),t}))}function jr(e){return e._addEL.message.length>0||e._addEL.internal.length>0}function Ir(e,t,n){e._addEL[t].push(n),function(e){if(!e._iL&&jr(e)){var t=function(t){e._addEL[t.type].forEach((function(e){var n=e.time-1e5;t.time>=n&&e.fn(t.data)}))},n=e.method.microSeconds();e._prepP?e._prepP.then((function(){e._iL=!0,e.method.onMessage(e._state,t,n)})):(e._iL=!0,e.method.onMessage(e._state,t,n))}}(e)}function Mr(e,t,n){e._addEL[t]=e._addEL[t].filter((function(e){return e!==n})),function(e){if(e._iL&&!jr(e)){e._iL=!1;var t=e.method.microSeconds();e.method.onMessage(e._state,null,t)}}(e)}Pr._pubkey=!0,Pr.prototype={postMessage:function(e){if(this.closed)throw new Error("BroadcastChannel.postMessage(): Cannot post message after channel has closed "+JSON.stringify(e));return Cr(this,"message",e)},postInternal:function(e){return Cr(this,"internal",e)},set onmessage(e){var t={time:this.method.microSeconds(),fn:e};Mr(this,"message",this._onML),e&&"function"==typeof e?(this._onML=t,Ir(this,"message",t)):this._onML=null},addEventListener:function(e,t){Ir(this,e,{time:this.method.microSeconds(),fn:t})},removeEventListener:function(e,t){Mr(this,e,this._addEL[e].find((function(e){return e.fn===t})))},close:function(){var e=this;if(!this.closed){Ar.delete(this),this.closed=!0;var t=this._prepP?this._prepP:or;return this._onML=null,this._addEL.message=[],t.then((function(){return Promise.all(Array.from(e._uMP))})).then((function(){return Promise.all(e._befC.map((function(e){return e()})))})).then((function(){return e.method.close(e._state)}))}},get type(){return this.method.type},get isClosed(){return this.closed}};var Ur=n(643),Dr=n.n(Ur),Nr={add:function(e){if("function"==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope);else{if("function"!=typeof window.addEventListener)return;window.addEventListener("beforeunload",(function(){e()}),!0),window.addEventListener("unload",(function(){e()}),!0)}}},Lr=n(199),Fr=n.n(Lr),Br=Dr()?Fr():Nr,Hr=new Set,Kr=!1;function qr(){var e=[];return Hr.forEach((function(t){e.push(t()),Hr.delete(t)})),Promise.all(e)}var Vr=function(e,t){var n=this;this.broadcastChannel=e,this._options=t,this.isLeader=!1,this.hasLeader=!1,this.isDead=!1,this.token=ar(),this._aplQ=or,this._aplQC=0,this._unl=[],this._lstns=[],this._dpL=function(){},this._dpLC=!1;var r=function(e){"leader"===e.context&&("death"===e.action&&(n.hasLeader=!1),"tell"===e.action&&(n.hasLeader=!0))};this.broadcastChannel.addEventListener("internal",r),this._lstns.push(r)};function Wr(e,t){var n={context:"leader",action:t,token:e.token};return e.broadcastChannel.postInternal(n)}Vr.prototype={applyOnce:function(e){var t=this;if(this.isLeader)return ir(0,!0);if(this.isDead)return ir(0,!1);if(this._aplQC>1)return this._aplQ;var n=function(){if(t.isLeader)return rr;var n,r=!1,o=new Promise((function(e){n=function(){r=!0,e()}})),i=[],a=function(e){"leader"===e.context&&e.token!=t.token&&(i.push(e),"apply"===e.action&&e.token>t.token&&n(),"tell"===e.action&&(n(),t.hasLeader=!0))};t.broadcastChannel.addEventListener("internal",a);var s=e?4*t._options.responseTime:t._options.responseTime;return Wr(t,"apply").then((function(){return Promise.race([ir(s),o.then((function(){return Promise.reject(new Error)}))])})).then((function(){return Wr(t,"apply")})).then((function(){return Promise.race([ir(s),o.then((function(){return Promise.reject(new Error)}))])})).catch((function(){})).then((function(){return t.broadcastChannel.removeEventListener("internal",a),!r&&function(e){e.isLeader=!0,e.hasLeader=!0;var t=function(e){if(Kr||(Kr=!0,Br.add(qr)),"function"!=typeof e)throw new Error("Listener is no function");return Hr.add(e),{remove:function(){return Hr.delete(e)},run:function(){return Hr.delete(e),e()}}}((function(){return e.die()}));e._unl.push(t);var n=function(t){"leader"===t.context&&"apply"===t.action&&Wr(e,"tell"),"leader"!==t.context||"tell"!==t.action||e._dpLC||(e._dpLC=!0,e._dpL(),Wr(e,"tell"))};return e.broadcastChannel.addEventListener("internal",n),e._lstns.push(n),Wr(e,"tell")}(t).then((function(){return!0}))}))};return this._aplQC=this._aplQC+1,this._aplQ=this._aplQ.then((function(){return n()})).then((function(){t._aplQC=t._aplQC-1})),this._aplQ.then((function(){return t.isLeader}))},awaitLeadership:function(){return this._aLP||(this._aLP=(e=this).isLeader?or:new Promise((function(t){var n=!1;function r(){n||(n=!0,e.broadcastChannel.removeEventListener("internal",o),t(!0))}e.applyOnce().then((function(){e.isLeader&&r()})),function t(){return ir(e._options.fallbackInterval).then((function(){if(!e.isDead&&!n)return e.isLeader?void r():e.applyOnce(!0).then((function(){e.isLeader?r():t()}))}))}();var o=function(t){"leader"===t.context&&"death"===t.action&&(e.hasLeader=!1,e.applyOnce().then((function(){e.isLeader&&r()})))};e.broadcastChannel.addEventListener("internal",o),e._lstns.push(o)}))),this._aLP;var e},set onduplicate(e){this._dpL=e},die:function(){var e=this;return this._lstns.forEach((function(t){return e.broadcastChannel.removeEventListener("internal",t)})),this._lstns=[],this._unl.forEach((function(e){return e.remove()})),this._unl=[],this.isLeader&&(this.hasLeader=!1,this.isLeader=!1),this.isDead=!0,Wr(this,"death")}};var Gr=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s(this,e),this.started=!1,this.tokenManager=t,this.options=n,this.renewTimeQueue=[],this.onTokenExpiredHandler=this.onTokenExpiredHandler.bind(this)}return V(e,[{key:"shouldThrottleRenew",value:function(){var e=!1;if(this.renewTimeQueue.push(Date.now()),this.renewTimeQueue.length>=10){var t=this.renewTimeQueue.shift();e=this.renewTimeQueue[this.renewTimeQueue.length-1]-t<3e4}return e}},{key:"requiresLeadership",value:function(){return!!this.options.syncStorage&&mt()}},{key:"onTokenExpiredHandler",value:function(e){if(this.options.autoRenew)if(this.shouldThrottleRenew()){var t=new b("Too many token renew requests");this.tokenManager.emitError(t)}else this.tokenManager.renew(e).catch((function(){}));else this.options.autoRemove&&this.tokenManager.remove(e)}},{key:"canStart",value:function(){return!!this.options.autoRenew||!!this.options.autoRemove}},{key:"start",value:function(){this.canStart()&&(this.stop(),this.tokenManager.on(Qn,this.onTokenExpiredHandler),this.started=!0)}},{key:"stop",value:function(){this.started&&(this.tokenManager.off(Qn,this.onTokenExpiredHandler),this.renewTimeQueue=[],this.started=!1)}},{key:"isStarted",value:function(){return this.started}}]),e}(),Jr=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s(this,e),this.started=!1,this.tokenManager=t,this.options=n,this.storageListener=this.storageListener.bind(this)}return V(e,[{key:"storageListener",value:function(e){var t=this,n=e.key,r=e.newValue,o=e.oldValue,i=this.tokenManager.getOptions();(!n||n===i.storageKey&&r!==o)&&(this.syncTimeout=setTimeout((function(){return t.tokenManager.resetExpireEventTimeoutAll(),void t.tokenManager.emitEventsForCrossTabsStorageUpdate(r,o)}),i._storageEventDelay))}},{key:"requiresLeadership",value:function(){return!1}},{key:"isStarted",value:function(){return this.started}},{key:"canStart",value:function(){return!!this.options.syncStorage&&mt()}},{key:"start",value:function(){this.canStart()&&(this.stop(),window.addEventListener("storage",this.storageListener),this.started=!0)}},{key:"stop",value:function(){this.started&&(window.removeEventListener("storage",this.storageListener),clearTimeout(this.syncTimeout),this.started=!1)}}]),e}();function zr(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return $r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$r(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function $r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Qr=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s(this,e),this.sdk=t;var o=t.tokenManager.getOptions(),i=o.autoRenew,a=o.autoRemove,u=o.syncStorage;this.options=Object.assign({},e.defaultOptions,{autoRenew:i,autoRemove:a,syncStorage:u},r),this.started=!1,this.services=new Map,this.onLeaderDuplicate=this.onLeaderDuplicate.bind(this),this.onLeader=this.onLeader.bind(this),e.knownServices.forEach((function(e){var t=n.createService(e);t&&n.services.set(e,t)}))}return V(e,[{key:"onLeader",value:function(){this.started&&this.startServices()}},{key:"onLeaderDuplicate",value:function(){}},{key:"isLeader",value:function(){var e;return!!(null===(e=this.elector)||void 0===e?void 0:e.isLeader)}},{key:"hasLeader",value:function(){var e;return null===(e=this.elector)||void 0===e?void 0:e.hasLeader}},{key:"isLeaderRequired",value:function(){return nr(this.services.values()).some((function(e){return e.requiresLeadership()}))}},{key:"start",value:function(){this.started&&this.stop(),this.isLeaderRequired()&&this.startElector(),this.startServices(),this.started=!0}},{key:"stop",value:function(){this.stopElector(),this.stopServices(),this.started=!1}},{key:"getService",value:function(e){return this.services.get(e)}},{key:"startServices",value:function(){var e,t=zr(this.services.values());try{for(t.s();!(e=t.n()).done;){var n=e.value;n.canStart()&&!n.isStarted()&&(!n.requiresLeadership()||this.isLeader())&&n.start()}}catch(e){t.e(e)}finally{t.f()}}},{key:"stopServices",value:function(){var e,t=zr(this.services.values());try{for(t.s();!(e=t.n()).done;)e.value.stop()}catch(e){t.e(e)}finally{t.f()}this.services=new Map}},{key:"startElector",value:function(){if(this.stopElector(),e.canUseLeaderElection()){if(!this.channel){var t=this.options.broadcastChannelName;this.channel=new Pr(t)}this.elector||(this.elector=function(e,t){if(e._leaderElector)throw new Error("BroadcastChannel already has a leader-elector");t=function(e,t){return e||(e={}),(e=JSON.parse(JSON.stringify(e))).fallbackInterval||(e.fallbackInterval=3e3),e.responseTime||(e.responseTime=t.method.averageResponseTime(t.options)),e}(t,e);var n=new Vr(e,t);return e._befC.push((function(){return n.die()})),e._leaderElector=n,n}(this.channel),this.elector.onduplicate=this.onLeaderDuplicate,this.elector.awaitLeadership().then(this.onLeader))}}},{key:"stopElector",value:function(){var e;this.elector&&(null===(e=this.elector)||void 0===e||e.die(),this.elector=void 0)}},{key:"createService",value:function(e){var t,n=this.sdk.tokenManager;switch(e){case"autoRenew":t=new Gr(n,Object.assign({},this.options));break;case"syncStorage":t=new Jr(n,Object.assign({},this.options));break;default:throw new Error("Unknown service ".concat(e))}return t}}],[{key:"canUseLeaderElection",value:function(){return mt()}}]),e}();Qr.knownServices=["autoRenew","syncStorage"],Qr.defaultOptions={autoRenew:!0,autoRemove:!0,syncStorage:!0};var Yr=function(){function e(){s(this,e),this.queue=[],this.running=!1}return V(e,[{key:"push",value:function(e,t){for(var n=this,r=arguments.length,o=new Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];return new Promise((function(r,i){n.queue.length>0&&Kn("Async method is being called but another async method is already running. The new method will be delayed until the previous method completes."),n.queue.push({method:e,thisObject:t,args:o,resolve:r,reject:i}),n.run()}))}},{key:"run",value:function(){var e=this;if(!this.running&&0!==this.queue.length){this.running=!0;var t=this.queue.shift(),n=t.method.apply(t.thisObject,t.args);be(n)?n.then(t.resolve,t.reject).finally((function(){e.running=!1,e.run()})):(t.resolve(n),this.running=!1,this.run())}}}]),e}(),Xr=Yr;function Zr(e,t){return t=t||{},wt()?new Promise((function(i,a){(r=document.createElement("iframe")).style.display="none",o=function(t){if(t&&t.data&&t.origin===e.getIssuerOrigin()){try{var n=JSON.parse(t.data)}catch(e){return}if(n)return"FingerprintAvailable"===n.type?i(n.fingerprint):void("FingerprintServiceReady"===n.type&&t.source.postMessage(JSON.stringify({type:"GetFingerprint"}),t.origin))}},at(window,"message",o),r.src=e.getIssuerOrigin()+"/auth/services/devicefingerprint",document.body.appendChild(r),n=setTimeout((function(){a(new b("Fingerprinting timed out"))}),(null==t?void 0:t.timeout)||15e3)})).finally((function(){clearTimeout(n),st(window,"message",o),document.body.contains(r)&&r.parentElement.removeChild(r)})):Promise.reject(new b("Fingerprinting is not supported on this device"));var n,r,o}var eo=n(615),to=n.n(eo),no=null,ro={updateAuthStatePromise:null,canceledTimes:0},oo="authStateChange",io=function(){function e(t){var n=this;if(s(this,e),!t.emitter)throw new b("Emitter should be initialized before AuthStateManager");this._sdk=t,this._pending=Object.assign({},ro),this._authState=no,this._logOptions={},this._prevAuthState=null,t.tokenManager.on(Xn,(function(e,t){n._setLogOptions({event:Xn,key:e,token:t}),n.updateAuthState()})),t.tokenManager.on(Zn,(function(e,t){n._setLogOptions({event:Zn,key:e,token:t}),n.updateAuthState()}))}return V(e,[{key:"_setLogOptions",value:function(e){this._logOptions=e}},{key:"getAuthState",value:function(){return this._authState}},{key:"getPreviousAuthState",value:function(){return this._prevAuthState}},{key:"updateAuthState",value:function(){return e=this,t=void 0,n=void 0,r=G().mark((function e(){var t,n,r,o,i,a,s,u=this;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this._sdk.options,n=t.transformAuthState,r=t.devMode,o=function(e){var t=u._logOptions,n=t.event,r=t.key,o=t.token;Hn().group("OKTA-AUTH-JS:updateAuthState: Event:".concat(n," Status:").concat(e)),Hn().log(r,o),Hn().log("Current authState",u._authState),Hn().groupEnd(),u._logOptions={}},i=function(e){var t,n;n=e,(t=u._authState)&&t.isAuthenticated===n.isAuthenticated&&JSON.stringify(t.idToken)===JSON.stringify(n.idToken)&&JSON.stringify(t.accessToken)===JSON.stringify(n.accessToken)&&t.error===n.error?r&&o("unchanged"):(u._prevAuthState=u._authState,u._authState=e,u._sdk.emitter.emit(oo,Object.assign({},e)),r&&o("emitted"))},a=function e(t){return u._pending.updateAuthStatePromise.then((function(){var n=u._pending.updateAuthStatePromise;return n&&n!==t?e(n):u.getAuthState()}))},!this._pending.updateAuthStatePromise){e.next=11;break}if(!(this._pending.canceledTimes>=10)){e.next=10;break}return r&&o("terminated"),e.abrupt("return",a(this._pending.updateAuthStatePromise));case 10:this._pending.updateAuthStatePromise.cancel();case 11:return s=new(to())((function(e,t,a){a.shouldReject=!1,a((function(){u._pending.updateAuthStatePromise=null,u._pending.canceledTimes=u._pending.canceledTimes+1,r&&o("canceled")}));var c=function(t){s.isCanceled?e():(i(t),e(),u._pending=Object.assign({},ro))};u._sdk.isAuthenticated().then((function(){if(s.isCanceled)e();else{var t=u._sdk.tokenManager.getTokensSync(),r=t.accessToken,o=t.idToken,i=t.refreshToken,a={accessToken:r,idToken:o,refreshToken:i,isAuthenticated:!(!r||!o)};(n?n(u._sdk,a):Promise.resolve(a)).then((function(e){return c(e)})).catch((function(e){return c({accessToken:r,idToken:o,refreshToken:i,isAuthenticated:!1,error:e})}))}}))})),this._pending.updateAuthStatePromise=s,e.abrupt("return",a(s));case 14:case"end":return e.stop()}}),e,this)})),new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}));var e,t,n,r}},{key:"subscribe",value:function(e){this._sdk.emitter.on(oo,e)}},{key:"unsubscribe",value:function(e){this._sdk.emitter.off(oo,e)}}]),e}(),ao=function(){function e(t,n){if(s(this,e),!t)throw new b('"storage" is required');if("string"!=typeof n||!n.length)throw new b('"storageName" is required');this.storageName=n,this.storageProvider=t}return V(e,[{key:"getItem",value:function(e){return this.getStorage()[e]}},{key:"setItem",value:function(e,t){return this.updateStorage(e,t)}},{key:"removeItem",value:function(e){return this.clearStorage(e)}},{key:"getStorage",value:function(){var e=this.storageProvider.getItem(this.storageName);e=e||"{}";try{return JSON.parse(e)}catch(e){throw new b("Unable to parse storage string: "+this.storageName)}}},{key:"setStorage",value:function(e){try{var t=e?JSON.stringify(e):"{}";this.storageProvider.setItem(this.storageName,t)}catch(e){throw new b("Unable to set storage: "+this.storageName)}}},{key:"clearStorage",value:function(e){if(e){var t=this.getStorage();delete t[e],this.setStorage(t)}else this.storageProvider.removeItem?this.storageProvider.removeItem(this.storageName):this.setStorage()}},{key:"updateStorage",value:function(e,t){var n=this.getStorage();n[e]=t,this.setStorage(n)}}]),e}();function so(e){mt()||e.storageProvider||e.storageProvider||Kn("Memory storage can only support simple single user use case on server side, please provide custom storageProvider or storageKey if advanced scenarios need to be supported.")}var uo=function(){function e(t,n,r){s(this,e),this.storageManagerOptions=t,this.cookieOptions=n,this.storageUtil=r}return V(e,[{key:"getOptionsForSection",value:function(e,t){return Object.assign({},this.storageManagerOptions[e],t)}},{key:"getStorage",value:function(e){if((e=Object.assign({},this.cookieOptions,e)).storageProvider)return e.storageProvider;var t=e,n=t.storageType,r=t.storageTypes;if("sessionStorage"===n&&(e.sessionCookie=!0),n&&r){var o=r.indexOf(n);o>=0&&(r=r.slice(o),n=void 0)}return n||(n=this.storageUtil.findStorageType(r)),this.storageUtil.getStorageByType(n,e)}},{key:"getTransactionStorage",value:function(e){so(e=this.getOptionsForSection("transaction",e));var t=this.getStorage(e),n=e.storageKey||re;return new ao(t,n)}},{key:"getSharedTansactionStorage",value:function(e){so(e=this.getOptionsForSection("shared-transaction",e));var t=this.getStorage(e),n=e.storageKey||oe;return new ao(t,n)}},{key:"getOriginalUriStorage",value:function(e){so(e=this.getOptionsForSection("original-uri",e));var t=this.getStorage(e),n=e.storageKey||ie;return new ao(t,n)}},{key:"getIdxResponseStorage",value:function(e){var t;if(mt())try{t=this.storageUtil.getStorageByType("memory",e)}catch(e){Kn("No response storage found, you may want to provide custom implementation for intermediate idx responses to optimize the network traffic")}else{var n=this.getTransactionStorage(e);n&&(t={getItem:function(e){var t=n.getStorage();return t&&t[e]?t[e]:null},setItem:function(e,t){var r=n.getStorage();if(!r)throw new b("Transaction has been cleared, failed to save idxState");r[e]=t,n.setStorage(r)},removeItem:function(e){var t=n.getStorage();t&&(delete t[e],n.setStorage(t))}})}return t?new ao(t,ae):null}},{key:"getTokenStorage",value:function(e){so(e=this.getOptionsForSection("token",e));var t=this.getStorage(e),n=e.storageKey||ee;return new ao(t,n)}},{key:"getHttpCache",value:function(e){e=this.getOptionsForSection("cache",e);var t=this.getStorage(e),n=e.storageKey||te;return new ao(t,n)}},{key:"getLegacyPKCEStorage",value:function(e){e=this.getOptionsForSection("legacy-pkce",e);var t=this.getStorage(e),n=e.storageKey||ne;return new ao(t,n)}},{key:"getLegacyOAuthParamsStorage",value:function(e){e=this.getOptionsForSection("legacy-oauth-params",e);var t=this.getStorage(e),n=e.storageKey||Y;return new ao(t,n)}}]),e}();function co(e){return e&&e.version}function lo(e){return e&&co(e.rawIdxState)}function fo(e){var t=e.getSharedTansactionStorage(),n=t.getStorage();Object.keys(n).forEach((function(e){var t=n[e];Date.now()-t.dateCreated>18e5&&delete n[e]})),t.setStorage(n)}function ho(e,t,n){var r=e.getSharedTansactionStorage(),o=r.getStorage();o[t]={dateCreated:Date.now(),transaction:n},r.setStorage(o)}function po(e,t){var n=e.getSharedTansactionStorage().getStorage()[t];return n&&n.transaction&&on(n.transaction)?n.transaction:null}function vo(e,t){var n=e.getSharedTansactionStorage(),r=n.getStorage();delete r[t],n.setStorage(r)}var yo=function(){function e(t){s(this,e),this.storageManager=t.storageManager,this.legacyWidgetSupport=!1!==t.legacyWidgetSupport,this.saveNonceCookie=!1!==t.saveNonceCookie,this.saveStateCookie=!1!==t.saveStateCookie,this.saveParamsCookie=!1!==t.saveParamsCookie,this.enableSharedStorage=!1!==t.enableSharedStorage,this.saveLastResponse=!1!==t.saveLastResponse,this.options=t}return V(e,[{key:"clear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.storageManager.getTransactionStorage(),n=t.getStorage();if(t.clearStorage(),this.clearIdxResponse(),this.enableSharedStorage&&!1!==e.clearSharedStorage){var r=e.state||(null==n?void 0:n.state);r&&vo(this.storageManager,r)}this.legacyWidgetSupport&&(e.oauth&&this.clearLegacyOAuthParams(),e.pkce&&this.clearLegacyPKCE())}},{key:"save",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.storageManager.getTransactionStorage(),r=n.getStorage();if(on(r)&&!t.muteWarning&&Kn("a saved auth transaction exists in storage. This may indicate another auth flow is already in progress."),n.setStorage(e),this.enableSharedStorage&&e.state&&ho(this.storageManager,e.state,e),t.oauth&&(this.saveNonceCookie||this.saveStateCookie||this.saveParamsCookie)){var o=this.storageManager.getStorage({storageType:"cookie"});if(this.saveParamsCookie){var i=e.responseType,a=e.state,s=e.nonce,u=e.scopes,c=e.clientId,l=e.urls,f=e.ignoreSignature,h={responseType:i,state:a,nonce:s,scopes:u,clientId:c,urls:l,ignoreSignature:f};o.setItem(Y,JSON.stringify(h),null)}this.saveNonceCookie&&e.nonce&&o.setItem(Z,e.nonce,null),this.saveStateCookie&&e.state&&o.setItem(X,e.state,null)}}},{key:"exists",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{var t=this.load(e);return!!t}catch(e){return!1}}},{key:"load",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.enableSharedStorage&&t.state&&(fo(this.storageManager),on(e=po(this.storageManager,t.state))))return e;var n=this.storageManager.getTransactionStorage();if(on(e=n.getStorage()))return e;if(!this.legacyWidgetSupport)return null;if(t.oauth)try{var r=this.loadLegacyOAuthParams();Object.assign(e,r)}finally{this.clearLegacyOAuthParams()}if(t.pkce)try{var o=this.loadLegacyPKCE();Object.assign(e,o)}finally{this.clearLegacyPKCE()}return on(e)?e:null}},{key:"clearLegacyPKCE",value:function(){this.storageManager.storageUtil.testStorageType("localStorage")&&this.storageManager.getLegacyPKCEStorage({storageType:"localStorage"}).clearStorage(),this.storageManager.storageUtil.testStorageType("sessionStorage")&&this.storageManager.getLegacyPKCEStorage({storageType:"sessionStorage"}).clearStorage()}},{key:"loadLegacyPKCE",value:function(){var e;if(this.storageManager.storageUtil.testStorageType("localStorage")&&(e=this.storageManager.getLegacyPKCEStorage({storageType:"localStorage"}).getStorage())&&e.codeVerifier)return e;if(this.storageManager.storageUtil.testStorageType("sessionStorage")&&(e=this.storageManager.getLegacyPKCEStorage({storageType:"sessionStorage"}).getStorage())&&e.codeVerifier)return e;throw new b("Could not load PKCE codeVerifier from storage. This may indicate the auth flow has already completed or multiple auth flows are executing concurrently.",void 0)}},{key:"clearLegacyOAuthParams",value:function(){this.storageManager.storageUtil.testStorageType("sessionStorage")&&this.storageManager.getLegacyOAuthParamsStorage({storageType:"sessionStorage"}).clearStorage(),this.storageManager.storageUtil.testStorageType("cookie")&&this.storageManager.getLegacyOAuthParamsStorage({storageType:"cookie"}).clearStorage()}},{key:"loadLegacyOAuthParams",value:function(){var e;if(this.storageManager.storageUtil.testStorageType("sessionStorage")&&(e=this.storageManager.getLegacyOAuthParamsStorage({storageType:"sessionStorage"}).getStorage()),en(e))return e;if(this.storageManager.storageUtil.testStorageType("cookie")&&(e=this.storageManager.getLegacyOAuthParamsStorage({storageType:"cookie"}).getStorage()),en(e))return e;throw new b("Unable to retrieve OAuth redirect params from storage")}},{key:"saveIdxResponse",value:function(e){if(this.saveLastResponse){var t=this.storageManager.getIdxResponseStorage();t&&t.setStorage(e)}}},{key:"loadIdxResponse",value:function(){if(!this.saveLastResponse)return null;var e=this.storageManager.getIdxResponseStorage();if(!e)return null;var t=e.getStorage();return co(t)?t:null}},{key:"clearIdxResponse",value:function(){if(this.saveLastResponse){var e=this.storageManager.getIdxResponseStorage();null==e||e.clearStorage()}}}]),e}();function go(e){var t=(e=e||{}).scopes;if(t&&!Array.isArray(t))throw new b('scopes must be a array of strings. Required usage: new OktaAuth({scopes: ["openid", "email"]})');var n=e.issuer;if(!n)throw new b('No issuer passed to constructor. Required usage: new OktaAuth({issuer: "https://{yourOktaDomain}.com/oauth2/{authServerId}"})');if(!new RegExp("^http?s?://.+").test(n))throw new b('Issuer must be a valid URL. Required usage: new OktaAuth({issuer: "https://{yourOktaDomain}.com/oauth2/{authServerId}"})');if(-1!==n.indexOf("-admin."))throw new b('Issuer URL passed to constructor contains "-admin" in subdomain. Required usage: new OktaAuth({issuer: "https://{yourOktaDomain}.com})')}var mo=n(98),ko=n.n(mo);function bo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var wo=function(e,t,r){var o=r.data,i=r.headers||{};"application/json"===(i["Content-Type"]||i["content-type"]||"")&&o&&"string"!=typeof o&&(o=JSON.stringify(o));var a=(n.g.fetch||ko())(t,{method:e,headers:r.headers,body:o,credentials:r.withCredentials?"include":"omit"});return a.finally||(a=Promise.resolve(a)),a.then((function(e){var t=!e.ok,n=e.status;return function(e){return e.headers.get("Content-Type")&&e.headers.get("Content-Type").toLowerCase().indexOf("application/json")>=0?e.json().catch((function(e){return{error:e,errorSummary:"Could not parse server response"}})):e.text()}(e).then((function(t){return function(e,t,n){var r,o="object"===l(t),i={},a=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return bo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bo(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}(n.headers.entries());try{for(a.s();!(r=a.n()).done;){var s=r.value;i[s[0]]=s[1]}}catch(e){a.e(e)}finally{a.f()}var u={responseText:o?JSON.stringify(t):t,status:e,headers:i};return o&&(u.responseType="json",u.responseJSON=t),u}(n,t,e)})).then((function(e){var n;if(t||(null===(n=e.responseJSON)||void 0===n?void 0:n.error))throw e;return e}))}))},To={token:{storageTypes:["localStorage","sessionStorage","cookie"]},cache:{storageTypes:["localStorage","sessionStorage","cookie"]},transaction:{storageTypes:["sessionStorage","localStorage","cookie"]},"shared-transaction":{storageTypes:["localStorage"]},"original-uri":{storageTypes:["localStorage"]}};function So(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=e.cookies||{};return void 0===n.secure&&(n.secure=t),void 0===n.sameSite&&(n.sameSite=n.secure?"none":"lax"),n.secure&&!t&&(Kn('The current page is not being served with the HTTPS protocol.\nFor security reasons, we strongly recommend using HTTPS.\nIf you cannot use HTTPS, set "cookies.secure" option to false.'),n.secure=!1),"none"!==n.sameSite||n.secure||(n.sameSite="lax"),n}function xo(){return{devMode:!1,httpRequestClient:wo,storageUtil:Gn,storageManager:To,transactionManager:{enableSharedStorage:!0}}}function Oo(e,t){return Object.assign({},e,N(t),{storageManager:Object.assign({},e.storageManager,t.storageManager),transactionManager:Object.assign({},e.transactionManager,t.transactionManager)})}var Eo={interceptors:{request:new(function(){function e(){s(this,e),this.handlers=[]}return V(e,[{key:"use",value:function(e){this.handlers.push({before:e})}},{key:"clear",value:function(){this.handlers=[]}}]),e}())}},_o=function(e,t){var n,r,o,i,a=t.method,s=void 0===a?"POST":a,u=t.headers,c=void 0===u?{}:u,l=t.credentials,f=void 0===l?"include":l,h=t.body;return n=void 0,r=void 0,o=void 0,i=G().mark((function t(){var n,r;return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={url:e,method:s,headers:Object.assign({},c),credentials:f,body:h},Eo.interceptors&&Eo.interceptors.request.handlers.forEach((function(e){e.before(n)})),r=n.url,delete n.url,t.abrupt("return",ko()(r,n));case 5:case"end":return t.stop()}}),t)})),new(o||(o=Promise))((function(e,t){function a(e){try{u(i.next(e))}catch(e){t(e)}}function s(e){try{u(i.throw(e))}catch(e){t(e)}}function u(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(a,s)}u((i=i.apply(n,r||[])).next())}))};function Ao(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Ro(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ro(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function Ro(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Po=function(e){return!1!==e.mutable},Co=function(e){var t,n,r={},o=[],i={};if(!e.value)return o.push(e),{defaultParamsForAction:r,neededParamsForAction:o,immutableParamsForAction:i};var a,s=Ao(e.value);try{for(s.s();!(a=s.n()).done;){var u=a.value;Po(u)?(o.push(u),null!==(t=u.value)&&void 0!==t&&t&&(r[u.name]=u.value)):i[u.name]=null!==(n=u.value)&&void 0!==n?n:""}}catch(e){s.e(e)}finally{s.f()}return{defaultParamsForAction:r,neededParamsForAction:o,immutableParamsForAction:i}},jo=function(e){var t=e.actionDefinition,n=e.defaultParamsForAction,r=void 0===n?{}:n,o=e.immutableParamsForAction,i=void 0===o?{}:o,a=e.toPersist,s=t.href;return function(e){return n=this,o=void 0,u=void 0,c=G().mark((function n(){var o,u,c;return G().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o={"content-type":"application/json",accept:t.accepts||"application/ion+json"},u=JSON.stringify(Object.assign(Object.assign(Object.assign({},r),e),i)),c=a&&!1===a.withCredentials?"omit":"include",n.abrupt("return",_o(s,{method:t.method,headers:o,body:u,credentials:c}).then((function(e){var t=e.json();return e.ok?t:401===e.status&&'Oktadevicejwt realm="Okta Device"'===e.headers.get("WWW-Authenticate")?t.then((function(e){var t=ti(e,a);return t.stepUp=!0,Promise.reject(t)})):t.then((function(e){return Promise.reject(ti(e,a))}))})).then((function(e){return ti(e,a)})));case 4:case"end":return n.stop()}}),n)})),new(u||(u=Promise))((function(e,t){function r(e){try{a(c.next(e))}catch(e){t(e)}}function i(e){try{a(c.throw(e))}catch(e){t(e)}}function a(t){var n;t.done?e(t.value):(n=t.value,n instanceof u?n:new u((function(e){e(n)}))).then(r,i)}a((c=c.apply(n,o||[])).next())}));var n,o,u,c}},Io=function(e,t){var n=jo,r=function(e){var t,n=[],r={},o={},i=Ao(e=Array.isArray(e)?e:[e]);try{for(i.s();!(t=i.n()).done;){var a=t.value,s=Co(a),u=s.defaultParamsForAction,c=s.neededParamsForAction,l=s.immutableParamsForAction;n.push(c),r[a.name]=u,o[a.name]=l}}catch(e){i.e(e)}finally{i.f()}return{defaultParams:r,neededParams:n,immutableParams:o}}(e),o=r.defaultParams,i=r.neededParams,a=r.immutableParams,s=n({actionDefinition:e,defaultParamsForAction:o[e.name],immutableParamsForAction:a[e.name],toPersist:t});return s.neededParams=i,s};function Mo(e){return Mo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mo(e)}function Uo(e){return Uo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Uo(e)}function Do(e,t){return Do=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Do(e,t)}function No(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Lo(e,t,n){return Lo=No()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&Do(o,n.prototype),o},Lo.apply(null,arguments)}function Fo(e){var t="function"==typeof Map?new Map:void 0;return Fo=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return Lo(e,arguments,Uo(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Do(r,e)},Fo(e)}function Bo(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ho(e){return function(e){if(Array.isArray(e))return qo(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ko(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ko(e,t){if(e){if("string"==typeof e)return qo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qo(e,t):void 0}}function qo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Vo=Object.prototype.hasOwnProperty;function Wo(e,t){return(e=e.slice()).push(t),e}function Go(e,t){return(t=t.slice()).unshift(e),t}var Jo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Do(e,t)}(o,e);var t,n,r=(t=o,n=No(),function(){var e,r=Uo(t);if(n){var o=Uo(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Bo(this,e)});function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this,'JSONPath should not be called with "new" (it prevents return of (unwrapped) scalar values)')).avoidNew=!0,t.value=e,t.name="NewError",t}return o}(Fo(Error));function zo(e,t,n,r,o){if(!(this instanceof zo))try{return new zo(e,t,n,r,o)}catch(e){if(!e.avoidNew)throw e;return e.value}"string"==typeof e&&(o=r,r=n,n=t,t=e,e=null);var i=e&&"object"===Mo(e);if(e=e||{},this.json=e.json||n,this.path=e.path||t,this.resultType=e.resultType||"value",this.flatten=e.flatten||!1,this.wrap=!Vo.call(e,"wrap")||e.wrap,this.sandbox=e.sandbox||{},this.preventEval=e.preventEval||!1,this.parent=e.parent||null,this.parentProperty=e.parentProperty||null,this.callback=e.callback||r||null,this.otherTypeCallback=e.otherTypeCallback||o||function(){throw new TypeError("You must supply an otherTypeCallback callback option with the @other() operator.")},!1!==e.autostart){var a={path:i?e.path:t};i?"json"in e&&(a.json=e.json):a.json=n;var s=this.evaluate(a);if(!s||"object"!==Mo(s))throw new Jo(s);return s}}zo.prototype.evaluate=function(e,t,n,r){var o=this,i=this.parent,a=this.parentProperty,s=this.flatten,u=this.wrap;if(this.currResultType=this.resultType,this.currPreventEval=this.preventEval,this.currSandbox=this.sandbox,n=n||this.callback,this.currOtherTypeCallback=r||this.otherTypeCallback,t=t||this.json,(e=e||this.path)&&"object"===Mo(e)&&!Array.isArray(e)){if(!e.path&&""!==e.path)throw new TypeError('You must supply a "path" property when providing an object argument to JSONPath.evaluate().');if(!Vo.call(e,"json"))throw new TypeError('You must supply a "json" property when providing an object argument to JSONPath.evaluate().');t=e.json,s=Vo.call(e,"flatten")?e.flatten:s,this.currResultType=Vo.call(e,"resultType")?e.resultType:this.currResultType,this.currSandbox=Vo.call(e,"sandbox")?e.sandbox:this.currSandbox,u=Vo.call(e,"wrap")?e.wrap:u,this.currPreventEval=Vo.call(e,"preventEval")?e.preventEval:this.currPreventEval,n=Vo.call(e,"callback")?e.callback:n,this.currOtherTypeCallback=Vo.call(e,"otherTypeCallback")?e.otherTypeCallback:this.currOtherTypeCallback,i=Vo.call(e,"parent")?e.parent:i,a=Vo.call(e,"parentProperty")?e.parentProperty:a,e=e.path}if(i=i||null,a=a||null,Array.isArray(e)&&(e=zo.toPathString(e)),(e||""===e)&&t){var c=zo.toPathArray(e);"$"===c[0]&&c.length>1&&c.shift(),this._hasParentSelector=null;var l=this._trace(c,t,["$"],i,a,n).filter((function(e){return e&&!e.isParentSelector}));return l.length?u||1!==l.length||l[0].hasArrExpr?l.reduce((function(e,t){var n=o._getPreferredOutput(t);return s&&Array.isArray(n)?e=e.concat(n):e.push(n),e}),[]):this._getPreferredOutput(l[0]):u?[]:void 0}},zo.prototype._getPreferredOutput=function(e){var t=this.currResultType;switch(t){case"all":var n=Array.isArray(e.path)?e.path:zo.toPathArray(e.path);return e.pointer=zo.toPointer(n),e.path="string"==typeof e.path?e.path:zo.toPathString(e.path),e;case"value":case"parent":case"parentProperty":return e[t];case"path":return zo.toPathString(e[t]);case"pointer":return zo.toPointer(e.path);default:throw new TypeError("Unknown result type")}},zo.prototype._handleCallback=function(e,t,n){if(t){var r=this._getPreferredOutput(e);e.path="string"==typeof e.path?e.path:zo.toPathString(e.path),t(r,n,e)}},zo.prototype._trace=function(e,t,n,r,o,i,a,s){var u,c=this;if(!e.length)return u={path:n,value:t,parent:r,parentProperty:o,hasArrExpr:a},this._handleCallback(u,i,"value"),u;var l=e[0],f=e.slice(1),h=[];function p(e){Array.isArray(e)?e.forEach((function(e){h.push(e)})):h.push(e)}if(("string"!=typeof l||s)&&t&&Vo.call(t,l))p(this._trace(f,t[l],Wo(n,l),t,l,i,a));else if("*"===l)this._walk(l,f,t,n,r,o,i,(function(e,t,n,r,o,i,a,s){p(c._trace(Go(e,n),r,o,i,a,s,!0,!0))}));else if(".."===l)p(this._trace(f,t,n,r,o,i,a)),this._walk(l,f,t,n,r,o,i,(function(e,t,n,r,o,i,a,s){"object"===Mo(r[e])&&p(c._trace(Go(t,n),r[e],Wo(o,e),r,e,s,!0))}));else{if("^"===l)return this._hasParentSelector=!0,{path:n.slice(0,-1),expr:f,isParentSelector:!0};if("~"===l)return u={path:Wo(n,l),value:o,parent:r,parentProperty:null},this._handleCallback(u,i,"property"),u;if("$"===l)p(this._trace(f,t,n,null,null,i,a));else if(/^(\x2D?[0-9]*):(\x2D?[0-9]*):?([0-9]*)$/.test(l))p(this._slice(l,f,t,n,r,o,i));else if(0===l.indexOf("?(")){if(this.currPreventEval)throw new Error("Eval [?(expr)] prevented in JSONPath expression.");this._walk(l,f,t,n,r,o,i,(function(e,t,n,r,o,i,a,s){c._eval(t.replace(/^\?\(((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?)\)$/,"$1"),r[e],e,o,i,a)&&p(c._trace(Go(e,n),r,o,i,a,s,!0))}))}else if("("===l[0]){if(this.currPreventEval)throw new Error("Eval [(expr)] prevented in JSONPath expression.");p(this._trace(Go(this._eval(l,t,n[n.length-1],n.slice(0,-1),r,o),f),t,n,r,o,i,a))}else if("@"===l[0]){var d=!1,v=l.slice(1,-2);switch(v){case"scalar":t&&["object","function"].includes(Mo(t))||(d=!0);break;case"boolean":case"string":case"undefined":case"function":Mo(t)===v&&(d=!0);break;case"integer":!Number.isFinite(t)||t%1||(d=!0);break;case"number":Number.isFinite(t)&&(d=!0);break;case"nonFinite":"number"!=typeof t||Number.isFinite(t)||(d=!0);break;case"object":t&&Mo(t)===v&&(d=!0);break;case"array":Array.isArray(t)&&(d=!0);break;case"other":d=this.currOtherTypeCallback(t,n,r,o);break;case"null":null===t&&(d=!0);break;default:throw new TypeError("Unknown value type "+v)}if(d)return u={path:n,value:t,parent:r,parentProperty:o},this._handleCallback(u,i,"value"),u}else if("`"===l[0]&&t&&Vo.call(t,l.slice(1))){var y=l.slice(1);p(this._trace(f,t[y],Wo(n,y),t,y,i,a,!0))}else if(l.includes(",")){var g,m=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Ko(e))){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}(l.split(","));try{for(m.s();!(g=m.n()).done;){var k=g.value;p(this._trace(Go(k,f),t,n,r,o,i,!0))}}catch(e){m.e(e)}finally{m.f()}}else!s&&t&&Vo.call(t,l)&&p(this._trace(f,t[l],Wo(n,l),t,l,i,a,!0))}if(this._hasParentSelector)for(var b=0;b<h.length;b++){var w=h[b];if(w&&w.isParentSelector){var T=this._trace(w.expr,t,w.path,r,o,i,a);if(Array.isArray(T)){h[b]=T[0];for(var S=T.length,x=1;x<S;x++)b++,h.splice(b,0,T[x])}else h[b]=T}}return h},zo.prototype._walk=function(e,t,n,r,o,i,a,s){if(Array.isArray(n))for(var u=n.length,c=0;c<u;c++)s(c,e,t,n,r,o,i,a);else n&&"object"===Mo(n)&&Object.keys(n).forEach((function(u){s(u,e,t,n,r,o,i,a)}))},zo.prototype._slice=function(e,t,n,r,o,i,a){if(Array.isArray(n)){var s=n.length,u=e.split(":"),c=u[2]&&Number.parseInt(u[2])||1,l=u[0]&&Number.parseInt(u[0])||0,f=u[1]&&Number.parseInt(u[1])||s;l=l<0?Math.max(0,l+s):Math.min(s,l),f=f<0?Math.max(0,f+s):Math.min(s,f);for(var h=[],p=l;p<f;p+=c)this._trace(Go(p,t),n,r,o,i,a,!0).forEach((function(e){h.push(e)}));return h}},zo.prototype._eval=function(e,t,n,r,o,i){e.includes("@parentProperty")&&(this.currSandbox._$_parentProperty=i,e=e.replace(/@parentProperty/g,"_$_parentProperty")),e.includes("@parent")&&(this.currSandbox._$_parent=o,e=e.replace(/@parent/g,"_$_parent")),e.includes("@property")&&(this.currSandbox._$_property=n,e=e.replace(/@property/g,"_$_property")),e.includes("@path")&&(this.currSandbox._$_path=zo.toPathString(r.concat([n])),e=e.replace(/@path/g,"_$_path")),e.includes("@root")&&(this.currSandbox._$_root=this.json,e=e.replace(/@root/g,"_$_root")),/@([\t-\r \)\.\[\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])/.test(e)&&(this.currSandbox._$_v=t,e=e.replace(/@([\t-\r \)\.\[\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])/g,"_$_v$1"));try{return this.vm.runInNewContext(e,this.currSandbox)}catch(t){throw console.log(t),new Error("jsonPath: "+t.message+": "+e)}},zo.cache={},zo.toPathString=function(e){for(var t=e,n=t.length,r="$",o=1;o<n;o++)/^(~|\^|@(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\(\))$/.test(t[o])||(r+=/^[\*0-9]+$/.test(t[o])?"["+t[o]+"]":"['"+t[o]+"']");return r},zo.toPointer=function(e){for(var t=e,n=t.length,r="",o=1;o<n;o++)/^(~|\^|@(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\(\))$/.test(t[o])||(r+="/"+t[o].toString().replace(/~/g,"~0").replace(/\//g,"~1"));return r},zo.toPathArray=function(e){var t=zo.cache;if(t[e])return t[e].concat();var n=[],r=e.replace(/@(?:null|boolean|number|string|integer|undefined|nonFinite|scalar|array|object|function|other)\(\)/g,";$&;").replace(/['\[](\??\((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\))['\]]/g,(function(e,t){return"[#"+(n.push(t)-1)+"]"})).replace(/\[["']((?:(?!['\]])[\s\S])*)["']\]/g,(function(e,t){return"['"+t.replace(/\./g,"%@%").replace(/~/g,"%%@@%%")+"']"})).replace(/~/g,";~;").replace(/["']?\.["']?(?!(?:(?!\[)[\s\S])*\])|\[["']?/g,";").replace(/%@%/g,".").replace(/%%@@%%/g,"~").replace(/(?:;)?(\^+)(?:;)?/g,(function(e,t){return";"+t.split("").join(";")+";"})).replace(/;;;|;;/g,";..;").replace(/;$|'?\]|'$/g,"").split(";").map((function(e){var t=e.match(/#([0-9]+)/);return t&&t[1]?n[t[1]]:e}));return t[e]=r,t[e].concat()},zo.prototype.vm={runInNewContext:function(e,t){var n=Object.keys(t),r=[];!function(e,n,r){for(var o=e.length,i=0;i<o;i++)a=e[i],"function"==typeof t[a]&&n.push(e.splice(i--,1)[0]);var a}(n,r);var o=n.map((function(e,n){return t[e]})),i=r.reduce((function(e,n){var r=t[n].toString();return/function/.test(r)||(r="function "+r),"var "+n+"="+r+";"+e}),"");/(["'])use strict\1/.test(e=i+e)||n.includes("arguments")||(e="var arguments = undefined;"+e);var a=(e=e.replace(/;[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*$/,"")).lastIndexOf(";"),s=a>-1?e.slice(0,a+1)+" return "+e.slice(a+1):" return "+e;return Lo(Function,Ho(n).concat([s])).apply(void 0,Ho(o))}};var $o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},Qo=Object.fromEntries(["remediation","context"].map((function(e){return[e,!0]}))),Yo=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={},r={};return Object.keys(e).filter((function(e){return!Qo[e]})).forEach((function(o){if("object"===l(e[o])&&e[o])if(e[o].rel)n[e[o].name]=Io(e[o],t);else{var i=e[o],a=i.value,s=i.type,u=$o(i,["value","type"]);r[o]=Object.assign({type:s},u),"object"===s?(r[o].value={},Object.entries(a).forEach((function(e){var i=tt(e,2),a=i[0],s=i[1];s.rel?n["".concat(o,"-").concat(a.name||a)]=Io(s,t):r[o].value[a]=s}))):r[o].value=a}else r[o]=e[o]})),{context:r,actions:n}},Xo=function e(t,n){Object.keys(n).forEach((function(r){if("relatesTo"===r){var o=Array.isArray(n[r])?n[r][0]:n[r];if("string"==typeof o){var i=zo({path:o,json:t})[0];if(i)return void(n[r]=i)}}Array.isArray(n[r])&&n[r].forEach((function(n){return e(t,n)}))}))},Zo=function(e,t){var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.fromEntries(e.map((function(e){return[e.name,Io(e,t)]})))}([e],t),r=n[e.name];return Object.assign(Object.assign({},e),{action:r})},ei=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};function ti(e,t){var n,r=e,o=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(null===(t=e.remediation)||void 0===t?void 0:t.value)||[];r.forEach((function(t){return Xo(e,t)}));var o=r.map((function(e){return Zo(e,n)})),i=Yo(e,n),a=i.context,s=i.actions;return{remediations:o,context:a,actions:s}}(e,t),i=o.remediations,a=o.context,s=o.actions;return{proceed:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ei(this,void 0,void 0,G().mark((function n(){var r;return G().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=i.find((function(t){return t.name===e}))){n.next=3;break}return n.abrupt("return",Promise.reject("Unknown remediation choice: [".concat(e,"]")));case 3:return n.abrupt("return",r.action(t));case 4:case"end":return n.stop()}}),n)})))},neededToProceed:nr(i),actions:s,context:a,rawIdxState:r,interactionCode:null===(n=r.successWithInteractionCode)||void 0===n?void 0:n.value.find((function(e){return"interaction_code"===e.name})).value,toPersist:t}}var ni={makeIdxState:ti},ri=function(e){switch(e){case"1.0.0":return ni;case void 0:case null:throw new Error("Api version is required");default:throw new Error("Unknown api version: ".concat(e,".  Use an exact semver version."))}};function oi(e){if(!e)throw new Error("version is required");if((null!=e?e:"").replace(/[^0-9a-zA-Z._-]/,"")!==e||!e)throw new Error("invalid version supplied - version is required and uses semver syntax");ri(e)}var ii=function(e){return e.json().then((function(e){return Promise.reject(e)}))},ai=function(e){var t,n,r,o,i=e.withCredentials,a=e.domain,s=e.interactionHandle,u=e.stateHandle,c=e.version;return t=this,n=void 0,r=void 0,o=G().mark((function e(){var t,n,r,o;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return oi(c),t="".concat(a,"/idp/idx/introspect"),n=u?{stateToken:u}:{interactionHandle:s},r={"content-type":"application/ion+json; okta-version=".concat(c),accept:"application/ion+json; okta-version=".concat(c)},o=!1===i?"omit":"include",e.abrupt("return",_o(t,{credentials:o,headers:r,body:JSON.stringify(n)}).then((function(e){return e.ok?e.json():ii(e)})));case 6:case"end":return e.stop()}}),e)})),new(r||(r=Promise))((function(e,i){function a(e){try{u(o.next(e))}catch(e){i(e)}}function s(e){try{u(o.throw(e))}catch(e){i(e)}}function u(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(a,s)}u((o=o.apply(t,n||[])).next())}))},si=function(e){return e.json().then((function(e){return Promise.reject(e)}))},ui=function(e){var t,n,r,o,i=e.withCredentials,a=e.clientId,s=e.baseUrl,u=e.scopes,c=void 0===u?["openid","email"]:u,l=e.redirectUri,f=e.codeChallenge,h=e.codeChallengeMethod,p=e.state,d=e.activationToken,v=e.recoveryToken,y=e.clientSecret;return t=this,n=void 0,r=void 0,o=G().mark((function e(){var t,n,r,o,u;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(s,"/v1/interact"),n={client_id:a,scope:c.join(" "),redirect_uri:l,code_challenge:f,code_challenge_method:h,state:p},d&&(n.activation_token=d),v&&(n.recovery_token=v),y&&(n.client_secret=y),r=Object.entries(n).map((function(e){var t=tt(e,2),n=t[0],r=t[1];return"".concat(n,"=").concat(encodeURIComponent(r))})).join("&"),o={"content-type":"application/x-www-form-urlencoded"},u=!1===i?"omit":"include",e.abrupt("return",_o(t,{credentials:u,headers:o,body:r}).then((function(e){return e.ok?e.json():si(e)})).then((function(e){return e.interaction_handle})));case 9:case"end":return e.stop()}}),e)})),new(r||(r=Promise))((function(e,i){function a(e){try{u(o.next(e))}catch(e){i(e)}}function s(e){try{u(o.throw(e))}catch(e){i(e)}}function u(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(a,s)}u((o=o.apply(t,n||[])).next())}))},ci="1.0.0",li=ri(ci).makeIdxState,fi={start:function(e){var t,n,r,o,i=e.withCredentials,a=e.clientId,s=e.domain,u=e.issuer,c=e.stateHandle,l=e.interactionHandle,f=e.version,h=e.redirectUri,p=e.state,d=e.scopes,v=e.codeChallenge,y=e.codeChallengeMethod,g=e.activationToken,m=e.recoveryToken;return t=this,n=void 0,r=void 0,o=G().mark((function e(){var t,n,r,o,k,b,w,T;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=null==u?void 0:u.replace(/\/+$/,""),t=(null==u?void 0:u.indexOf("/oauth2"))>0?u:u+"/oauth2",n={baseUrl:t,clientId:a,state:p,withCredentials:i},s||u){e.next=5;break}return e.abrupt("return",Promise.reject({error:"issuer is required"}));case 5:if(c||a){e.next=7;break}return e.abrupt("return",Promise.reject({error:"clientId is required"}));case 7:if(c||h){e.next=9;break}return e.abrupt("return",Promise.reject({error:"redirectUri is required"}));case 9:if(c||v&&y){e.next=11;break}return e.abrupt("return",Promise.reject({error:"PKCE params (codeChallenge, codeChallengeMethod) are required"}));case 11:if(s||(s=new URL(u).origin),oi(f),c||l){e.next=26;break}return e.prev=14,r={withCredentials:i,clientId:a,baseUrl:t,scopes:d,redirectUri:h,codeChallenge:v,codeChallengeMethod:y,state:p,activationToken:g,recoveryToken:m},e.next=18,ui(r);case 18:o=e.sent,l=o,n.interactionHandle=l,e.next=26;break;case 23:return e.prev=23,e.t0=e.catch(14),e.abrupt("return",Promise.reject({error:e.t0}));case 26:return e.prev=26,k=ri(f),b=k.makeIdxState,e.next=30,ai({withCredentials:i,domain:s,interactionHandle:l,stateHandle:c,version:f}).catch((function(e){return Promise.reject({error:"introspect call failed",details:b(e,n)})}));case 30:return w=e.sent,T=b(w,n),e.abrupt("return",T);case 35:return e.prev=35,e.t1=e.catch(26),e.abrupt("return",Promise.reject({error:e.t1}));case 38:case"end":return e.stop()}}),e,null,[[14,23],[26,35]])})),new(r||(r=Promise))((function(e,i){function a(e){try{u(o.next(e))}catch(e){i(e)}}function s(e){try{u(o.throw(e))}catch(e){i(e)}}function u(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(a,s)}u((o=o.apply(t,n||[])).next())}))},introspect:ai,interact:ui,makeIdxState:li,client:Eo,LATEST_SUPPORTED_IDX_API_VERSION:ci},hi=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};function pi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return hi(this,void 0,void 0,G().mark((function n(){var r,o,i,a,s,u,c,l,f,h,p,d;return G().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.token.prepareTokenParams(t);case 2:return r=n.sent,o=Bt(e,r),i=Object.assign(Object.assign({},e.options),t),a=i.flow,s=void 0===a?"default":a,u=i.withCredentials,c=void 0===u||u,l=i.activationToken,f=void 0===l?void 0:l,h=i.recoveryToken,p=void 0===h?void 0:h,d=Object.assign(Object.assign({},o),{flow:s,withCredentials:c,activationToken:f,recoveryToken:p}),n.abrupt("return",d);case 7:case"end":return n.stop()}}),n)})))}function di(e,t){var n=vi(e,t);return!!(null==n?void 0:n.interactionHandle)}function vi(e,t){var n;t=N(t),t=Object.assign(Object.assign({},e.options),t);try{n=e.transactionManager.load(t)}catch(e){}if(n)return ki(n,t)?n:void Kn("Saved transaction meta does not match the current configuration. This may indicate that two apps are sharing a storage key.")}function yi(e,t){return hi(this,void 0,void 0,G().mark((function n(){var r;return G().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=N(t),t=Object.assign(Object.assign({},e.options),t),!(r=vi(e,t))){n.next=5;break}return n.abrupt("return",r);case 5:return n.abrupt("return",pi(e,t));case 6:case"end":return n.stop()}}),n)})))}function gi(e,t){e.transactionManager.save(t,{muteWarning:!0})}function mi(e){e.transactionManager.clear()}function ki(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=["issuer","clientId","redirectUri","state","codeChallenge","codeChallengeMethod","activationToken","recoveryToken"];if(!1===wi(e,t,n))return!1;var r=t.flow;return!1!==bi(e,r)}function bi(e,t){return!(t&&"default"!==t&&"proceed"!==t)||t===e.flow}function wi(e,t,n){return!n.some((function(n){var r=t[n];if(r&&r!==e[n])return!0}))}var Ti=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};function Si(e){return{meta:e,interactionHandle:e.interactionHandle,state:e.state}}function xi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ti(this,void 0,void 0,G().mark((function n(){var r,o,i,a,s,u,c,l,f,h,p,d,v,y,g;return G().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=N(t),!(null==(r=vi(e,t))?void 0:r.interactionHandle)){n.next=4;break}return n.abrupt("return",Si(r));case 4:return n.next=6,pi(e,Object.assign(Object.assign({},r),t));case 6:return r=n.sent,o=dt(e),a=(i=r).clientId,s=i.redirectUri,u=i.state,c=i.scopes,l=i.withCredentials,f=i.codeChallenge,h=i.codeChallengeMethod,p=i.activationToken,d=i.recoveryToken,v=t.clientSecret||e.options.clientSecret,n.next=12,fi.interact({withCredentials:l,clientId:a,baseUrl:o,scopes:c,state:u,redirectUri:s,codeChallenge:f,codeChallengeMethod:h,activationToken:p,recoveryToken:d,clientSecret:v});case 12:return y=n.sent,g=Object.assign(Object.assign({},r),{interactionHandle:y,withCredentials:l,state:u,scopes:c,recoveryToken:d,activationToken:p}),gi(e,g),n.abrupt("return",Si(g));case 16:case"end":return n.stop()}}),n)})))}var Oi=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};function Ei(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Oi(this,void 0,void 0,G().mark((function n(){var r,o,i,a;return G().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.transactionManager.loadIdxResponse()){n.next=17;break}return o=t.version||de,i=vt(e),n.prev=4,n.next=7,fi.introspect(Object.assign(Object.assign({domain:i},t),{version:o}));case 7:r=n.sent,n.next=17;break;case 10:if(n.prev=10,n.t0=n.catch(4),!co(n.t0)){n.next=16;break}r=n.t0,n.next=17;break;case 16:throw n.t0;case 17:return a=t.withCredentials,n.abrupt("return",fi.makeIdxState(r,{withCredentials:a}));case 19:case"end":return n.stop()}}),n,null,[[4,10]])})))}function _i(e){return e.charAt(0).toUpperCase()+e.substring(1)}function Ai(e){return e.value.find((function(e){return"authenticator"===e.name}))}function Ri(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Pi=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s(this,e),this.values=Object.assign({},n),this.formatAuthenticators(),this.remediation=t}return V(e,[{key:"formatAuthenticators",value:function(){var e=this;this.values.authenticators=this.values.authenticators||[],this.values.authenticator&&(this.values.authenticators.some((function(t){return"string"==typeof t?t===e.values.authenticator:t.key===e.values.authenticator}))||this.values.authenticators.push({key:this.values.authenticator})),this.values.authenticators=this.values.authenticators.map((function(e){return"string"==typeof e?{key:e}:e})),this.values.authenticatorsData=this.values.authenticators.reduce((function(e,t){return"object"===l(t)&&Object.keys(t).length>1&&e.push(t),e}),this.values.authenticatorsData||[])}},{key:"getName",value:function(){return this.remediation.name}},{key:"canRemediate",value:function(){var e,t,n=this;return!!this.map&&!(e=this.remediation,null===(t=e.value)||void 0===t?void 0:t.reduce((function(e,t){return t.required&&e.push(t.name),e}),[])).find((function(e){return!n.hasData(e)}))}},{key:"getData",value:function(e){var t,n,r=this;if(!e){var o=(t=this.remediation,null===(n=t.value)||void 0===n?void 0:n.map((function(e){return e.name}))).reduce((function(e,t){return e[t]=r.getData(t),e}),{});return o}if("function"==typeof this["map".concat(_i(e))])return this["map".concat(_i(e))](this.remediation.value.find((function(t){return t.name===e})));if(!this.map)return this.values[e];var i=this.map[e];if(!i)return this.values[e];for(var a=0;a<i.length;a++){var s=this.values[i[a]];if(s)return s}}},{key:"hasData",value:function(e){var t=this.getData(e);return"object"===l(t)?!!Object.keys(t).find((function(e){return!!t[e]})):!!t}},{key:"getNextStep",value:function(e){var t=this.getName(),n=this.getInputs(),r=this.getAuthenticator(),o=null==r?void 0:r.type;return Object.assign(Object.assign({name:t,inputs:n},o&&{type:o}),r&&{authenticator:r})}},{key:"getInputs",value:function(){var e=this;return this.map?Object.keys(this.map).reduce((function(t,n){var r,o=e.remediation.value.find((function(e){return e.name===n}));if(!o)return t;var i=e.map[n],a=o.type;if("function"==typeof e["getInput".concat(_i(n))])r=e["getInput".concat(_i(n))](o);else if("object"!==a){var s;(s=1===i.length?i[0]:i.find((function(t){return Object.keys(e.values).includes(t)})))&&(r=Object.assign(Object.assign({},o),{name:s}))}if(!r)throw new b("Missing custom getInput".concat(_i(n)," method in Remediator: ").concat(e.getName()));return Array.isArray(r)?r.forEach((function(e){return t.push(e)})):t.push(r),t}),[]):[]}},{key:"getValuesAfterProceed",value:function(){var e,t=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Ri(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ri(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}(this.getInputs());try{for(t.s();!(e=t.n()).done;){var n=e.value;delete this.values[n.name]}}catch(e){t.e(e)}finally{t.f()}return this.values}},{key:"getAuthenticator",value:function(){var e;return null===(e=this.remediation.relatesTo)||void 0===e?void 0:e.value}}],[{key:"getMessages",value:function(e){var t,n;if(e.value)return null===(n=null===(t=e.value[0])||void 0===t?void 0:t.form)||void 0===n?void 0:n.value.reduce((function(e,t){return t.messages&&(e=[].concat(nr(e),nr(t.messages.value))),e}),[])}}]),e}();function Ci(e,t,n){return Ci="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},Ci(e,t,n||e)}var ji=function e(t){s(this,e),this.meta=t};var Ii=function(e){c(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=p(t);if(n){var o=p(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return h(this,e)});function o(){return s(this,o),r.apply(this,arguments)}return V(o,[{key:"canVerify",value:function(e){return!(!e.verificationCode&&!e.otp)}},{key:"mapCredentials",value:function(e){return{passcode:e.verificationCode||e.otp}}},{key:"getInputs",value:function(e){var t;return Object.assign(Object.assign({},null===(t=e.form)||void 0===t?void 0:t.value[0]),{name:"verificationCode",type:"string",required:e.required})}}]),o}(ji);var Mi=function(e){c(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=p(t);if(n){var o=p(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return h(this,e)});function o(){return s(this,o),r.apply(this,arguments)}return V(o,[{key:"mapCredentials",value:function(e){return{totp:e.verificationCode}}}]),o}(Ii);var Ui=function(e){c(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=p(t);if(n){var o=p(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return h(this,e)});function o(){return s(this,o),r.apply(this,arguments)}return V(o,[{key:"canVerify",value:function(e){return!!e.password}},{key:"mapCredentials",value:function(e){return{passcode:e.password}}},{key:"getInputs",value:function(e){var t;return Object.assign(Object.assign({},null===(t=e.form)||void 0===t?void 0:t.value[0]),{name:"password",type:"string",required:e.required})}}]),o}(ji);var Di=function(e){c(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=p(t);if(n){var o=p(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return h(this,e)});function o(){return s(this,o),r.apply(this,arguments)}return V(o,[{key:"canVerify",value:function(e){var t=e.questionKey,n=e.question,r=e.answer;return!(!t||!r)||!(!n||!r)}},{key:"mapCredentials",value:function(e){var t=e.questionKey,n=e.question;return{questionKey:n?"custom":t,question:n,answer:e.answer}}},{key:"getInputs",value:function(){return[{name:"questionKey",type:"string",require:!0},{name:"question",type:"string",label:"Create a security question"},{name:"answer",type:"string",label:"Answer",required:!0}]}}]),o}(ji);var Ni=function(e){c(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=p(t);if(n){var o=p(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return h(this,e)});function o(){return s(this,o),r.apply(this,arguments)}return V(o,[{key:"canVerify",value:function(e){return!!e.answer}},{key:"mapCredentials",value:function(e){return{questionKey:this.meta.contextualData.enrolledQuestion.questionKey,answer:e.answer}}},{key:"getInputs",value:function(){return[{name:"answer",type:"string",label:"Answer",required:!0}]}}]),o}(ji);var Li=function(e){c(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=p(t);if(n){var o=p(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return h(this,e)});function o(){return s(this,o),r.apply(this,arguments)}return V(o,[{key:"canVerify",value:function(e){var t=e.clientData,n=e.attestation;return!(!t||!n)}},{key:"mapCredentials",value:function(e){return{clientData:e.clientData,attestation:e.attestation}}},{key:"getInputs",value:function(){return[{name:"clientData",type:"string",required:!0,visible:!1,label:"Client Data"},{name:"attestation",type:"string",required:!0,visible:!1,label:"Attestation"}]}}]),o}(ji);var Fi=function(e){c(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=p(t);if(n){var o=p(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return h(this,e)});function o(){return s(this,o),r.apply(this,arguments)}return V(o,[{key:"canVerify",value:function(e){var t=e.clientData,n=e.authenticatorData,r=e.signatureData;return!!(t&&n&&r)}},{key:"mapCredentials",value:function(e){return{authenticatorData:e.authenticatorData,clientData:e.clientData,signatureData:e.signatureData}}},{key:"getInputs",value:function(){return[{name:"authenticatorData",type:"string",label:"Authenticator Data",required:!0,visible:!1},{name:"clientData",type:"string",label:"Client Data",required:!0,visible:!1},{name:"signatureData",type:"string",label:"Signature Data",required:!0,visible:!1}]}}]),o}(ji);function Bi(e){var t,n,r=e.relatesTo,o=(null==r?void 0:r.value)||{};switch(o.key){case Kt.OKTA_PASSWORD:return new Ui(o);case Kt.SECURITY_QUESTION:return(null===(t=o.contextualData)||void 0===t?void 0:t.enrolledQuestion)?new Ni(o):new Di(o);case Kt.OKTA_VERIFY:return new Mi(o);case Kt.WEBAUTHN:return(null===(n=o.contextualData)||void 0===n?void 0:n.challengeData)?new Fi(o):new Li(o);default:return new Ii(o)}}var Hi=function(e){c(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=p(t);if(n){var o=p(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return h(this,e)});function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return s(this,o),(t=r.call(this,e,n)).map={credentials:[]},t.authenticator=Bi(e),t}return V(o,[{key:"getNextStep",value:function(e){var t,n=Ci(p(o.prototype),"getNextStep",this).call(this,e),r=null===(t=null==e?void 0:e.authenticatorEnrollments)||void 0===t?void 0:t.value;return Object.assign(Object.assign({},n),{authenticatorEnrollments:r})}},{key:"canRemediate",value:function(){return this.authenticator.canVerify(this.values)}},{key:"mapCredentials",value:function(){return this.authenticator.mapCredentials(this.values)}},{key:"getInputCredentials",value:function(e){return this.authenticator.getInputs(e)}}]),o}(Pi);var Ki=function(e){c(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=p(t);if(n){var o=p(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return h(this,e)});function o(){return s(this,o),r.apply(this,arguments)}return o}(Hi);function qi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Ki.remediationName="enroll-authenticator";var Vi=function(e){c(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=p(t);if(n){var o=p(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return h(this,e)});function o(){return s(this,o),r.apply(this,arguments)}return V(o,[{key:"canRemediate",value:function(){return Boolean(this.values.startPolling)}},{key:"getNextStep",value:function(e){var t=Ci(p(o.prototype),"getNextStep",this).call(this,e),n=this.getAuthenticator();return!n&&(null==e?void 0:e.currentAuthenticator)&&(n=e.currentAuthenticator.value),Object.assign(Object.assign({},t),{authenticator:n,poll:{required:!0,refresh:this.remediation.refresh}})}},{key:"getValuesAfterProceed",value:function(){var e=this;return Object.keys(this.values).filter((function(e){return"startPolling"!==e})).reduce((function(t,n){return Object.assign(Object.assign({},t),qi({},n,e.values[n]))}),{})}}]),o}(Pi);Vi.remediationName="enroll-poll";var Wi=function(e){c(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=p(t);if(n){var o=p(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return h(this,e)});function o(){return s(this,o),r.apply(this,arguments)}return V(o,[{key:"canRemediate",value:function(){return Boolean(this.values.channel)}},{key:"getNextStep",value:function(e){var t=Ci(p(o.prototype),"getNextStep",this).call(this),n=this.getChannels(),r=e.currentAuthenticator.value;return Object.assign(Object.assign(Object.assign({},t),n&&{options:n}),{authenticator:r})}},{key:"getChannels",value:function(){var e;return null===(e=Ai(this.remediation).value.form.value.find((function(e){return"channel"===e.name})))||void 0===e?void 0:e.options}},{key:"getData",value:function(){return{authenticator:{id:this.remediation.value[0].value.form.value[0].value,channel:this.values.channel},stateHandle:this.values.stateHandle}}},{key:"getValuesAfterProceed",value:function(){var e=this;return Object.keys(this.values).filter((function(e){return"channel"!==e})).reduce((function(t,n){return Object.assign(Object.assign({},t),qi({},n,e.values[n]))}),{})}}]),o}(Pi);Wi.remediationName="select-enrollment-channel";var Gi=function(e){c(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=p(t);if(n){var o=p(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return h(this,e)});function o(){var e;return s(this,o),(e=r.apply(this,arguments)).map={email:[],phoneNumber:[]},e}return V(o,[{key:"getInputEmail",value:function(){return[{name:"email",type:"string",required:!0,label:"Email"}]}},{key:"getInputPhoneNumber",value:function(){return[{name:"phoneNumber",type:"string",required:!0,label:"Phone Number"}]}},{key:"canRemediate",value:function(){return Boolean(this.values.email||this.values.phoneNumber)}},{key:"getNextStep",value:function(e){var t=Ci(p(o.prototype),"getNextStep",this).call(this),n=e.currentAuthenticator.value;return Object.assign(Object.assign({},t),{authenticator:n})}},{key:"getData",value:function(){return{stateHandle:this.values.stateHandle,email:this.values.email,phoneNumber:this.values.phoneNumber}}},{key:"getValuesAfterProceed",value:function(){var e=this;return Object.keys(this.values).filter((function(e){return!["email","phoneNumber"].includes(e)})).reduce((function(t,n){return Object.assign(Object.assign({},t),qi({},n,e.values[n]))}),{})}}]),o}(Pi);Gi.remediationName="enrollment-channel-data";var Ji=function(e){c(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=p(t);if(n){var o=p(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return h(this,e)});function o(){return s(this,o),r.apply(this,arguments)}return o}(Hi);Ji.remediationName="challenge-authenticator";var zi=function(e){c(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=p(t);if(n){var o=p(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return h(this,e)});function o(){return s(this,o),r.apply(this,arguments)}return o}(Vi);zi.remediationName="challenge-poll";var $i=function(e){c(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=p(t);if(n){var o=p(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return h(this,e)});function o(){return s(this,o),r.apply(this,arguments)}return o}(Hi);$i.remediationName="reset-authenticator";var Qi=function(e){c(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=p(t);if(n){var o=p(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return h(this,e)});function o(){var e;return s(this,o),(e=r.apply(this,arguments)).map={userProfile:[]},e}return V(o,[{key:"canRemediate",value:function(){var e=this.getData().userProfile;return this.remediation.value.find((function(e){return"userProfile"===e.name})).form.value.reduce((function(t,n){return n.required&&(t=t&&!!e[n.name]),t}),!0)}},{key:"mapUserProfile",value:function(e){var t=this;return e.form.value.map((function(e){return e.name})).reduce((function(e,n){return t.values[n]?Object.assign(Object.assign({},e),qi({},n,t.values[n])):e}),{})}},{key:"getInputUserProfile",value:function(e){return nr(e.form.value)}},{key:"getErrorMessages",value:function(e){return e.value[0].form.value.reduce((function(e,t){return t.messages&&e.push(t.messages.value[0].message),e}),[])}}]),o}(Pi);Qi.remediationName="enroll-profile";var Yi=function(e){c(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=p(t);if(n){var o=p(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return h(this,e)});function o(){var e;return s(this,o),(e=r.apply(this,arguments)).map={identifier:["username"],credentials:[],rememberMe:["rememberMe"]},e}return V(o,[{key:"canRemediate",value:function(){return!!this.getData().identifier}},{key:"mapCredentials",value:function(){return{passcode:this.values.password}}},{key:"getInputCredentials",value:function(e){return Object.assign(Object.assign({},e.form.value[0]),{name:"password",required:e.required})}}]),o}(Pi);Yi.remediationName="identify";var Xi=function(e){c(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=p(t);if(n){var o=p(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return h(this,e)});function o(){var e;return s(this,o),(e=r.apply(this,arguments)).map={credentials:[]},e}return V(o,[{key:"mapCredentials",value:function(){return{passcode:this.values.newPassword}}},{key:"getInputCredentials",value:function(e){var t="password"===this.getAuthenticator().type?"newPassword":"verificationCode";return Object.assign(Object.assign({},e.form.value[0]),{name:t})}}]),o}(Pi);Xi.remediationName="reenroll-authenticator";var Zi=function(e){c(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=p(t);if(n){var o=p(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return h(this,e)});function o(){return s(this,o),r.apply(this,arguments)}return V(o,[{key:"canRemediate",value:function(){return!1}},{key:"getNextStep",value:function(){var e=this.remediation;return{name:e.name,type:e.type,idp:e.idp,href:e.href}}}]),o}(Pi);function ea(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Zi.remediationName="redirect-idp";var ta=function(e){c(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=p(t);if(n){var o=p(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return h(this,e)});function o(){var e;return s(this,o),(e=r.apply(this,arguments)).map={authenticator:[]},e}return V(o,[{key:"findMatchedOption",value:function(e,t){var n,r,o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ea(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ea(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}(e);try{var i=function(){var e=r.value;if(n=t.find((function(t){return t.relatesTo.key===e.key})))return"break"};for(o.s();!(r=o.n()).done&&"break"!==i(););}catch(e){o.e(e)}finally{o.f()}return n}},{key:"canRemediate",value:function(){var e=this.values.authenticators,t=Ai(this.remediation).options;return!(!e||!e.length||!this.findMatchedOption(e,t))}},{key:"getNextStep",value:function(){var e=Ci(p(o.prototype),"getNextStep",this).call(this),t=Ai(this.remediation).options.map((function(e){return{label:e.label,value:e.relatesTo.key}}));return Object.assign(Object.assign({},e),{options:t})}},{key:"mapAuthenticator",value:function(e){var t=this.values.authenticators,n=e.options,r=this.findMatchedOption(t,n);return this.selectedAuthenticator=r.relatesTo,this.selectedOption=r,{id:null==r?void 0:r.value.form.value.find((function(e){return"id"===e.name})).value}}},{key:"getInputAuthenticator",value:function(){return{name:"authenticator",key:"string"}}},{key:"getValuesAfterProceed",value:function(){var e=this;this.values=Ci(p(o.prototype),"getValuesAfterProceed",this).call(this);var t=this.values.authenticators.filter((function(t){return t.key!==e.selectedAuthenticator.key}));return Object.assign(Object.assign({},this.values),{authenticators:t})}}]),o}(Pi);var na=function(e){c(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=p(t);if(n){var o=p(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return h(this,e)});function o(e){var t,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s(this,o),t=r.call(this,e,i);var a=null===(n=Ai(e).options)||void 0===n?void 0:n.some((function(e){var t=e.relatesTo;return(null==t?void 0:t.key)===Kt.OKTA_PASSWORD}));return a&&("recoverPassword"===t.values.flow||t.values.password)&&(t.values.authenticators=[].concat(nr(t.values.authenticators||[]),[{key:Kt.OKTA_PASSWORD}])),t}return o}(ta);na.remediationName="select-authenticator-authenticate";var ra=function(e){c(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=p(t);if(n){var o=p(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return h(this,e)});function o(){return s(this,o),r.apply(this,arguments)}return o}(ta);ra.remediationName="select-authenticator-enroll";var oa=function(e){c(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=p(t);if(n){var o=p(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return h(this,e)});function o(){var e;return s(this,o),(e=r.apply(this,arguments)).map={authenticator:[],identifier:["username"]},e}return V(o,[{key:"canRemediate",value:function(){return!!this.getData("identifier")&&Ci(p(o.prototype),"canRemediate",this).call(this)}},{key:"mapAuthenticator",value:function(e){var t,n,r,i=Ci(p(o.prototype),"mapAuthenticator",this).call(this,e),a=null===(t=this.selectedOption)||void 0===t?void 0:t.value.form.value.find((function(e){return"methodType"===e.name})),s=this.values.methodType||(null==a?void 0:a.value)||(null===(r=null===(n=null==a?void 0:a.options)||void 0===n?void 0:n[0])||void 0===r?void 0:r.value);return s?Object.assign(Object.assign({},i),{methodType:s}):i}},{key:"getInputUsername",value:function(){return{name:"username",key:"string"}}}]),o}(ta);oa.remediationName="select-authenticator-unlock-account";var ia=function(e){c(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=p(t);if(n){var o=p(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return h(this,e)});function o(){return s(this,o),r.apply(this,arguments)}return V(o,[{key:"canRemediate",value:function(){return!0}}]),o}(Pi);ia.remediationName="select-enroll-profile";var aa=function(e){c(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=p(t);if(n){var o=p(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return h(this,e)});function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return s(this,o),(t=r.call(this,e,n)).map={authenticator:[]},t.authenticator=t.getAuthenticator(),t.formatAuthenticatorData(),t}return V(o,[{key:"formatAuthenticatorData",value:function(){var e=this;if(this.getAuthenticatorData())this.values.authenticatorsData=this.values.authenticatorsData.map((function(t){return t.key===e.authenticator.key?e.mapAuthenticatorDataFromValues(t):t}));else{var t=this.mapAuthenticatorDataFromValues();t&&this.values.authenticatorsData.push(t)}}},{key:"getAuthenticatorData",value:function(){var e=this;return this.values.authenticatorsData.find((function(t){return t.key===e.authenticator.key}))}},{key:"canRemediate",value:function(){var e=this;return this.values.authenticatorsData.some((function(t){return t.key===e.authenticator.key}))}},{key:"getNextStep",value:function(){var e=Ci(p(o.prototype),"getNextStep",this).call(this),t=this.getMethodTypes();return Object.assign(Object.assign({},e),t&&{options:t})}},{key:"mapAuthenticatorDataFromValues",value:function(e){var t=this.values.methodType,n=Object.assign(Object.assign({key:this.authenticator.key},e&&e),t&&{methodType:t});return n.methodType?n:null}},{key:"getAuthenticatorFromRemediation",value:function(){return this.remediation.value.find((function(e){return"authenticator"===e.name}))}},{key:"getMethodTypes",value:function(){var e;return null===(e=this.getAuthenticatorFromRemediation().form.value.find((function(e){return"methodType"===e.name})))||void 0===e?void 0:e.options}},{key:"getValuesAfterProceed",value:function(){var e=this;this.values=Ci(p(o.prototype),"getValuesAfterProceed",this).call(this);var t=this.values.authenticatorsData.filter((function(t){return t.key!==e.authenticator.key}));return Object.assign(Object.assign({},this.values),{authenticatorsData:t})}}]),o}(Pi);var sa=function(e){c(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=p(t);if(n){var o=p(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return h(this,e)});function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return s(this,o),(t=r.call(this,e,n)).shouldProceedWithEmailAuthenticator=1===t.authenticator.methods.length&&"email"===t.authenticator.methods[0].type,t}return V(o,[{key:"canRemediate",value:function(){return!!this.shouldProceedWithEmailAuthenticator||Ci(p(o.prototype),"canRemediate",this).call(this)}},{key:"mapAuthenticator",value:function(){var e,t,n=this.getAuthenticatorData(),r=this.getAuthenticatorFromRemediation();return this.shouldProceedWithEmailAuthenticator?null===(e=r.form)||void 0===e?void 0:e.value.reduce((function(e,t){if(t.value)e[t.name]=t.value;else{if(!t.options)throw new b("Unsupported authenticator data type: ".concat(t));e[t.name]=t.options[0].value}return e}),{}):{id:r.form.value.find((function(e){return"id"===e.name})).value,enrollmentId:null===(t=r.form.value.find((function(e){return"enrollmentId"===e.name})))||void 0===t?void 0:t.value,methodType:null==n?void 0:n.methodType}}},{key:"getInputAuthenticator",value:function(){var e=this.getAuthenticatorFromRemediation(),t=e.form.value.find((function(e){return"methodType"===e.name}));return t&&t.options?{name:"methodType",type:"string",required:!0}:nr(e.form.value)}}]),o}(aa);sa.remediationName="authenticator-verification-data";var ua=function(e){c(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=p(t);if(n){var o=p(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return h(this,e)});function o(){return s(this,o),r.apply(this,arguments)}return V(o,[{key:"mapAuthenticator",value:function(){var e=this.getAuthenticatorData();return{id:Ai(this.remediation).form.value.find((function(e){return"id"===e.name})).value,methodType:e.methodType,phoneNumber:e.phoneNumber}}},{key:"getInputAuthenticator",value:function(){return[{name:"methodType",type:"string",required:!0},{name:"phoneNumber",type:"string",required:!0,label:"Phone Number"}]}},{key:"mapAuthenticatorDataFromValues",value:function(e){e=Ci(p(o.prototype),"mapAuthenticatorDataFromValues",this).call(this,e);var t=this.values.phoneNumber;return(e=Object.assign(Object.assign({},e&&e),t&&{phoneNumber:t})).phoneNumber&&e.methodType?e:null}}]),o}(aa);ua.remediationName="authenticator-enrollment-data";var ca=function(e){c(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=p(t);if(n){var o=p(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return h(this,e)});function o(){var e;return s(this,o),(e=r.apply(this,arguments)).map={skip:["skip"]},e}return V(o,[{key:"canRemediate",value:function(){return!!this.values.skip}}]),o}(Pi);function la(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return fa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fa(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function fa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}ca.remediationName="skip";function ha(e,t,n){var r,o=n.remediators;if(n.step){var i=e.find((function(e){return e.name===n.step}));return new(0,o[i.name])(i,t)}var a,s=[],u=la(e);try{for(u.s();!(a=u.n()).done;){var c=a.value;if(Object.keys(o).includes(c.name)){if((r=new(0,o[c.name])(c,t)).canRemediate())return r;s.push(r)}}}catch(e){u.e(e)}finally{u.f()}return s[0]}function pa(e){var t=e.neededToProceed,n=e.interactionCode;return!t.length&&!n}function da(e){var t,n=[],r=e.rawIdxState,o=e.neededToProceed,i=null===(t=r.messages)||void 0===t?void 0:t.value.map((function(e){return e}));i&&(n=[].concat(nr(n),nr(i)));var a,s=la(o);try{for(s.s();!(a=s.n()).done;){var u=a.value,c=Pi.getMessages(u);c&&(n=[].concat(nr(n),nr(c)))}}catch(e){s.e(e)}finally{s.f()}return n}function va(e,t){var n=e.getNextStep(t.context),r=function(e){return e.neededToProceed.some((function(e){return"skip"===e.name}))}(t),o=function(e){return Object.keys(e.actions).some((function(e){return e.includes("resend")}))}(t);return Object.assign(Object.assign(Object.assign({},n),r&&{canSkip:r}),o&&{canResend:o})}function ya(e,t){var n=lo(e)?e:null;if(!n)throw e;var r=pa(n),o=da(n);if(r)return{terminal:r,messages:o};var i=t&&va(t,n);return Object.assign({messages:o},i&&{nextStep:i})}function ga(e,t){return Object.keys(t.actions).find((function(t){return!!e.resend&&t.includes("-resend")}))}function ma(e){return e.resend=void 0,e}function ka(e,t,n){return r=this,o=void 0,i=void 0,a=G().mark((function r(){var o,i,a,s,u,c,f,h,p,d,v,y,g,m,k,w,T,S;return G().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=(o=e).neededToProceed,a=o.interactionCode,s=n.remediators,u=n.flow,!a){r.next=4;break}return r.abrupt("return",{idxResponse:e});case 4:if(c=pa(e),f=da(e),!c){r.next=8;break}return r.abrupt("return",{terminal:c,messages:f});case 8:if(h=ga(t,e),!(p=[].concat(nr(n.actions||[]),nr(h&&[h]||[])))){r.next=30;break}d=la(p),r.prev=12,y=G().mark((function r(){var o,a;return G().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o=v.value,a=ma(t),"function"!=typeof e.actions[o]){r.next=15;break}return r.prev=3,r.next=6,e.actions[o]();case 6:e=r.sent,r.next=12;break;case 9:return r.prev=9,r.t0=r.catch(3),r.abrupt("return",{v:ya(r.t0,s)});case 12:if("cancel"!==o){r.next=14;break}return r.abrupt("return",{v:{canceled:!0}});case 14:return r.abrupt("return",{v:ka(e,a,n)});case 15:if(!i.find((function(e){return e.name===o}))){r.next=27;break}return r.prev=17,r.next=20,e.proceed(o,{});case 20:e=r.sent,r.next=26;break;case 23:return r.prev=23,r.t1=r.catch(17),r.abrupt("return",{v:ya(r.t1,s)});case 26:return r.abrupt("return",{v:ka(e,t,n)});case 27:case"end":return r.stop()}}),r,null,[[3,9],[17,23]])})),d.s();case 15:if((v=d.n()).done){r.next=22;break}return r.delegateYield(y(),"t0",17);case 17:if("object"!==l(g=r.t0)){r.next=20;break}return r.abrupt("return",g.v);case 20:r.next=15;break;case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(12),d.e(r.t1);case 27:return r.prev=27,d.f(),r.finish(27);case 30:if((m=ha(i,t,n))||"default"!==u){r.next=33;break}return r.abrupt("return",{idxResponse:e});case 33:if(m){r.next=35;break}throw new b("\n      No remediation can match current flow, check policy settings in your org.\n      Remediations: [".concat(i.reduce((function(e,t){return e?e+" ,"+t.name:t.name}),""),"]\n    "));case 35:if(!f.length){r.next=38;break}return k=va(m,e),r.abrupt("return",{nextStep:k,messages:f});case 38:if(m.canRemediate()){r.next=41;break}return w=va(m,e),r.abrupt("return",{idxResponse:e,nextStep:w});case 41:return T=m.getName(),S=m.getData(),r.prev=43,r.next=46,e.proceed(T,S);case 46:return e=r.sent,t=m.getValuesAfterProceed(),r.abrupt("return",ka(e,t,n));case 51:return r.prev=51,r.t2=r.catch(43),r.abrupt("return",ya(r.t2,m));case 54:case"end":return r.stop()}}),r,null,[[12,24,27,30],[43,51]])})),new(i||(i=Promise))((function(e,t){function n(e){try{u(a.next(e))}catch(e){t(e)}}function s(e){try{u(a.throw(e))}catch(e){t(e)}}function u(t){var r;t.done?e(t.value):(r=t.value,r instanceof i?r:new i((function(e){e(r)}))).then(n,s)}u((a=a.apply(r,o||[])).next())}));var r,o,i,a}var ba={identify:Yi,"select-authenticator-authenticate":na,"select-authenticator-enroll":ra,"authenticator-enrollment-data":ua,"authenticator-verification-data":sa,"enroll-authenticator":Ki,"challenge-authenticator":Ji,"challenge-poll":zi,"reenroll-authenticator":Xi,"enroll-poll":Vi,"redirect-idp":Zi,skip:ca},wa={identify:Yi,"identify-recovery":Yi,"select-authenticator-authenticate":na,"select-authenticator-enroll":ra,"challenge-authenticator":Ji,"authenticator-verification-data":sa,"authenticator-enrollment-data":ua,"reset-authenticator":$i,"reenroll-authenticator":Xi,"enroll-poll":Vi},Ta={"select-enroll-profile":ia,"enroll-profile":Qi,"authenticator-enrollment-data":ua,"select-authenticator-enroll":ra,"enroll-poll":Vi,"select-enrollment-channel":Wi,"enrollment-channel-data":Gi,"enroll-authenticator":Ki,skip:ca},Sa={identify:Yi,"select-authenticator-unlock-account":oa,"select-authenticator-authenticate":na,"challenge-authenticator":Ji,"challenge-poll":zi,"authenticator-verification-data":sa};function xa(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",o=!0;switch(r){case"register":case"signup":case"enrollProfile":t=Ta,o=!1;break;case"recoverPassword":case"resetPassword":t=wa,n=["currentAuthenticator-recover","currentAuthenticatorEnrollment-recover"],o=!1;break;case"unlockAccount":t=Sa,o=!1,n=["unlock-account"];break;default:t=ba}return{flow:r,remediators:t,actions:n,withCredentials:o}}function Oa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ea=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};function _a(e){var t=[],n=e.actions,r=e.neededToProceed;return n["currentAuthenticator-recover"]&&t.push(qt.PASSWORD_RECOVERY),r.some((function(e){return"select-enroll-profile"===e.name}))&&t.push(qt.REGISTRATION),r.some((function(e){return"redirect-idp"===e.name}))&&t.push(qt.SOCIAL_IDP),r.some((function(e){return"unlock-account"===e.name}))&&t.push(qt.ACCOUNT_UNLOCK),t}function Aa(e){var t,n=[],r=Object.values(a).reduce((function(e,t){return t.remediationName&&(e[t.remediationName]=t),e}),{}),o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Oa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Oa(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}(e.neededToProceed);try{for(o.s();!(t=o.n()).done;){var i=t.value,s=r[i.name];if(s){var u=new s(i);n.push(u.getNextStep(e.context))}}}catch(e){o.e(e)}finally{o.f()}return n}function Ra(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ea(this,void 0,void 0,G().mark((function n(){var r,o,i,a,s,u,c,l,f,h,p,d,v,y,g,m,k,b,w,T,S,x,O,E,_,A,R,P,C,j,I,M,U,D,N,L,F,B,H,K,q,V,W,J,z,$,Q,Y;return G().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(l=Ht.PENDING,f=!1,h=!0,n.prev=3,g=t.flow,m=t.state,k=t.scopes,b=t.version,w=t.remediators,T=t.actions,S=t.withCredentials,x=t.exchangeCodeForTokens,O=t.autoRemediate,E=t.step,_=t.recoveryToken,A=t.activationToken,(g=g||e.idx.getFlow()||"default")&&(e.idx.setFlow(g),R=xa(e,g),S=void 0!==S?S:R.withCredentials,w=w||R.remediators,T=T||R.actions),v=vi(e,{state:m,recoveryToken:_,activationToken:A}),d=null==v?void 0:v.interactionHandle){n.next=17;break}return e.transactionManager.clear(),n.next=13,xi(e,{withCredentials:S,state:m,scopes:k,activationToken:A,recoveryToken:_});case 13:P=n.sent,d=P.interactionHandle,v=P.meta,S=v.withCredentials;case 17:return n.next=19,Ei(e,{withCredentials:S,version:b,interactionHandle:d});case 19:if(p=n.sent,u=_a(p),c=Aa(p),s=v,!1===O||!w&&!T){n.next=56;break}return C=Object.assign(Object.assign({},t),{stateHandle:p.rawIdxState.stateHandle}),n.next=27,ka(p,C,{remediators:w,actions:T,flow:g,step:E});case 27:if(j=n.sent,I=j.idxResponse,M=j.nextStep,U=j.terminal,D=j.canceled,N=j.messages,p=I||p,i=N,(o=M)&&(e.transactionManager.saveIdxResponse(p.rawIdxState),c=Aa(p)),U&&(l=Ht.TERMINAL,f=!0,h=!1),!D){n.next=43;break}l=Ht.CANCELED,f=!0,n.next=56;break;case 43:if(!(null==p?void 0:p.interactionCode)){n.next=56;break}if(y=p.interactionCode,!1!==x){n.next=50;break}l=Ht.SUCCESS,f=!1,n.next=56;break;case 50:return F=(L=v).clientId,B=L.codeVerifier,H=L.ignoreSignature,K=L.redirectUri,q=L.urls,V=L.scopes,n.next=53,e.token.exchangeCodeForTokens({interactionCode:y,clientId:F,codeVerifier:B,ignoreSignature:H,redirectUri:K,scopes:V},q);case 53:r=n.sent,l=Ht.SUCCESS,f=!0;case 56:n.next=67;break;case 58:if(n.prev=58,n.t0=n.catch(3),!lo(n.t0)){n.next=66;break}a=n.t0,l=Ht.FAILURE,f=!0,n.next=67;break;case 66:throw n.t0;case 67:return f?e.transactionManager.clear({clearSharedStorage:h}):(null==s?void 0:s.state)&&gi(e,Object.assign({},s)),J=(W=p||{}).actions,z=W.context,$=W.neededToProceed,Q=W.proceed,Y=W.rawIdxState,n.abrupt("return",Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({status:l},s&&{meta:s}),u&&{enabledFeatures:u}),c&&{availableSteps:c}),r&&{tokens:r.tokens}),o&&{nextStep:o}),i&&{messages:i}),a&&{error:a}),{interactionCode:y,actions:J,context:z,neededToProceed:$,proceed:Q,rawIdxState:Y}));case 70:case"end":return n.stop()}}),n,null,[[3,58]])})))}var Pa=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};function Ca(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Pa(this,void 0,void 0,G().mark((function n(){return G().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.password&&!t.authenticator&&(t.authenticator=Kt.OKTA_PASSWORD),n.abrupt("return",Ra(e,Object.assign(Object.assign({},t),{flow:"authenticate"})));case 2:case"end":return n.stop()}}),n)})))}function ja(e,t){return n=this,r=void 0,o=void 0,i=G().mark((function n(){var r,o;return G().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.transactionManager.load(),o=xa(e,r.flow),n.abrupt("return",Ra(e,Object.assign(Object.assign(Object.assign({},t),o),{actions:["cancel"]})));case 3:case"end":return n.stop()}}),n)})),new(o||(o=Promise))((function(e,t){function a(e){try{u(i.next(e))}catch(e){t(e)}}function s(e){try{u(i.throw(e))}catch(e){t(e)}}function u(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(a,s)}u((i=i.apply(n,r||[])).next())}));var n,r,o,i}var Ia=function(e){c(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=p(t);if(n){var o=p(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return h(this,e)});function o(e,t){var n;return s(this,o),(n=r.call(this,"Enter the OTP code in the originating client: ".concat(t))).name="EmailVerifyCallbackError",n.state=e,n.otp=t,n}return o}(g);function Ma(e){return"EmailVerifyCallbackError"===e.name}function Ua(e){return/(otp=)/i.test(e)&&/(state=)/i.test(e)}function Da(e){return Yt(e)}function Na(e,t){return n=this,r=void 0,o=void 0,i=G().mark((function n(){var r,o,i;return G().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!Ua(t)){n.next=9;break}if(r=Da(t),o=r.state,i=r.otp,!e.idx.canProceed({state:o})){n.next=8;break}return n.next=5,e.idx.proceed({state:o,otp:i});case 5:return n.abrupt("return",n.sent);case 8:throw new Ia(o,i);case 9:case"end":return n.stop()}}),n)})),new(o||(o=Promise))((function(e,t){function a(e){try{u(i.next(e))}catch(e){t(e)}}function s(e){try{u(i.throw(e))}catch(e){t(e)}}function u(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(a,s)}u((i=i.apply(n,r||[])).next())}));var n,r,o,i}var La=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};function Fa(e,t){return!!vi(e,t)}function Ba(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return La(this,void 0,void 0,G().mark((function n(){var r,o,i;return G().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t.state,o=vi(e,{state:r})){n.next=4;break}throw new b("Unable to proceed: saved transaction could not be loaded");case 4:return i=null==o?void 0:o.flow,n.abrupt("return",Ra(e,Object.assign(Object.assign({},t),{flow:i})));case 6:case"end":return n.stop()}}),n)})))}var Ha=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};function Ka(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ha(this,void 0,void 0,G().mark((function r(){var o,i,a;return G().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Ba(e,{startPolling:!0});case 2:if(o=r.sent,i=vi(e),(null==(a=null===(t=null==i?void 0:i.remediations)||void 0===t?void 0:t.find((function(e){return e.includes("poll")})))?void 0:a.length)||Kn("No polling remediations available at the current IDX flow stage"),!Number.isInteger(n.refresh)){r.next=8;break}return r.abrupt("return",new Promise((function(t,r){setTimeout((function(){var n,i;return Ha(this,void 0,void 0,G().mark((function a(){var s;return G().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:try{s=null===(i=null===(n=o.nextStep)||void 0===n?void 0:n.poll)||void 0===i?void 0:i.refresh,t(s?Ka(e,{refresh:s}):o)}catch(e){r(e)}case 1:case"end":return a.stop()}}),a)})))}),n.refresh)})));case 8:return r.abrupt("return",o);case 9:case"end":return r.stop()}}),r)})))}var qa=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};function Va(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return qa(this,void 0,void 0,G().mark((function n(){return G().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.transactionManager.clear(),n.abrupt("return",Ra(e,Object.assign({exchangeCodeForTokens:!1},t)));case 2:case"end":return n.stop()}}),n)})))}var Wa=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};function Ga(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Wa(this,void 0,void 0,G().mark((function n(){var r,o,i;return G().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(di(e)){n.next=12;break}return n.next=3,Va(e,Object.assign(Object.assign({},t),{flow:"register",autoRemediate:!1}));case 3:if(r=n.sent,o=r.enabledFeatures,i=r.availableSteps,t.activationToken||!o||o.includes(qt.REGISTRATION)){n.next=9;break}throw new b("Registration is not supported based on your current org configuration.");case 9:if(!t.activationToken||!(null==i?void 0:i.some((function(e){return"identify"===e.name})))){n.next=12;break}throw new b("activationToken is not supported based on your current org configuration.");case 12:return n.abrupt("return",Ra(e,Object.assign(Object.assign({},t),{flow:"register"})));case 13:case"end":return n.stop()}}),n)})))}var Ja=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};function za(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ja(this,void 0,void 0,G().mark((function n(){var r;return G().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=xa(e,"recoverPassword"),n.abrupt("return",Ra(e,Object.assign(Object.assign({},t),r)));case 2:case"end":return n.stop()}}),n)})))}function $a(e,t){return n=this,r=void 0,o=void 0,i=G().mark((function n(){var r,o,i,a,s,u,c,l,f,h;return G().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.transactionManager.load()){n.next=3;break}throw new b("No transaction data was found in storage");case 3:if(o=r.codeVerifier,i=r.state,a=new URL(t),s=a.searchParams,u=s.get("state"),c=s.get("interaction_code"),!(l=s.get("error"))){n.next=10;break}throw new w(l,s.get("error_description"));case 10:if(u===i){n.next=12;break}throw new b("State in redirect uri does not match with transaction state");case 12:if(c){n.next=14;break}throw new b("Unable to parse interaction_code from the url");case 14:return n.next=16,e.token.exchangeCodeForTokens({interactionCode:c,codeVerifier:o});case 16:f=n.sent,h=f.tokens,e.tokenManager.setTokens(h);case 19:case"end":return n.stop()}}),n)})),new(o||(o=Promise))((function(e,t){function a(e){try{u(i.next(e))}catch(e){t(e)}}function s(e){try{u(i.throw(e))}catch(e){t(e)}}function u(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(a,s)}u((i=i.apply(n,r||[])).next())}));var n,r,o,i}var Qa=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};function Ya(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Qa(this,void 0,void 0,G().mark((function n(){var r,o;return G().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.flow="unlockAccount",di(e)){n.next=8;break}return n.next=4,Va(e,Object.assign(Object.assign({},t),{autoRemediate:!1}));case 4:if(r=n.sent,!(o=r.enabledFeatures)||o.includes(qt.ACCOUNT_UNLOCK)){n.next=8;break}throw new b("Self Service Account Unlock is not supported based on your current org configuration.");case 8:return n.abrupt("return",Ra(e,Object.assign({},t)));case 9:case"end":return n.stop()}}),n)})))}var Xa=function(){function e(){s(this,e),this.environments=["okta-auth-js/".concat("6.2.0")]}return V(e,[{key:"addEnvironment",value:function(e){this.environments.push(e)}},{key:"getHttpHeader",value:function(){return this.maybeAddNodeEnvironment(),{"X-Okta-User-Agent-Extended":this.environments.join(" ")}}},{key:"getVersion",value:function(){return"6.2.0"}},{key:"maybeAddNodeEnvironment",value:function(){if(!mt()&&process&&process.versions){var e=process.versions.node;this.environments.push("nodejs/".concat(e))}}}]),e}(),Za=n(279),es=n.n(Za),ts=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},ns=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},rs=function(){function e(t){var n=this;s(this,e);var r=this.options=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return go(e),N({issuer:Oe((e=Oo(xo(),e)).issuer),tokenUrl:Oe(e.tokenUrl),authorizeUrl:Oe(e.authorizeUrl),userinfoUrl:Oe(e.userinfoUrl),revokeUrl:Oe(e.revokeUrl),logoutUrl:Oe(e.logoutUrl),clientId:e.clientId,redirectUri:e.redirectUri,state:e.state,scopes:e.scopes,postLogoutRedirectUri:e.postLogoutRedirectUri,responseMode:e.responseMode,responseType:e.responseType,pkce:!1!==e.pkce,useInteractionCodeFlow:e.useInteractionCodeFlow,httpRequestClient:e.httpRequestClient,transformErrorXHR:e.transformErrorXHR,transformAuthState:e.transformAuthState,restoreOriginalUri:e.restoreOriginalUri,storageUtil:e.storageUtil,headers:e.headers,devMode:!!e.devMode,storageManager:e.storageManager,transactionManager:e.transactionManager,cookies:So(e,Et()),flow:e.flow,codeChallenge:e.codeChallenge,codeChallengeMethod:e.codeChallengeMethod,recoveryToken:e.recoveryToken,activationToken:e.activationToken,ignoreSignature:!!e.ignoreSignature,clientSecret:e.clientSecret})}(t);this.storageManager=new uo(r.storageManager,r.cookies,r.storageUtil),this.transactionManager=new yo(Object.assign({storageManager:this.storageManager},r.transactionManager)),this._oktaUserAgent=new Xa,this.tx={status:Le.bind(null,this),resume:Fe.bind(null,this),exists:Object.assign(Ke.bind(null,this),{_get:function(e){return r.storageUtil.storage.get(e)}}),introspect:Be.bind(null,this)},this.pkce={DEFAULT_CODE_CHALLENGE_METHOD:We.DEFAULT_CODE_CHALLENGE_METHOD,generateVerifier:We.generateVerifier,computeChallenge:We.computeChallenge},Object.assign(this.options.storageUtil,{getPKCEStorage:this.storageManager.getLegacyPKCEStorage.bind(this.storageManager),getHttpCache:this.storageManager.getHttpCache.bind(this.storageManager)}),this._pending={handleLogin:!1},mt()&&(this.options=Object.assign(this.options,{redirectUri:Te(t.redirectUri,window.location.origin)})),t.maxClockSkew||0===t.maxClockSkew?this.options.maxClockSkew=t.maxClockSkew:this.options.maxClockSkew=$,this.options.ignoreLifetime=!!t.ignoreLifetime,this.session={close:ze.bind(null,this),exists:Ge.bind(null,this),get:Je.bind(null,this),refresh:$e.bind(null,this),setCookieAndRedirect:Qe.bind(null,this)},this._tokenQueue=new Xr;var o=function(e){return Xr.prototype.push.bind(n._tokenQueue,e,null)},i=o(_n.bind(null,this)),a=Object.assign(i,{_setLocation:function(e){window.location=e}}),u=o(Cn.bind(null,this)),c=Object.assign(u,{_getHistory:function(){return window.history},_getLocation:function(){return window.location},_getDocument:function(){return window.document}});this.token={prepareTokenParams:zt.bind(null,this),exchangeCodeForTokens:pn.bind(null,this),getWithoutPrompt:mn.bind(null,this),getWithPopup:On.bind(null,this),getWithRedirect:a,parseFromUrl:c,decode:fn,revoke:hn.bind(null,this),renew:Tn.bind(null,this),renewTokensWithRefresh:kn.bind(null,this),renewTokens:Sn.bind(null,this),getUserInfo:xn.bind(null,this),verify:dn.bind(null,this),isLoginRedirect:Lt.bind(null,this)};var l=["decode","isLoginRedirect","getWithRedirect","parseFromUrl"];Object.keys(this.token).forEach((function(e){if(!(l.indexOf(e)>=0)){var t=n.token[e];n.token[e]=Xr.prototype.push.bind(n._tokenQueue,t,null)}}));var f,h,p=Va.bind(null,this);this.idx={interact:xi.bind(null,this),introspect:Ei.bind(null,this),authenticate:Ca.bind(null,this),register:Ga.bind(null,this),start:p,startTransaction:p,poll:Ka.bind(null,this),proceed:Ba.bind(null,this),cancel:ja.bind(null,this),recoverPassword:za.bind(null,this),handleInteractionCodeRedirect:$a.bind(null,this),isInteractionRequired:Ft.bind(null,this),isInteractionRequiredError:Rt,handleEmailVerifyCallback:Na.bind(null,this),isEmailVerifyCallback:Ua,parseEmailVerifyCallback:Da,isEmailVerifyCallbackError:Ma,getSavedTransactionMeta:vi.bind(null,this),createTransactionMeta:pi.bind(null,this),getTransactionMeta:yi.bind(null,this),saveTransactionMeta:gi.bind(null,this),clearTransactionMeta:mi.bind(null,this),isTransactionMetaValid:ki,setFlow:function(e){n.options.flow=e},getFlow:function(){return n.options.flow},canProceed:Fa.bind(null,this),unlockAccount:Ya.bind(null,this)},h=this,f=function(e){var t=h._oktaUserAgent.getHttpHeader(),n=Object.assign(Object.assign({},t),h.options.headers);Object.keys(n).forEach((function(t){(h.options.clientSecret||"X-Device-Token"!==t)&&(e.headers[t]=n[t])}))},fi.client.interceptors.request.use(f),this.http={setRequestHeader:ve.bind(null,this)},this.fingerprint=Zr.bind(null,this),this.emitter=new(es()),this.tokenManager=new tr(this,t.tokenManager),this.authStateManager=new io(this),this.serviceManager=new Qr(this,t.services)}return V(e,[{key:"start",value:function(){this.tokenManager.start(),this.token.isLoginRedirect()||this.authStateManager.updateAuthState(),this.serviceManager.start()}},{key:"stop",value:function(){this.tokenManager.stop(),this.serviceManager.stop()}},{key:"setHeaders",value:function(e){this.options.headers=Object.assign({},this.options.headers,e)}},{key:"signIn",value:function(e){return ts(this,void 0,void 0,G().mark((function t(){return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.signInWithCredentials(e));case 1:case"end":return t.stop()}}),t,this)})))}},{key:"signInWithCredentials",value:function(e){return ts(this,void 0,void 0,G().mark((function t(){var n,r=this;return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=L(e||{}),n=function(t){return delete e.sendFingerprint,qe(r,"/api/v1/authn",e,t)},e.sendFingerprint){t.next=4;break}return t.abrupt("return",n());case 4:return t.abrupt("return",this.fingerprint().then((function(e){return n({headers:{"X-Device-Fingerprint":e}})})));case 5:case"end":return t.stop()}}),t,this)})))}},{key:"signInWithRedirect",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ts(this,void 0,void 0,G().mark((function t(){var n,r,o;return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.originalUri,r=ns(e,["originalUri"]),!this._pending.handleLogin){t.next=3;break}return t.abrupt("return");case 3:return this._pending.handleLogin=!0,t.prev=4,n&&this.setOriginalUri(n),o=Object.assign({scopes:this.options.scopes||["openid","email","profile"]},r),t.next=9,this.token.getWithRedirect(o);case 9:return t.prev=9,this._pending.handleLogin=!1,t.finish(9);case 12:case"end":return t.stop()}}),t,this,[[4,,9,12]])})))}},{key:"closeSession",value:function(){var e=this;return this.session.close().then((function(){return ts(e,void 0,void 0,G().mark((function e(){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.tokenManager.clear();case 1:case"end":return e.stop()}}),e,this)})))})).catch((function(e){if("AuthApiError"===e.name&&"E0000007"===e.errorCode)return null;throw e}))}},{key:"revokeAccessToken",value:function(e){return ts(this,void 0,void 0,G().mark((function t(){var n;return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=6;break}return t.next=3,this.tokenManager.getTokens();case 3:e=t.sent.accessToken,n=this.tokenManager.getStorageKeyByType("accessToken"),this.tokenManager.remove(n);case 6:if(e){t.next=8;break}return t.abrupt("return",Promise.resolve(null));case 8:return t.abrupt("return",this.token.revoke(e));case 9:case"end":return t.stop()}}),t,this)})))}},{key:"revokeRefreshToken",value:function(e){return ts(this,void 0,void 0,G().mark((function t(){var n;return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=6;break}return t.next=3,this.tokenManager.getTokens();case 3:e=t.sent.refreshToken,n=this.tokenManager.getStorageKeyByType("refreshToken"),this.tokenManager.remove(n);case 6:if(e){t.next=8;break}return t.abrupt("return",Promise.resolve(null));case 8:return t.abrupt("return",this.token.revoke(e));case 9:case"end":return t.stop()}}),t,this)})))}},{key:"getSignOutRedirectUrl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.idToken,n=e.postLogoutRedirectUri,r=e.state;if(t||(t=this.tokenManager.getTokensSync().idToken),!t)return"";n||(n=this.options.postLogoutRedirectUri);var o=yt(this).logoutUrl,i=t.idToken,a=o+"?id_token_hint="+encodeURIComponent(i);return n&&(a+="&post_logout_redirect_uri="+encodeURIComponent(n)),r&&(a+="&state="+encodeURIComponent(r)),a}},{key:"signOut",value:function(e){return ts(this,void 0,void 0,G().mark((function t(){var n,r,o,i,a,s,u,c;return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=Object.assign({},e),n=window.location.origin,r=window.location.href,o=e.postLogoutRedirectUri||this.options.postLogoutRedirectUri||n,i=e.accessToken,a=e.refreshToken,s=!1!==e.revokeAccessToken,(u=!1!==e.revokeRefreshToken)&&void 0===a&&(a=this.tokenManager.getTokensSync().refreshToken),s&&void 0===i&&(i=this.tokenManager.getTokensSync().accessToken),e.idToken||(e.idToken=this.tokenManager.getTokensSync().idToken),!u||!a){t.next=14;break}return t.next=14,this.revokeRefreshToken(a);case 14:if(!s||!i){t.next=17;break}return t.next=17,this.revokeAccessToken(i);case 17:if(c=this.getSignOutRedirectUrl(Object.assign(Object.assign({},e),{postLogoutRedirectUri:o}))){t.next=22;break}return t.abrupt("return",this.closeSession().then((function(){o===r?window.location.reload():window.location.assign(o)})));case 22:e.clearTokensBeforeRedirect?this.tokenManager.clear():this.tokenManager.addPendingRemoveFlags(),window.location.assign(c);case 24:case"end":return t.stop()}}),t,this)})))}},{key:"webfinger",value:function(e){return _e(this,"/.well-known/webfinger"+xe(e),{headers:{Accept:"application/jrd+json"}})}},{key:"isAuthenticated",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ts(this,void 0,void 0,G().mark((function t(){var n,r,o,i,a,s,u,c,l;return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.tokenManager.getOptions(),r=n.autoRenew,o=n.autoRemove,i=e.onExpiredToken?"renew"===e.onExpiredToken:r,a=e.onExpiredToken?"remove"===e.onExpiredToken:o,s=this.tokenManager.getTokensSync(),!(u=s.accessToken)||!this.tokenManager.hasExpired(u)){t.next=18;break}if(u=void 0,!i){t.next=17;break}return t.prev=7,t.next=10,this.tokenManager.renew("accessToken");case 10:u=t.sent,t.next=15;break;case 13:t.prev=13,t.t0=t.catch(7);case 15:t.next=18;break;case 17:a&&this.tokenManager.remove("accessToken");case 18:if(c=this.tokenManager.getTokensSync(),!(l=c.idToken)||!this.tokenManager.hasExpired(l)){t.next=33;break}if(l=void 0,!i){t.next=32;break}return t.prev=22,t.next=25,this.tokenManager.renew("idToken");case 25:l=t.sent,t.next=30;break;case 28:t.prev=28,t.t1=t.catch(22);case 30:t.next=33;break;case 32:a&&this.tokenManager.remove("idToken");case 33:return t.abrupt("return",!(!u||!l));case 34:case"end":return t.stop()}}),t,this,[[7,13],[22,28]])})))}},{key:"getUser",value:function(){return ts(this,void 0,void 0,G().mark((function e(){var t,n,r;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.tokenManager.getTokensSync(),n=t.idToken,r=t.accessToken,e.abrupt("return",this.token.getUserInfo(r,n));case 2:case"end":return e.stop()}}),e,this)})))}},{key:"getIdToken",value:function(){var e=this.tokenManager.getTokensSync().idToken;return e?e.idToken:void 0}},{key:"getAccessToken",value:function(){var e=this.tokenManager.getTokensSync().accessToken;return e?e.accessToken:void 0}},{key:"getRefreshToken",value:function(){var e=this.tokenManager.getTokensSync().refreshToken;return e?e.refreshToken:void 0}},{key:"storeTokensFromRedirect",value:function(){return ts(this,void 0,void 0,G().mark((function e(){var t,n;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.token.parseFromUrl();case 2:t=e.sent,n=t.tokens,this.tokenManager.setTokens(n);case 5:case"end":return e.stop()}}),e,this)})))}},{key:"setOriginalUri",value:function(e,t){Gn.getSessionStorage().setItem(le,e),(t=t||this.options.state)&&this.storageManager.getOriginalUriStorage().setItem(t,e)}},{key:"getOriginalUri",value:function(e){if(e=e||this.options.state){var t=this.storageManager.getOriginalUriStorage().getItem(e);if(t)return t}var n=Gn.getSessionStorage();return n&&n.getItem(le)||void 0}},{key:"removeOriginalUri",value:function(e){if(Gn.getSessionStorage().removeItem(le),e=e||this.options.state){var t=this.storageManager.getOriginalUriStorage();t.removeItem&&t.removeItem(e)}}},{key:"isLoginRedirect",value:function(){return Lt(this)}},{key:"handleLoginRedirect",value:function(e,t){return ts(this,void 0,void 0,G().mark((function n(){var r,o,i;return G().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=this.options.state,!e){n.next=6;break}this.tokenManager.setTokens(e),t=t||this.getOriginalUri(this.options.state),n.next=25;break;case 6:if(!this.isLoginRedirect()){n.next=24;break}return n.prev=7,n.next=10,Rn(this,{});case 10:return o=n.sent,r=o.state,t=t||this.getOriginalUri(r),n.next=15,this.storeTokensFromRedirect();case 15:n.next=22;break;case 17:return n.prev=17,n.t0=n.catch(7),n.next=21,this.authStateManager.updateAuthState();case 21:throw n.t0;case 22:n.next=25;break;case 24:return n.abrupt("return");case 25:return n.next=27,this.authStateManager.updateAuthState();case 27:if(this.removeOriginalUri(r),!(i=this.options.restoreOriginalUri)){n.next=34;break}return n.next=32,i(this,t);case 32:n.next=35;break;case 34:t&&window.location.replace(t);case 35:case"end":return n.stop()}}),n,this,[[7,17]])})))}},{key:"isPKCE",value:function(){return!!this.options.pkce}},{key:"hasResponseType",value:function(e){return Array.isArray(this.options.responseType)&&this.options.responseType.length?this.options.responseType.indexOf(e)>=0:this.options.responseType===e}},{key:"isAuthorizationCodeFlow",value:function(){return this.hasResponseType("code")}},{key:"getIssuerOrigin",value:function(){return this.options.issuer.split("/oauth2/")[0]}},{key:"forgotPassword",value:function(e){return qe(this,"/api/v1/authn/recovery/password",e)}},{key:"unlockAccount",value:function(e){return qe(this,"/api/v1/authn/recovery/unlock",e)}},{key:"verifyRecoveryToken",value:function(e){return qe(this,"/api/v1/authn/recovery/token",e)}},{key:"invokeApiMethod",value:function(e){return ts(this,void 0,void 0,G().mark((function t(){var n;return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.accessToken){t.next=5;break}return t.next=3,this.tokenManager.getTokens();case 3:n=t.sent.accessToken,e.accessToken=null==n?void 0:n.accessToken;case 5:return t.abrupt("return",Ee(this,e));case 6:case"end":return t.stop()}}),t,this)})))}}]),e}();rs.features=rs.prototype.features=o,rs.crypto=e,rs.webauthn=i,Object.assign(rs,{constants:t});var os=rs}(),r}()}));
//# sourceMappingURL=okta-auth-js.umd.js.map